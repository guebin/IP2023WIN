[
  {
    "objectID": "1_1.html",
    "href": "1_1.html",
    "title": "Chap 1. 기초문법",
    "section": "",
    "text": "No matching items"
  },
  {
    "objectID": "3_3.html",
    "href": "3_3.html",
    "title": "Chap 9. 판다스 백엔드",
    "section": "",
    "text": "Date\n\n\nTitle\n\n\nAuthor\n\n\n\n\n\n\nFeb 1, 2023\n\n\nLesson 16: 고차원 자료의 시각화 (with plotnine)\n\n\n최규빈\n\n\n\n\nFeb 1, 2023\n\n\nLesson 17: 아이스크림을 많이 먹으면 걸리는 병\n\n\n최규빈\n\n\n\n\nFeb 1, 2023\n\n\nLesson 18: FIFA23 자료분석\n\n\n최규빈\n\n\n\n\nFeb 1, 2023\n\n\nLesson 19: 심슨의 역설\n\n\n최규빈\n\n\n\n\n\n\nNo matching items"
  },
  {
    "objectID": "1_4.html",
    "href": "1_4.html",
    "title": "Chap 4. 간단한 데이터 조작",
    "section": "",
    "text": "No matching items"
  },
  {
    "objectID": "about.html",
    "href": "about.html",
    "title": "About",
    "section": "",
    "text": "2023년도 동계 WORKSHOP\n파이썬을 이용한 통계자료분석\nguebin@jbnu.ac.kr\n자연과학대학 본관 205호"
  },
  {
    "objectID": "1_2.html",
    "href": "1_2.html",
    "title": "Chap 2. Numpy",
    "section": "",
    "text": "No matching items"
  },
  {
    "objectID": "2_2.html",
    "href": "2_2.html",
    "title": "Chap 6. 함수, 제어, 반복",
    "section": "",
    "text": "No matching items"
  },
  {
    "objectID": "posts/Day3/08_ggplot2/2023-02-01-Lesson16.html#애드워드-터프티",
    "href": "posts/Day3/08_ggplot2/2023-02-01-Lesson16.html#애드워드-터프티",
    "title": "Lesson 16: 고차원 자료의 시각화 (with plotnine)",
    "section": "애드워드 터프티",
    "text": "애드워드 터프티\n- 데이터 시각화계의 거장\n- 터프티의 이론중 백미: 엄격한 미니멀리즘\n\n최소한의 잉크로 많은 정보를 전달할 수 있다면 그것이 바로 좋은 그래프이다.\n작은 지면 내에서 잉크를 최대한 적게 써서 짧은 시간 안에 많은 영감을 주어야 한다.\n\n- 데이터-잉크비: 데이터를 표현하는데 들아가는 잉크의 양 / 그래픽을 인쇄하는데 들어가는 잉크의 총량\n- 차트정크 (나이젤홈즈의 그래프)\n\n\n“Lurking behind chartjunk is contempt both for information and for the audience. Chartjunk promoters imagine that numbers and details are boring, dull, and tedious, requiring ornament to enliven. Cosmetic decoration, which frequently distorts the data, will never salvage an underlying lack of content. If the numbers are boring, then you’ve got the wrong numbers (…) Worse is contempt for our audience, designing as if readers were obtuse and uncaring. In fact, consumers of graphics are often more intelligent about the information at hand than those who fabricate the data decoration (…) The operating moral premise of information design should be that our readers are alert and caring; they may be busy, eager to get on with it, but they are not stupid.”\n\n\n차트정크 = 대중을 멸시 + 데이터에 대한 모독\n차트정크 옹호가는 숫자와 데이터가 지루하여 활기가 필요하다고 생각하는 모양이다..\n\n- 별로인 그래프 (왼쪽) / 우수한 그래프 오른쪽\n\n- 별로인 그래프 (왼쪽) / 우수한 그래프 오른쪽\n\n- 별로인 그래프 (왼쪽) / 우수한 그래프 오른쪽\n\n- 제 생각: 글쎄…"
  },
  {
    "objectID": "posts/Day3/08_ggplot2/2023-02-01-Lesson16.html#찰스미나드의-도표",
    "href": "posts/Day3/08_ggplot2/2023-02-01-Lesson16.html#찰스미나드의-도표",
    "title": "Lesson 16: 고차원 자료의 시각화 (with plotnine)",
    "section": "찰스미나드의 도표",
    "text": "찰스미나드의 도표\n\n인류역사상 가장 훌륭한 시각화\n\n\n- 터프티의 평\n\n지금까지 그려진 최고의 통계 그래픽일지도 모른다.\n여기에서는 군대의 크기, 2차원 평면상의 위치, 군대의 이동방향, 모스코바에서 퇴각하는 동안의 여러날짜, 온도 \\(\\to\\) 6차원의 변수\n백만번에 한번 이런 그림을 그릴수는 있겠지만 이러한 멋진 그래픽을 만드는 방법에 대한 원칙은 없다. \\(\\to\\) 미니멀리즘..\n\n- 왜 우수한 그래프일까?\n\n자료를 파악하는 기법은 최근까지도 산점도, 막대그래프, 라인플랏에 의존\n이러한 플랏의 단점은 고차원의 자료를 분석하기 어렵다는 것임\n미나드는 여러그램을 그리는 방법 대신에 한 그림에서 패널을 늘리는 방법을 선택함."
  },
  {
    "objectID": "posts/Day3/08_ggplot2/2023-02-01-Lesson16.html#미나드처럼-그리는게-왜-어려운가",
    "href": "posts/Day3/08_ggplot2/2023-02-01-Lesson16.html#미나드처럼-그리는게-왜-어려운가",
    "title": "Lesson 16: 고차원 자료의 시각화 (with plotnine)",
    "section": "미나드처럼 그리는게 왜 어려운가?",
    "text": "미나드처럼 그리는게 왜 어려운가?\n- 몸무게, 키, 성별, 국적\n\ndf1=pd.read_csv('https://raw.githubusercontent.com/guebin/DV2022/master/posts/male1.csv')\ndf2=pd.read_csv('https://raw.githubusercontent.com/guebin/DV2022/master/posts/male2.csv')  \ndf3=pd.read_csv('https://raw.githubusercontent.com/guebin/DV2022/master/posts/female.csv') \ndf4=pd.read_csv('https://raw.githubusercontent.com/guebin/DV2022/master/posts/foreign.csv')\n\n- 미나드의 접근방법\n\n_df = pd.concat([pd.concat([df1,df2],axis=1).assign(g='m'),df3.assign(g='f')])\ndf = pd.concat([_df.assign(g2='korea'),df4.assign(g2='foreign')]).reset_index(drop=True)\ndf\n\n\n\n\n\n  \n    \n      \n      w\n      h\n      g\n      g2\n    \n  \n  \n    \n      0\n      72.788217\n      183.486773\n      m\n      korea\n    \n    \n      1\n      66.606430\n      173.599877\n      m\n      korea\n    \n    \n      2\n      69.806324\n      173.237903\n      m\n      korea\n    \n    \n      3\n      67.449439\n      173.223805\n      m\n      korea\n    \n    \n      4\n      70.463183\n      174.931946\n      m\n      korea\n    \n    \n      ...\n      ...\n      ...\n      ...\n      ...\n    \n    \n      1525\n      78.154632\n      188.324350\n      m\n      foreign\n    \n    \n      1526\n      74.754308\n      183.017979\n      f\n      foreign\n    \n    \n      1527\n      91.196208\n      190.100456\n      m\n      foreign\n    \n    \n      1528\n      87.770394\n      187.987255\n      m\n      foreign\n    \n    \n      1529\n      88.021995\n      193.456798\n      m\n      foreign\n    \n  \n\n1530 rows × 4 columns\n\n\n\n\nsns.scatterplot(data=df,x='w',y='h',hue='g',style='g2')\n\n<AxesSubplot:xlabel='w', ylabel='h'>\n\n\n\n\n\n- 어려운점: (1) 센스가 없어서 hue/style을 이용하여 그룹을 구분할 생각을 못함 (2) long df (=tidy data) 형태로 데이터를 정리할 생각을 못함 (3) long df 형태로 데이터를 변형하는 코드를 모름\n\n기획력부족 -> 훌륭한 시각화를 많이 볼 것\n데이터프레임에 대한 이해부족 -> tidydata에 대한 개념\n프로그래밍 능력 -> 코딩공부열심히 (pandas를 엄청 잘해야함)"
  },
  {
    "objectID": "posts/Day3/08_ggplot2/2023-02-01-Lesson16.html#data-설명",
    "href": "posts/Day3/08_ggplot2/2023-02-01-Lesson16.html#data-설명",
    "title": "Lesson 16: 고차원 자료의 시각화 (with plotnine)",
    "section": "data 설명",
    "text": "data 설명\n- displ: 자동차의 엔진크기\n- hwy: 연료의 효율, 동일한 연료로 얼마나 멀리 가느냐?\n- 자세한 설명은 R에서 ?mpg를 이용해 스스로 찾아볼 것"
  },
  {
    "objectID": "posts/Day3/08_ggplot2/2023-02-01-Lesson16.html#python에서-plotnine을-이용한-산점도",
    "href": "posts/Day3/08_ggplot2/2023-02-01-Lesson16.html#python에서-plotnine을-이용한-산점도",
    "title": "Lesson 16: 고차원 자료의 시각화 (with plotnine)",
    "section": "python에서: plotnine을 이용한 산점도",
    "text": "python에서: plotnine을 이용한 산점도\n\nggplot(data=mpg) + geom_point(mapping=aes(x='displ',y='hwy')) ## plotnine\n\n\n\n\n<ggplot: (8775336983373)>\n\n\n\n산점도 해석: 엔진크기가 클수록 효율이 낮음.\n\n- 빠르게 그리기: data=와 mapping=은 생략가능함\n\nggplot(mpg) + geom_point(aes(x='displ',y='hwy')) ## plotnine\n\n\n\n\n<ggplot: (8775336295029)>"
  },
  {
    "objectID": "posts/Day3/08_ggplot2/2023-02-01-Lesson16.html#객체지향적인-느낌으로-산점도-그리기",
    "href": "posts/Day3/08_ggplot2/2023-02-01-Lesson16.html#객체지향적인-느낌으로-산점도-그리기",
    "title": "Lesson 16: 고차원 자료의 시각화 (with plotnine)",
    "section": "객체지향적인 느낌으로 산점도 그리기",
    "text": "객체지향적인 느낌으로 산점도 그리기\nstep1: 도화지를 준비한다.\n\nfig = ggplot(data=mpg)\nfig\n\n\n\n\n<ggplot: (8775336276849)>\n\n\nstep2 변수와 에스테틱사이의 맵핑을 설정한다.\n\na1= aes(x='displ',y='hwy')\na1\n\n{'x': 'displ', 'y': 'hwy'}\n\n\nstep3 점들의 집합을 만든다. 즉 포인트 지옴을 만든다.\n\npoint1=geom_point(mapping=a1)\n\n\ngeom_point(): 점들을 그려! 어떻게?\na1에서 설정된 표를 보고\n\nstep4 도화지와 지옴을 합친다.\n\nfig+point1\n\n\n\n\n<ggplot: (8775335422437)>"
  },
  {
    "objectID": "posts/Day3/08_ggplot2/2023-02-01-Lesson16.html#산점도-점크기변경",
    "href": "posts/Day3/08_ggplot2/2023-02-01-Lesson16.html#산점도-점크기변경",
    "title": "Lesson 16: 고차원 자료의 시각화 (with plotnine)",
    "section": "산점도 + 점크기변경",
    "text": "산점도 + 점크기변경\n\nggplot(data=mpg) + geom_point(mapping = aes(x='displ',y='hwy',size='class'))\n\n/home/cgb4/anaconda3/envs/py37/lib/python3.7/site-packages/plotnine/scales/scale_size.py:50: PlotnineWarning: Using size for a discrete variable is not advised.\n\n\n\n\n\n<ggplot: (8726734563561)>"
  },
  {
    "objectID": "posts/Day3/08_ggplot2/2023-02-01-Lesson16.html#산점도-투명도변경",
    "href": "posts/Day3/08_ggplot2/2023-02-01-Lesson16.html#산점도-투명도변경",
    "title": "Lesson 16: 고차원 자료의 시각화 (with plotnine)",
    "section": "산점도 + 투명도변경",
    "text": "산점도 + 투명도변경\n\nggplot(data=mpg) + geom_point(mapping = aes(x='displ',y='hwy',alpha='class'))\n\n/home/cgb4/anaconda3/envs/py37/lib/python3.7/site-packages/plotnine/scales/scale_alpha.py:70: PlotnineWarning: Using alpha for a discrete variable is not advised.\n\n\n\n\n\n<ggplot: (8726734989121)>"
  },
  {
    "objectID": "posts/Day3/08_ggplot2/2023-02-01-Lesson16.html#산점도-투명도점크기를-동시에-적용",
    "href": "posts/Day3/08_ggplot2/2023-02-01-Lesson16.html#산점도-투명도점크기를-동시에-적용",
    "title": "Lesson 16: 고차원 자료의 시각화 (with plotnine)",
    "section": "산점도 + 투명도/점크기를 동시에 적용",
    "text": "산점도 + 투명도/점크기를 동시에 적용\n\nggplot(data=mpg) + geom_point(mapping = aes(x='displ',y='hwy',alpha='class',size='class'))\n\n/home/cgb4/anaconda3/envs/py37/lib/python3.7/site-packages/plotnine/scales/scale_alpha.py:70: PlotnineWarning: Using alpha for a discrete variable is not advised.\n/home/cgb4/anaconda3/envs/py37/lib/python3.7/site-packages/plotnine/scales/scale_size.py:50: PlotnineWarning: Using size for a discrete variable is not advised.\n\n\n\n\n\n<ggplot: (8726734522405)>"
  },
  {
    "objectID": "posts/Day3/08_ggplot2/2023-02-01-Lesson16.html#산점도-형태",
    "href": "posts/Day3/08_ggplot2/2023-02-01-Lesson16.html#산점도-형태",
    "title": "Lesson 16: 고차원 자료의 시각화 (with plotnine)",
    "section": "산점도 + 형태",
    "text": "산점도 + 형태\n\nggplot(data=mpg) + geom_point(mapping = aes(x='displ',y='hwy',shape='class'))\n\n\n\n\n<ggplot: (8726734265229)>"
  },
  {
    "objectID": "posts/Day3/08_ggplot2/2023-02-01-Lesson16.html#산점도-색깔",
    "href": "posts/Day3/08_ggplot2/2023-02-01-Lesson16.html#산점도-색깔",
    "title": "Lesson 16: 고차원 자료의 시각화 (with plotnine)",
    "section": "산점도 + 색깔",
    "text": "산점도 + 색깔\n\nggplot(data=mpg) + geom_point(mapping = aes(x='displ',y='hwy',color='class'))\n\n\n\n\n<ggplot: (8726734017473)>"
  },
  {
    "objectID": "posts/Day3/08_ggplot2/2023-02-01-Lesson16.html#객체지향적-느낌으로",
    "href": "posts/Day3/08_ggplot2/2023-02-01-Lesson16.html#객체지향적-느낌으로",
    "title": "Lesson 16: 고차원 자료의 시각화 (with plotnine)",
    "section": "객체지향적 느낌으로?",
    "text": "객체지향적 느낌으로?\n\na2 = aes(x='displ', y='hwy', color='class') \n\n\na1,a2\n\n({'x': 'displ', 'y': 'hwy'}, {'x': 'displ', 'y': 'hwy', 'color': 'class'})\n\n\n\npoint2=geom_point(a2)\n\n\nfig+point2\n\n\n\n\n<ggplot: (8775335353217)>"
  },
  {
    "objectID": "posts/Day3/08_ggplot2/2023-02-01-Lesson16.html#산점도-색깔-적합선",
    "href": "posts/Day3/08_ggplot2/2023-02-01-Lesson16.html#산점도-색깔-적합선",
    "title": "Lesson 16: 고차원 자료의 시각화 (with plotnine)",
    "section": "산점도 + 색깔 + 적합선",
    "text": "산점도 + 색깔 + 적합선\n- 일단 색깔이 없는 포인트 지옴부터 연습\n\nfig+point1\n\n\n\n\n<ggplot: (8775335332061)>\n\n\n\nline1 = geom_smooth(a1)\n\n\nfig+point1+line1\n\n/home/cgb2/anaconda3/envs/py37/lib/python3.7/site-packages/plotnine/stats/smoothers.py:311: PlotnineWarning: Confidence intervals are not yet implementedfor lowess smoothings.\n\n\n\n\n\n<ggplot: (8775334960069)>\n\n\n- point1(색깔없는 포인트 지옴)을 point2(색깔있는 포인트 지옴)으로 언제든지 바꿔치기 가능!\n\nfig+point2+line1\n\n/home/cgb4/anaconda3/envs/py37/lib/python3.7/site-packages/plotnine/stats/smoothers.py:311: PlotnineWarning: Confidence intervals are not yet implementedfor lowess smoothings.\n\n\n\n\n\n<ggplot: (8726732661565)>\n\n\n- 명령어로 한번에 그리기\n\nggplot(data=mpg) + \\\ngeom_point(mapping=aes(x='displ',y='hwy',color='class')) + \\\ngeom_smooth(mapping=aes(x='displ',y='hwy'))\n\n/home/cgb4/anaconda3/envs/py37/lib/python3.7/site-packages/plotnine/stats/smoothers.py:311: PlotnineWarning: Confidence intervals are not yet implementedfor lowess smoothings.\n\n\n\n\n\n<ggplot: (8726732727485)>\n\n\n- 공통적인 맵핑규칙은 ggplot()쪽으로 빼기도 한다. (figure를 선언하는 곳에서 공통으로 선언함)\n\nggplot(data=mpg,mapping=aes(x='displ',y='hwy')) + \\\ngeom_point(mapping=aes(color='class')) + \\\ngeom_smooth()\n\n/home/cgb4/anaconda3/envs/py37/lib/python3.7/site-packages/plotnine/stats/smoothers.py:311: PlotnineWarning: Confidence intervals are not yet implementedfor lowess smoothings.\n\n\n\n\n\n<ggplot: (8726733489953)>"
  },
  {
    "objectID": "posts/Day3/08_ggplot2/2023-02-01-Lesson16.html#산점도-점크기변경-색깔",
    "href": "posts/Day3/08_ggplot2/2023-02-01-Lesson16.html#산점도-점크기변경-색깔",
    "title": "Lesson 16: 고차원 자료의 시각화 (with plotnine)",
    "section": "산점도 + 점크기변경 + 색깔",
    "text": "산점도 + 점크기변경 + 색깔\n- drv (전륜, 후륜, 4륜 구동)에 따라서 데이터를 시각화 하고 싶다.\n\nggplot(data=mpg, mapping=aes(x='displ',y='hwy')) + geom_point(mapping=aes(size='class',color='drv'),alpha=0.3)\n\n/home/cgb4/anaconda3/envs/py37/lib/python3.7/site-packages/plotnine/scales/scale_size.py:50: PlotnineWarning: Using size for a discrete variable is not advised.\n\n\n\n\n\n<ggplot: (8726731152845)>\n\n\n\n모든 \\(x\\)에 대하여 붉은색 점들이 대부분 초록색과 보라색 점들에 비하여 아래쪽에 있음 \\(\\to\\) 4륜구동방식이 연비가 좋지 않음"
  },
  {
    "objectID": "posts/Day3/08_ggplot2/2023-02-01-Lesson16.html#산점도-점크기변경-색깔-객체지향버전",
    "href": "posts/Day3/08_ggplot2/2023-02-01-Lesson16.html#산점도-점크기변경-색깔-객체지향버전",
    "title": "Lesson 16: 고차원 자료의 시각화 (with plotnine)",
    "section": "산점도 + 점크기변경 + 색깔 (객체지향버전)",
    "text": "산점도 + 점크기변경 + 색깔 (객체지향버전)\n- 맵핑규칙\n\na1,a2\n\n({'x': 'displ', 'y': 'hwy'}, {'x': 'displ', 'y': 'hwy', 'color': 'class'})\n\n\n\na3 = a2.copy() \n\n\na3['color'] = 'drv'\na3['size'] = 'class'\na3\n\n{'x': 'displ', 'y': 'hwy', 'color': 'drv', 'size': 'class'}\n\n\n\n아래와 같이 선언해도 괜찮음\n\na3= aes(x='displ',y='hwy',color='drv',size='class')\n\npoint3=geom_point(a3)\n\n\nfig+point3\n\n/home/cgb2/anaconda3/envs/py37/lib/python3.7/site-packages/plotnine/scales/scale_size.py:50: PlotnineWarning: Using size for a discrete variable is not advised.\n\n\n\n\n\n<ggplot: (8775334891765)>\n\n\n\n그림의 전체적인 투명도를 조절하면 좋겠음\n\n\npoint3=geom_point(a3,alpha=0.2)\nfig+point3\n\n/home/cgb2/anaconda3/envs/py37/lib/python3.7/site-packages/plotnine/scales/scale_size.py:50: PlotnineWarning: Using size for a discrete variable is not advised.\n\n\n\n\n\n<ggplot: (8775333161077)>"
  },
  {
    "objectID": "posts/Day3/08_ggplot2/2023-02-01-Lesson16.html#산점도-점크기변경-색깔-선추가",
    "href": "posts/Day3/08_ggplot2/2023-02-01-Lesson16.html#산점도-점크기변경-색깔-선추가",
    "title": "Lesson 16: 고차원 자료의 시각화 (with plotnine)",
    "section": "산점도 + 점크기변경 + 색깔 + 선추가",
    "text": "산점도 + 점크기변경 + 색깔 + 선추가\n\nfig+point3+line1\n\n/home/cgb4/anaconda3/envs/py37/lib/python3.7/site-packages/plotnine/scales/scale_size.py:50: PlotnineWarning: Using size for a discrete variable is not advised.\n/home/cgb4/anaconda3/envs/py37/lib/python3.7/site-packages/plotnine/stats/smoothers.py:311: PlotnineWarning: Confidence intervals are not yet implementedfor lowess smoothings.\n\n\n\n\n\n<ggplot: (8726730575253)>"
  },
  {
    "objectID": "posts/Day3/08_ggplot2/2023-02-01-Lesson16.html#산점도-점크기변경-색깔-drv별로-선추가",
    "href": "posts/Day3/08_ggplot2/2023-02-01-Lesson16.html#산점도-점크기변경-색깔-drv별로-선추가",
    "title": "Lesson 16: 고차원 자료의 시각화 (with plotnine)",
    "section": "산점도 + 점크기변경 + 색깔 + drv별로 선추가",
    "text": "산점도 + 점크기변경 + 색깔 + drv별로 선추가\n- 맵핑규칙\n\na1,a2,a3\n\n({'x': 'displ', 'y': 'hwy'},\n {'x': 'displ', 'y': 'hwy', 'color': 'class'},\n {'x': 'displ', 'y': 'hwy', 'color': 'drv', 'size': 'class'})\n\n\n\na4 = a2.copy() \na4['color']='drv'\na4\n\n{'x': 'displ', 'y': 'hwy', 'color': 'drv'}\n\n\n\nline2 = geom_smooth(a4)\n\n\nfig + point3 +line2\n\n/home/cgb2/anaconda3/envs/py37/lib/python3.7/site-packages/plotnine/scales/scale_size.py:50: PlotnineWarning: Using size for a discrete variable is not advised.\n/home/cgb2/anaconda3/envs/py37/lib/python3.7/site-packages/plotnine/stats/smoothers.py:311: PlotnineWarning: Confidence intervals are not yet implementedfor lowess smoothings.\n\n\n\n\n\n<ggplot: (8775336209333)>\n\n\n- 선의 색깔을 동일하게 하고 선의 타입을 변경하여 drv를 표시하고 싶다면?\n\na1,a2,a3,a4\n\n({'x': 'displ', 'y': 'hwy'},\n {'x': 'displ', 'y': 'hwy', 'color': 'class'},\n {'x': 'displ', 'y': 'hwy', 'color': 'drv', 'size': 'class'},\n {'x': 'displ', 'y': 'hwy', 'color': 'drv'})\n\n\n\na5=a1.copy()\na5['linetype']='drv' \na5\n\n{'x': 'displ', 'y': 'hwy', 'linetype': 'drv'}\n\n\n\nline3 = geom_smooth(a5,size=0.5,color='gray')\n\n\nfig+point3+line3\n\n/home/cgb4/anaconda3/envs/py37/lib/python3.7/site-packages/plotnine/scales/scale_size.py:50: PlotnineWarning: Using size for a discrete variable is not advised.\n/home/cgb4/anaconda3/envs/py37/lib/python3.7/site-packages/plotnine/stats/smoothers.py:311: PlotnineWarning: Confidence intervals are not yet implementedfor lowess smoothings.\n\n\n\n\n\n<ggplot: (8726732637457)>\n\n\n- 전체적인 추세선도 추가하고 싶다면?\n\nfig+point3+line3+line1\n\n/home/cgb4/anaconda3/envs/py37/lib/python3.7/site-packages/plotnine/scales/scale_size.py:50: PlotnineWarning: Using size for a discrete variable is not advised.\n/home/cgb4/anaconda3/envs/py37/lib/python3.7/site-packages/plotnine/stats/smoothers.py:311: PlotnineWarning: Confidence intervals are not yet implementedfor lowess smoothings.\n\n\n\n\n\n<ggplot: (8726732939513)>\n\n\n- 그려보니까 역시 drv별로 그려지는 추세선은 색깔별로 구분하는게 좋겠음.\n\nline2 = geom_smooth(a4,size=0.5,linetype='dashed')\nfig+point3+line2+line1\n\n/home/cgb4/anaconda3/envs/py37/lib/python3.7/site-packages/plotnine/scales/scale_size.py:50: PlotnineWarning: Using size for a discrete variable is not advised.\n/home/cgb4/anaconda3/envs/py37/lib/python3.7/site-packages/plotnine/stats/smoothers.py:311: PlotnineWarning: Confidence intervals are not yet implementedfor lowess smoothings.\n\n\n\n\n\n<ggplot: (8726733678229)>\n\n\n- 고차원을 변수를 표현할 수 있는 무기는 다양하다.\n\n산점도(포인트지옴): 점의크기, 점의형태, 점의색깔, 점의투명도\n라인플랏(스무스지옴,라인지옴): 선의형태, 선의색깔, 선의굵기"
  },
  {
    "objectID": "posts/Day3/08_ggplot2/2023-02-01-Lesson17.html#toy-exam",
    "href": "posts/Day3/08_ggplot2/2023-02-01-Lesson17.html#toy-exam",
    "title": "Lesson 17: 아이스크림을 많이 먹으면 걸리는 병",
    "section": "Toy exam",
    "text": "Toy exam\n- 교재의 예제상황은 예를들면 아래와 같다.\n(숨은진짜상황1)\n\\[\\text{아이스크림 판매량} = 20 + 2 \\times \\text{온도} + \\epsilon\\]\n\nnp.random.seed(1) \ntemp= np.array([-10.2, -5.2, 0.1, 10.1, 12.2, 14.7, \n                25.4, 26.8, 28.9, 35.1, 32.2, 34.6])\neps= np.random.normal(size=12,scale=5)\nicecream= 20 + temp * 2 + eps\n\n\nplt.plot(temp,icecream,'.')\n\n\n\n\n\n온도와 아이스크림 판매량의 산점도\n\n(숨은진짜상황2)\n\\[\\text{소아마비 반응수치} = 30 + 0.5 \\times \\text{온도} + \\epsilon\\] - 좌변은 소아마비임을 나타내는 어떠한 반응수치라고 생각하자.\n\nnp.random.seed(2) \neps = np.random.normal(size=12,scale=5) \ndisease = 30+ temp* 0.5 + eps\n\n\nplt.plot(temp,disease,'.')\n\n\n\n\n\n온도와 소아마비의 산점도\n\n(우리가 데이터로부터 관측한 상황)\n- 아이스크림과 질병의 산점도를 그려보자.\n\nplt.plot(icecream,disease,'.')\n\n\n\n\n\n양의 상관관계에 있다.\n\n- 아이스크림 중 어떠한 물질이 소아마비를 일으키는것이 분명하므로 (인과성이 분명해보이니까) 아래와 같은 모형을 세우자. <– 여기서부터 틀렸음\n\\[{\\tt disease}_i =\\beta_0 +\\beta_1 {\\tt icecream}_i +\\epsilon_i,\\quad \\textbf{for} ~~ i=1,2,\\dots, 12\\]\n- 적절한 \\(\\beta_0\\)와 \\(\\beta_1\\)을 추정하면 우리는 아이스크림과 소아마비의 관계를 알 수 있다. <– 틀린주장\n\n틀린 모형\n도데체 우리가 뭘 잘못했는가?\n\n- 두 변수 사이에 상관관계가 있어도 실제 원인은 다른 변수에 숨겨져 있는 경우가 많다.\n(ex1)\n\n온도 \\(\\to\\) 익사\n온도 \\(\\to\\) 아이스크림\n아이스크림과 익사자도 양의 상관관계에 있을것이다.\n아이스크림을 먹이면 물에 빠져 죽는다 \\(\\to\\) 틀린주장\n사실 기온이 숨겨진 원인이다. 기온이 증가하면 아이스크림 판매량도 증가하고 폭염때문에 익사사고율도 높아지는 구조이다.\n\n(ex2)\n\n인구수 \\(\\to\\) 교회\n인구수 \\(\\to\\) 범죄건수\n지역별 교회와 범죄건수를 살펴보면 상관관계가 높게 나올것임\n교회를 지으면 범죄건수도 증가한다? \\(\\to\\) 틀린주장\n사실 인구가 숨겨진 요인임\n\n- ex2, ex1에 대하여 바른 분석을 하려면?\n\nex2: 인구가 비슷한 도시끼리 묶어서 비교해보면 교회와 범죄의 건수는 양의 상관관계에 있지 않을것임\nex1: 온도가 비슷한 그룹끼리 묶어보자.\n\n- 올바른 분석: 온도가 비슷한 그룹끼리 묶어서 그려보자. \\(\\to\\) 상관계수가 줄어들 것이다.\n\nplt.plot(icecream[:6],disease[:6],'.')\n\n\n\n\n\nplt.plot(icecream[6:],disease[6:],'.')\n\n\n\n\n\n진짜로 선형관계가 약해졌다.."
  },
  {
    "objectID": "posts/Day3/08_ggplot2/2023-02-01-Lesson17.html#자료생성-좀-더-그럴듯한-자료-만들기",
    "href": "posts/Day3/08_ggplot2/2023-02-01-Lesson17.html#자료생성-좀-더-그럴듯한-자료-만들기",
    "title": "Lesson 17: 아이스크림을 많이 먹으면 걸리는 병",
    "section": "자료생성: 좀 더 그럴듯한 자료 (만들기)",
    "text": "자료생성: 좀 더 그럴듯한 자료 (만들기)\n- 지난 시간의 toy example은 데이터가 너무 작아서 억지스러움 \\(\\to\\) 기상자료개방포털, 회원가입해야 자료받을 수 있음.\n\n_df=pd.read_csv('https://raw.githubusercontent.com/guebin/DV2022/master/posts/temp.csv')\n_df\n\n\n\n\n\n  \n    \n      \n      지점번호\n      지점명\n      일시\n      평균기온(℃)\n      최고기온(℃)\n      최고기온시각\n      최저기온(℃)\n    \n  \n  \n    \n      0\n      146\n      전주\n      2020-01-01\n      -0.5\n      4.3\n      15:09\n      -6.4\n    \n    \n      1\n      146\n      전주\n      2020-01-02\n      1.4\n      6.5\n      14:12\n      -3.0\n    \n    \n      2\n      146\n      전주\n      2020-01-03\n      2.6\n      7.6\n      13:32\n      -0.5\n    \n    \n      3\n      146\n      전주\n      2020-01-04\n      2.0\n      7.7\n      13:51\n      -2.6\n    \n    \n      4\n      146\n      전주\n      2020-01-05\n      2.5\n      8.6\n      14:05\n      -3.2\n    \n    \n      ...\n      ...\n      ...\n      ...\n      ...\n      ...\n      ...\n      ...\n    \n    \n      651\n      146\n      전주\n      2021-10-13\n      19.9\n      25.5\n      14:29\n      15.6\n    \n    \n      652\n      146\n      전주\n      2021-10-14\n      20.4\n      25.5\n      13:36\n      17.0\n    \n    \n      653\n      146\n      전주\n      2021-10-15\n      18.3\n      22.0\n      13:47\n      15.7\n    \n    \n      654\n      146\n      전주\n      2021-10-16\n      12.8\n      17.4\n      0:01\n      6.5\n    \n    \n      655\n      146\n      전주\n      2021-10-17\n      6.7\n      12.4\n      15:18\n      2.2\n    \n  \n\n656 rows × 7 columns\n\n\n\n- 평균기온만 선택\n\npd.Series(_df.columns)\n\n0       지점번호\n1        지점명\n2         일시\n3    평균기온(℃)\n4    최고기온(℃)\n5     최고기온시각\n6    최저기온(℃)\ndtype: object\n\n\n\ntemp = np.array(_df.iloc[:,3])\ntemp[:5]\n\narray([-0.5,  1.4,  2.6,  2. ,  2.5])\n\n\n\n# 숨은진짜상황1: 온도 \\(\\to\\) 아이스크림 판매량\n- 아래와 같은 관계가 있다고 하자.\n\\[\\text{아이스크림 판매량} = 20 + 2 \\times \\text{온도} + \\epsilon\\]\n\nnp.random.seed(1)\neps = np.random.normal(size=len(temp), scale=10) \nicecream = 20 + 2*temp + eps\n\n\nplt.plot(temp,icecream,'o',alpha=0.3)\nplt.xlabel(\"temp\",size=15)\nplt.ylabel(\"icecream\",size=15)\n\nText(0, 0.5, 'icecream')\n\n\n\n\n\n\n\n# 숨은진짜상황1: 온도 \\(\\to\\) 아이스크림 판매량\n- 아래와 같은 관계가 있다고 하자.\n\\[\\text{소아마비 반응수치} = 30 + 0.5 \\times \\text{온도} + \\epsilon\\]\n\nnp.random.seed(2) \neps=np.random.normal(size=len(temp),scale=1)\ndisease= 30 + 0.5 * temp + eps\n\n\nplt.plot(temp,disease,'o',alpha=0.3)\nplt.xlabel(\"temp\",size=15)\nplt.ylabel(\"disease\",size=15)\n\nText(0, 0.5, 'disease')\n\n\n\n\n\n\n\n# 우리가 관측한 상황 (온도는 은닉되어있음)\n\nplt.plot(icecream,disease,'o',alpha=0.3)\nplt.xlabel(\"icecream\",size=15)\nplt.ylabel(\"disease\",size=15)\n\nText(0, 0.5, 'disease')\n\n\n\n\n\n\nnp.corrcoef(icecream,disease)\n\narray([[1.        , 0.86298975],\n       [0.86298975, 1.        ]])\n\n\n\n0.86정도.."
  },
  {
    "objectID": "posts/Day3/08_ggplot2/2023-02-01-Lesson17.html#직관-여름만-뽑아서-plot-해보자.",
    "href": "posts/Day3/08_ggplot2/2023-02-01-Lesson17.html#직관-여름만-뽑아서-plot-해보자.",
    "title": "Lesson 17: 아이스크림을 많이 먹으면 걸리는 병",
    "section": "직관: 여름만 뽑아서 plot 해보자.",
    "text": "직관: 여름만 뽑아서 plot 해보자.\n- temp>25 (여름으로 간주) 인 관측치만 플랏\n\nplt.plot(icecream[temp>25],disease[temp>25], 'o', color='C1') ## 평균기온이 25도가 넘어가면 여름이라 생각 \n\n\n\n\n- 전체적인 산점도\n\nfig , ((ax1,ax2), (ax3,ax4)) = plt.subplots(2,2,figsize=(8,6)) \nax1.plot(temp,icecream,'o',alpha=0.2); ax1.set_xlabel('temp'); ax1.set_ylabel('icecream'); ax1.set_title(\"hidden1\")\nax2.plot(temp,disease,'o',alpha=0.2); ax2.set_xlabel('temp'); ax2.set_ylabel('disease'); ax2.set_title(\"hidden2\")\nax3.plot(icecream,disease,'o',alpha=0.2); ax3.set_xlabel('icecream'); ax3.set_ylabel('disease'); ax3.set_title(\"observed\")\nax4.plot(icecream,disease,'o',alpha=0.2); ax4.set_xlabel('icecream'); ax4.set_ylabel('disease'); ax4.set_title(\"observed\")\nax4.plot(icecream[temp>25],disease[temp>25],'o',label='temp>25')\nax4.legend()\nfig.tight_layout()"
  },
  {
    "objectID": "posts/Day3/08_ggplot2/2023-02-01-Lesson17.html#ggplot-온도구간을-세분화-하여-시각화",
    "href": "posts/Day3/08_ggplot2/2023-02-01-Lesson17.html#ggplot-온도구간을-세분화-하여-시각화",
    "title": "Lesson 17: 아이스크림을 많이 먹으면 걸리는 병",
    "section": "ggplot: 온도구간을 세분화 하여 시각화",
    "text": "ggplot: 온도구간을 세분화 하여 시각화\n- 목표: 모든 온도구간에 대하여 각각 색을 다르게 하여 그려보자.\n\n사실 지금 변수는 온도, 아이스크림판매량, 소아마비\n온도가 유사한 지역을 색으로 묶으면 3차원 플랏이 가능함\n\n\n# df로 자료정리\n- 일단 데이터 프레임을 정리하자.\n\ndf = pd.DataFrame({'temp':temp,'icecream':icecream,'disease':disease})\ndf\n\n\n\n\n\n  \n    \n      \n      temp\n      icecream\n      disease\n    \n  \n  \n    \n      0\n      -0.5\n      35.243454\n      29.333242\n    \n    \n      1\n      1.4\n      16.682436\n      30.643733\n    \n    \n      2\n      2.6\n      19.918282\n      29.163804\n    \n    \n      3\n      2.0\n      13.270314\n      32.640271\n    \n    \n      4\n      2.5\n      33.654076\n      29.456564\n    \n    \n      ...\n      ...\n      ...\n      ...\n    \n    \n      651\n      19.9\n      68.839992\n      39.633906\n    \n    \n      652\n      20.4\n      76.554679\n      38.920443\n    \n    \n      653\n      18.3\n      68.666079\n      39.882650\n    \n    \n      654\n      12.8\n      42.771364\n      36.613159\n    \n    \n      655\n      6.7\n      30.736731\n      34.902513\n    \n  \n\n656 rows × 3 columns\n\n\n\n\n\n# 구간세분화\n- 온도를 카테고리화 하자 \\(\\to\\) 적당한 구긴을 설정하기 위해서 히스토그램을 그려보자.\n\ndf.temp.hist() # ? 이거 14주차쯤 배우는데 미리 스포합니다.. 엄청 편해요 \n\n<AxesSubplot:>\n\n\n\n\n\n\nplt.hist(df.temp) # 원래는 이걸 배웠죠\n\n(array([  3.,   9.,  29.,  60.,  92.,  86.,  65.,  93., 139.,  80.]),\n array([-12.4 ,  -8.16,  -3.92,   0.32,   4.56,   8.8 ,  13.04,  17.28,\n         21.52,  25.76,  30.  ]),\n <BarContainer object of 10 artists>)\n\n\n\n\n\n- 구간은 5정도로 하면 적당할 것 같다.\n\ndef cut(x): # 이거보다 더 좋은 방법이 있을 것 같긴 한데요..\n    if x<0: \n        y='Temp: <0'\n    elif x<5: \n        y='Temp: 0~5'\n    elif x<10: \n        y='Temp: 5~10'\n    elif x<15: \n        y='Temp: 10~15'\n    elif x<20:\n        y='Temp: 15~20'\n    elif x<25: \n        y='Temp: 20~25'\n    else: \n        y='Temp: >30'\n    return y \n\n\ndf.assign(temp2 = list(map(cut,df.temp)))\n\n\n\n\n\n  \n    \n      \n      temp\n      icecream\n      disease\n      temp2\n    \n  \n  \n    \n      0\n      -0.5\n      35.243454\n      29.333242\n      Temp: <0\n    \n    \n      1\n      1.4\n      16.682436\n      30.643733\n      Temp: 0~5\n    \n    \n      2\n      2.6\n      19.918282\n      29.163804\n      Temp: 0~5\n    \n    \n      3\n      2.0\n      13.270314\n      32.640271\n      Temp: 0~5\n    \n    \n      4\n      2.5\n      33.654076\n      29.456564\n      Temp: 0~5\n    \n    \n      ...\n      ...\n      ...\n      ...\n      ...\n    \n    \n      651\n      19.9\n      68.839992\n      39.633906\n      Temp: 15~20\n    \n    \n      652\n      20.4\n      76.554679\n      38.920443\n      Temp: 20~25\n    \n    \n      653\n      18.3\n      68.666079\n      39.882650\n      Temp: 15~20\n    \n    \n      654\n      12.8\n      42.771364\n      36.613159\n      Temp: 10~15\n    \n    \n      655\n      6.7\n      30.736731\n      34.902513\n      Temp: 5~10\n    \n  \n\n656 rows × 4 columns\n\n\n\n\n\n# ggplot\n- 온도를 색으로 구분하면\n\nfig = ggplot(data=df.assign(temp2 = list(map(cut,df.temp))))\np1 = geom_point(aes(x='icecream',y='disease',colour='temp2'),alpha=0.5)\nfig + p1\n\n\n\n\n<ggplot: (8762005360345)>\n\n\n- 추세선을 추가하면\n\nl1 = geom_smooth(aes(x='icecream',y='disease',colour='temp2'))\n\n\nfig+p1+l1\n\n/home/cgb4/anaconda3/envs/py37/lib/python3.7/site-packages/plotnine/stats/smoothers.py:311: PlotnineWarning: Confidence intervals are not yet implementedfor lowess smoothings.\n\n\n\n\n\n<ggplot: (8762010169613)>\n\n\n\n각 온도별로 추세선은 거의 기울기가 0이다. \\(\\to\\) 온도가 비슷한 구간별로 묶어서 보니까 상관관계가 없다는 거!\n아이스크림 판매량과 소아마비의 corr은 유의미해보이지만, 온도를 통제하였을 경우 아이스크림 판매량과 소아마비의 partial corr은 유의미해보이지 않음.\n\n\n\n# 해석\n- 해피앤딩: 온도를 통제하니까 아이스크림과 질병은 관련이 없어보인다. \\(\\to\\) 아이스크림을 먹으면 소아마비를 유발한다는 이상한 결론이 나올뻔 했지만 우리는 온도라는 흑막을 잘 찾았고 결과적으로 “온도->아이스크림판매량,소아마비” 이라는 합리적인 진리를 얻을 수 있었다.\n\n온도와 같은 변수를 은닉변수라고 한다.\n\n- 또 다른 흑막? 고려할 흑막이 온도뿐이라는 보장이 어디있지? 사실 흑막2, 흑막3이 있어서 그런 흑막들을 고려하다보니까 아이스크림과 소아마비사이의 상관관계가 다시 보이면 어떡하지?\n\n이러한 이유 때문에 상관계수로 인과성을 유추하는건 사실상 불가능.\n그런데 이론적으로는 “세상의 모든 은닉변수를 통제하였을 경우에도 corr(X,Y)의 값이 1에 가깝다면 그때는 인과성이 있다고 봐도 무방함, (물론 이 경우에도 무엇이 원인인지는 통계적으로 따지는것이 불가)” 이라고 주장할 수 있다. 즉 모든 흑막을 제거한다면 “상관성=인과성”이다.\n\n- 실험계획법, 인과추론: 세상의 모든 흑막을 제거하는건 상식적으로 불가능\n\n피셔의주장(실험계획법): 그런데 실험계획을 잘하면 흑막을 제거한 효과가 있음 (무작위로 사람뽑아서 담배를 피우게 한다든가)\n인과추론: 실험계획이 사실상 불가능한 경우가 있음 \\(\\to\\) 모인 데이터에서 최대한 흑막2,3,4,.. 등이 비슷한 그룹끼리 “매칭”을 시킨다!"
  },
  {
    "objectID": "posts/Day3/08_ggplot2/2023-02-01-Lesson17.html#그냥-궁금해서-진짜-만약에-아이스크림과-소아마비가-관련있는-경우라면",
    "href": "posts/Day3/08_ggplot2/2023-02-01-Lesson17.html#그냥-궁금해서-진짜-만약에-아이스크림과-소아마비가-관련있는-경우라면",
    "title": "Lesson 17: 아이스크림을 많이 먹으면 걸리는 병",
    "section": "그냥 궁금해서: 진짜 만약에 아이스크림과 소아마비가 관련있는 경우라면?",
    "text": "그냥 궁금해서: 진짜 만약에 아이스크림과 소아마비가 관련있는 경우라면?\n- 온도는 아이스크림 판매에 여전히 영향을 주지만\n\\[\\text{아이스크림 판매량} = 20 + 2 \\times \\text{온도} + \\epsilon\\]\n\nnp.random.seed(1)\neps=np.random.normal(size=len(temp), scale=10) \nicecream = 20 + 2 * temp + eps \n\n- 수영장이 원인이 아니라 진짜 아이스크림을 먹고 소아마비에 걸린상황이라면?\n\\[\\text{소아마비 반응수치} = 30 + 0 \\times \\text{온도} + 0.15 \\times \\text{아이스크림 판매량} + \\epsilon\\]\n\nnp.random.seed(2) \neps = np.random.normal(size=len(temp),scale=2)\ndisease= 30+ 0*temp + 0.15*icecream + eps\n\n\ndf2=pd.DataFrame({'temp':temp,'icecream':icecream,'disease':disease})\ndf2.assign(temp2=list(map(cut,df2.temp)))\n\n\n\n\n\n  \n    \n      \n      temp\n      icecream\n      disease\n      temp2\n    \n  \n  \n    \n      0\n      -0.5\n      35.243454\n      34.453002\n      Temp: <0\n    \n    \n      1\n      1.4\n      16.682436\n      32.389832\n      Temp: 0~5\n    \n    \n      2\n      2.6\n      19.918282\n      28.715350\n      Temp: 0~5\n    \n    \n      3\n      2.0\n      13.270314\n      35.271089\n      Temp: 0~5\n    \n    \n      4\n      2.5\n      33.654076\n      31.461240\n      Temp: 0~5\n    \n    \n      ...\n      ...\n      ...\n      ...\n      ...\n    \n    \n      651\n      19.9\n      68.839992\n      39.693811\n      Temp: 15~20\n    \n    \n      652\n      20.4\n      76.554679\n      38.924088\n      Temp: 20~25\n    \n    \n      653\n      18.3\n      68.666079\n      41.765212\n      Temp: 15~20\n    \n    \n      654\n      12.8\n      42.771364\n      36.842022\n      Temp: 10~15\n    \n    \n      655\n      6.7\n      30.736731\n      37.715537\n      Temp: 5~10\n    \n  \n\n656 rows × 4 columns\n\n\n\n\nggplot(data=df2.assign(temp2=list(map(cut,df2.temp))))+\\\ngeom_point(aes(x='icecream',y='disease',colour='temp2'),alpha=0.2)+\\\ngeom_smooth(aes(x='icecream',y='disease',colour='temp2'))\n\n/home/cgb4/anaconda3/envs/py37/lib/python3.7/site-packages/plotnine/stats/smoothers.py:311: PlotnineWarning: Confidence intervals are not yet implementedfor lowess smoothings.\n\n\n\n\n\n<ggplot: (8762005194073)>\n\n\n\n이번엔 partial corr도 유의미하게 나옴\n\n- 단순 corr을 봐서는 “온도->아이스크림,소아마비” 인지, “온도->아이스크림->소아마비” 인지 알기 어렵다.\n\ndf.corr()\n\n\n\n\n\n  \n    \n      \n      temp\n      icecream\n      disease\n    \n  \n  \n    \n      temp\n      1.000000\n      0.884366\n      0.975609\n    \n    \n      icecream\n      0.884366\n      1.000000\n      0.862990\n    \n    \n      disease\n      0.975609\n      0.862990\n      1.000000\n    \n  \n\n\n\n\n\ndf2.corr()\n\n\n\n\n\n  \n    \n      \n      temp\n      icecream\n      disease\n    \n  \n  \n    \n      temp\n      1.000000\n      0.884366\n      0.725505\n    \n    \n      icecream\n      0.884366\n      1.000000\n      0.830539\n    \n    \n      disease\n      0.725505\n      0.830539\n      1.000000"
  },
  {
    "objectID": "posts/Day3/08_ggplot2/2023-02-01-Lesson18.html#fifa23-data",
    "href": "posts/Day3/08_ggplot2/2023-02-01-Lesson18.html#fifa23-data",
    "title": "Lesson 18: FIFA23 자료분석",
    "section": "FIFA23 data",
    "text": "FIFA23 data\n- FIFA23라는 축구게임이 있음\n- 게임에 실제 선수들이 나오면서 선수들의 능력치가 세밀하게 구현되어 있음\n- 선수들 능력치에 대한 데이터셋은 캐글에 공개되어 있음 - https://www.kaggle.com/datasets/bryanb/fifa-player-stats-database?select=FIFA23_official_data.csv"
  },
  {
    "objectID": "posts/Day3/08_ggplot2/2023-02-01-Lesson18.html#데이터살펴보기",
    "href": "posts/Day3/08_ggplot2/2023-02-01-Lesson18.html#데이터살펴보기",
    "title": "Lesson 18: FIFA23 자료분석",
    "section": "데이터살펴보기",
    "text": "데이터살펴보기\n- 일단 살펴보기\n\ndf=pd.read_csv('https://raw.githubusercontent.com/guebin/DV2022/master/posts/FIFA23_official_data.csv')\ndf.head()\n\n\n\n\n\n  \n    \n      \n      ID\n      Name\n      Age\n      Photo\n      Nationality\n      Flag\n      Overall\n      Potential\n      Club\n      Club Logo\n      ...\n      Real Face\n      Position\n      Joined\n      Loaned From\n      Contract Valid Until\n      Height\n      Weight\n      Release Clause\n      Kit Number\n      Best Overall Rating\n    \n  \n  \n    \n      0\n      209658\n      L. Goretzka\n      27\n      https://cdn.sofifa.net/players/209/658/23_60.png\n      Germany\n      https://cdn.sofifa.net/flags/de.png\n      87\n      88\n      FC Bayern München\n      https://cdn.sofifa.net/teams/21/30.png\n      ...\n      Yes\n      <span class=\"pos pos28\">SUB\n      Jul 1, 2018\n      NaN\n      2026\n      189cm\n      82kg\n      €157M\n      8.0\n      NaN\n    \n    \n      1\n      212198\n      Bruno Fernandes\n      27\n      https://cdn.sofifa.net/players/212/198/23_60.png\n      Portugal\n      https://cdn.sofifa.net/flags/pt.png\n      86\n      87\n      Manchester United\n      https://cdn.sofifa.net/teams/11/30.png\n      ...\n      Yes\n      <span class=\"pos pos15\">LCM\n      Jan 30, 2020\n      NaN\n      2026\n      179cm\n      69kg\n      €155M\n      8.0\n      NaN\n    \n    \n      2\n      224334\n      M. Acuña\n      30\n      https://cdn.sofifa.net/players/224/334/23_60.png\n      Argentina\n      https://cdn.sofifa.net/flags/ar.png\n      85\n      85\n      Sevilla FC\n      https://cdn.sofifa.net/teams/481/30.png\n      ...\n      No\n      <span class=\"pos pos7\">LB\n      Sep 14, 2020\n      NaN\n      2024\n      172cm\n      69kg\n      €97.7M\n      19.0\n      NaN\n    \n    \n      3\n      192985\n      K. De Bruyne\n      31\n      https://cdn.sofifa.net/players/192/985/23_60.png\n      Belgium\n      https://cdn.sofifa.net/flags/be.png\n      91\n      91\n      Manchester City\n      https://cdn.sofifa.net/teams/10/30.png\n      ...\n      Yes\n      <span class=\"pos pos13\">RCM\n      Aug 30, 2015\n      NaN\n      2025\n      181cm\n      70kg\n      €198.9M\n      17.0\n      NaN\n    \n    \n      4\n      224232\n      N. Barella\n      25\n      https://cdn.sofifa.net/players/224/232/23_60.png\n      Italy\n      https://cdn.sofifa.net/flags/it.png\n      86\n      89\n      Inter\n      https://cdn.sofifa.net/teams/44/30.png\n      ...\n      Yes\n      <span class=\"pos pos13\">RCM\n      Sep 1, 2020\n      NaN\n      2026\n      172cm\n      68kg\n      €154.4M\n      23.0\n      NaN\n    \n  \n\n5 rows × 29 columns\n\n\n\n트랜스포즈하여 보는 것이 편할때도 있음\n\ndf.T\n\n\n\n\n\n  \n    \n      \n      0\n      1\n      2\n      3\n      4\n      5\n      6\n      7\n      8\n      9\n      ...\n      17650\n      17651\n      17652\n      17653\n      17654\n      17655\n      17656\n      17657\n      17658\n      17659\n    \n  \n  \n    \n      ID\n      209658\n      212198\n      224334\n      192985\n      224232\n      212622\n      197445\n      187961\n      208333\n      210514\n      ...\n      256879\n      269546\n      267647\n      253186\n      267461\n      269526\n      267946\n      270567\n      256624\n      256376\n    \n    \n      Name\n      L. Goretzka\n      Bruno Fernandes\n      M. Acuña\n      K. De Bruyne\n      N. Barella\n      J. Kimmich\n      D. Alaba\n      22 Paulinho\n      E. Can\n      João Cancelo\n      ...\n      22 G. Leijon\n      Wu Fei\n      22 E. Grosz\n      22 S. Booth\n      22 L. Grimpe\n      Deng Xiongtao\n      22 Lim Jun Sub\n      A. Demir\n      21 S. Czajor\n      21 F. Jakobsson\n    \n    \n      Age\n      27\n      27\n      30\n      31\n      25\n      27\n      30\n      32\n      28\n      28\n      ...\n      19\n      32\n      18\n      20\n      17\n      19\n      17\n      25\n      18\n      20\n    \n    \n      Photo\n      https://cdn.sofifa.net/players/209/658/23_60.png\n      https://cdn.sofifa.net/players/212/198/23_60.png\n      https://cdn.sofifa.net/players/224/334/23_60.png\n      https://cdn.sofifa.net/players/192/985/23_60.png\n      https://cdn.sofifa.net/players/224/232/23_60.png\n      https://cdn.sofifa.net/players/212/622/23_60.png\n      https://cdn.sofifa.net/players/197/445/23_60.png\n      https://cdn.sofifa.net/players/187/961/22_60.png\n      https://cdn.sofifa.net/players/208/333/23_60.png\n      https://cdn.sofifa.net/players/210/514/23_60.png\n      ...\n      https://cdn.sofifa.net/players/256/879/22_60.png\n      https://cdn.sofifa.net/players/269/546/23_60.png\n      https://cdn.sofifa.net/players/267/647/22_60.png\n      https://cdn.sofifa.net/players/253/186/22_60.png\n      https://cdn.sofifa.net/players/267/461/22_60.png\n      https://cdn.sofifa.net/players/269/526/23_60.png\n      https://cdn.sofifa.net/players/267/946/22_60.png\n      https://cdn.sofifa.net/players/270/567/23_60.png\n      https://cdn.sofifa.net/players/256/624/21_60.png\n      https://cdn.sofifa.net/players/256/376/21_60.png\n    \n    \n      Nationality\n      Germany\n      Portugal\n      Argentina\n      Belgium\n      Italy\n      Germany\n      Austria\n      Brazil\n      Germany\n      Portugal\n      ...\n      Sweden\n      China PR\n      Romania\n      England\n      Germany\n      China PR\n      Korea Republic\n      Turkey\n      Poland\n      Sweden\n    \n    \n      Flag\n      https://cdn.sofifa.net/flags/de.png\n      https://cdn.sofifa.net/flags/pt.png\n      https://cdn.sofifa.net/flags/ar.png\n      https://cdn.sofifa.net/flags/be.png\n      https://cdn.sofifa.net/flags/it.png\n      https://cdn.sofifa.net/flags/de.png\n      https://cdn.sofifa.net/flags/at.png\n      https://cdn.sofifa.net/flags/br.png\n      https://cdn.sofifa.net/flags/de.png\n      https://cdn.sofifa.net/flags/pt.png\n      ...\n      https://cdn.sofifa.net/flags/se.png\n      https://cdn.sofifa.net/flags/cn.png\n      https://cdn.sofifa.net/flags/ro.png\n      https://cdn.sofifa.net/flags/gb-eng.png\n      https://cdn.sofifa.net/flags/de.png\n      https://cdn.sofifa.net/flags/cn.png\n      https://cdn.sofifa.net/flags/kr.png\n      https://cdn.sofifa.net/flags/tr.png\n      https://cdn.sofifa.net/flags/pl.png\n      https://cdn.sofifa.net/flags/se.png\n    \n    \n      Overall\n      87\n      86\n      85\n      91\n      86\n      89\n      86\n      83\n      82\n      88\n      ...\n      52\n      51\n      52\n      51\n      54\n      48\n      48\n      51\n      50\n      50\n    \n    \n      Potential\n      88\n      87\n      85\n      91\n      89\n      90\n      86\n      83\n      82\n      88\n      ...\n      62\n      51\n      70\n      60\n      68\n      61\n      64\n      56\n      65\n      61\n    \n    \n      Club\n      FC Bayern München\n      Manchester United\n      Sevilla FC\n      Manchester City\n      Inter\n      FC Bayern München\n      Real Madrid CF\n      Al Ahli\n      Borussia Dortmund\n      Manchester City\n      ...\n      Örebro SK\n      Wuhan Three Towns\n      Gaz Metan Mediaş\n      Crewe Alexandra\n      RB Leipzig\n      Meizhou Hakka\n      Jeju United FC\n      Ümraniyespor\n      Fleetwood Town\n      IFK Norrköping\n    \n    \n      Club Logo\n      https://cdn.sofifa.net/teams/21/30.png\n      https://cdn.sofifa.net/teams/11/30.png\n      https://cdn.sofifa.net/teams/481/30.png\n      https://cdn.sofifa.net/teams/10/30.png\n      https://cdn.sofifa.net/teams/44/30.png\n      https://cdn.sofifa.net/teams/21/30.png\n      https://cdn.sofifa.net/teams/243/30.png\n      https://cdn.sofifa.net/teams/112387/30.png\n      https://cdn.sofifa.net/teams/22/30.png\n      https://cdn.sofifa.net/teams/10/30.png\n      ...\n      https://cdn.sofifa.net/teams/705/30.png\n      https://cdn.sofifa.net/teams/116361/30.png\n      https://cdn.sofifa.net/teams/112637/30.png\n      https://cdn.sofifa.net/teams/121/30.png\n      https://cdn.sofifa.net/teams/112172/30.png\n      https://cdn.sofifa.net/teams/114628/30.png\n      https://cdn.sofifa.net/teams/1478/30.png\n      https://cdn.sofifa.net/teams/113796/30.png\n      https://cdn.sofifa.net/teams/112260/30.png\n      https://cdn.sofifa.net/teams/702/30.png\n    \n    \n      Value\n      €91M\n      €78.5M\n      €46.5M\n      €107.5M\n      €89.5M\n      €105.5M\n      €55.5M\n      €28.5M\n      €30.5M\n      €82.5M\n      ...\n      €150K\n      €30K\n      €180K\n      €110K\n      €210K\n      €100K\n      €100K\n      €70K\n      €90K\n      €90K\n    \n    \n      Wage\n      €115K\n      €190K\n      €46K\n      €350K\n      €110K\n      €130K\n      €220K\n      €61K\n      €63K\n      €250K\n      ...\n      €500\n      €2K\n      €500\n      €850\n      €500\n      €500\n      €500\n      €2K\n      €500\n      €500\n    \n    \n      Special\n      2312\n      2305\n      2303\n      2303\n      2296\n      2283\n      2277\n      2273\n      2271\n      2262\n      ...\n      779\n      777\n      775\n      768\n      767\n      762\n      761\n      759\n      758\n      749\n    \n    \n      Preferred Foot\n      Right\n      Right\n      Left\n      Right\n      Right\n      Right\n      Left\n      Right\n      Right\n      Right\n      ...\n      Right\n      Right\n      Right\n      Right\n      Right\n      Right\n      Right\n      Right\n      Right\n      Left\n    \n    \n      International Reputation\n      4.0\n      3.0\n      2.0\n      4.0\n      3.0\n      4.0\n      4.0\n      3.0\n      3.0\n      3.0\n      ...\n      1.0\n      1.0\n      1.0\n      1.0\n      1.0\n      1.0\n      1.0\n      1.0\n      1.0\n      1.0\n    \n    \n      Weak Foot\n      4.0\n      3.0\n      3.0\n      5.0\n      3.0\n      4.0\n      4.0\n      4.0\n      4.0\n      4.0\n      ...\n      3.0\n      2.0\n      2.0\n      2.0\n      3.0\n      3.0\n      2.0\n      2.0\n      2.0\n      2.0\n    \n    \n      Skill Moves\n      3.0\n      4.0\n      3.0\n      4.0\n      3.0\n      3.0\n      3.0\n      4.0\n      3.0\n      4.0\n      ...\n      1.0\n      1.0\n      1.0\n      1.0\n      1.0\n      1.0\n      1.0\n      1.0\n      1.0\n      1.0\n    \n    \n      Work Rate\n      High/ Medium\n      High/ High\n      High/ High\n      High/ High\n      High/ High\n      High/ Medium\n      Medium/ Medium\n      High/ High\n      Medium/ High\n      High/ Medium\n      ...\n      Medium/ Medium\n      Medium/ Medium\n      Medium/ Medium\n      Medium/ Medium\n      Medium/ Medium\n      Medium/ Medium\n      Medium/ Medium\n      Medium/ Medium\n      Medium/ Medium\n      Medium/ Medium\n    \n    \n      Body Type\n      Unique\n      Unique\n      Stocky (170-185)\n      Unique\n      Normal (170-)\n      Normal (170-185)\n      Normal (170-185)\n      Normal (170-185)\n      Stocky (185+)\n      Unique\n      ...\n      Normal (185+)\n      Normal (185+)\n      Lean (185+)\n      Lean (185+)\n      Lean (185+)\n      Normal (185+)\n      Lean (185+)\n      Lean (185+)\n      Normal (185+)\n      Normal (185+)\n    \n    \n      Real Face\n      Yes\n      Yes\n      No\n      Yes\n      Yes\n      Yes\n      Yes\n      Yes\n      Yes\n      Yes\n      ...\n      No\n      No\n      No\n      No\n      No\n      No\n      No\n      No\n      No\n      No\n    \n    \n      Position\n      <span class=\"pos pos28\">SUB\n      <span class=\"pos pos15\">LCM\n      <span class=\"pos pos7\">LB\n      <span class=\"pos pos13\">RCM\n      <span class=\"pos pos13\">RCM\n      <span class=\"pos pos9\">RDM\n      <span class=\"pos pos6\">LCB\n      <span class=\"pos pos15\">LCM\n      <span class=\"pos pos28\">SUB\n      <span class=\"pos pos7\">LB\n      ...\n      <span class=\"pos pos28\">SUB\n      <span class=\"pos pos28\">SUB\n      <span class=\"pos pos28\">SUB\n      <span class=\"pos pos29\">RES\n      <span class=\"pos pos29\">RES\n      <span class=\"pos pos29\">RES\n      <span class=\"pos pos29\">RES\n      <span class=\"pos pos29\">RES\n      <span class=\"pos pos29\">RES\n      <span class=\"pos pos29\">RES\n    \n    \n      Joined\n      Jul 1, 2018\n      Jan 30, 2020\n      Sep 14, 2020\n      Aug 30, 2015\n      Sep 1, 2020\n      Jul 1, 2015\n      Jul 1, 2021\n      Jul 22, 2021\n      Feb 18, 2020\n      Aug 7, 2019\n      ...\n      Jun 14, 2020\n      Feb 15, 2019\n      Jul 1, 2020\n      Jul 1, 2019\n      Feb 7, 2022\n      Apr 11, 2022\n      Jan 1, 2022\n      Jun 6, 2021\n      Jan 1, 2020\n      Jan 8, 2020\n    \n    \n      Loaned From\n      NaN\n      NaN\n      NaN\n      NaN\n      NaN\n      NaN\n      NaN\n      NaN\n      NaN\n      NaN\n      ...\n      NaN\n      NaN\n      NaN\n      NaN\n      NaN\n      NaN\n      NaN\n      NaN\n      NaN\n      NaN\n    \n    \n      Contract Valid Until\n      2026\n      2026\n      2024\n      2025\n      2026\n      2025\n      2026\n      2024\n      2024\n      2027\n      ...\n      2022\n      2022\n      2022\n      2022\n      2023\n      2027\n      2026\n      2023\n      2021\n      2021\n    \n    \n      Height\n      189cm\n      179cm\n      172cm\n      181cm\n      172cm\n      177cm\n      180cm\n      183cm\n      186cm\n      182cm\n      ...\n      188cm\n      186cm\n      190cm\n      195cm\n      186cm\n      190cm\n      195cm\n      190cm\n      187cm\n      186cm\n    \n    \n      Weight\n      82kg\n      69kg\n      69kg\n      70kg\n      68kg\n      75kg\n      78kg\n      80kg\n      86kg\n      74kg\n      ...\n      81kg\n      78kg\n      70kg\n      80kg\n      78kg\n      78kg\n      84kg\n      82kg\n      79kg\n      78kg\n    \n    \n      Release Clause\n      €157M\n      €155M\n      €97.7M\n      €198.9M\n      €154.4M\n      €182M\n      €113.8M\n      €48.5M\n      €51.9M\n      €152.6M\n      ...\n      €218K\n      €47K\n      €356K\n      €215K\n      €488K\n      €218K\n      €188K\n      €142K\n      €214K\n      €131K\n    \n    \n      Kit Number\n      8.0\n      8.0\n      19.0\n      17.0\n      23.0\n      6.0\n      4.0\n      15.0\n      23.0\n      7.0\n      ...\n      33.0\n      1.0\n      99.0\n      27.0\n      43.0\n      35.0\n      21.0\n      12.0\n      40.0\n      30.0\n    \n    \n      Best Overall Rating\n      NaN\n      NaN\n      NaN\n      NaN\n      NaN\n      NaN\n      NaN\n      NaN\n      NaN\n      NaN\n      ...\n      NaN\n      NaN\n      NaN\n      NaN\n      NaN\n      NaN\n      NaN\n      NaN\n      NaN\n      NaN\n    \n  \n\n29 rows × 17660 columns\n\n\n\n- column이름조사\n\ndf.keys()\n\nIndex(['ID', 'Name', 'Age', 'Photo', 'Nationality', 'Flag', 'Overall',\n       'Potential', 'Club', 'Club Logo', 'Value', 'Wage', 'Special',\n       'Preferred Foot', 'International Reputation', 'Weak Foot',\n       'Skill Moves', 'Work Rate', 'Body Type', 'Real Face', 'Position',\n       'Joined', 'Loaned From', 'Contract Valid Until', 'Height', 'Weight',\n       'Release Clause', 'Kit Number', 'Best Overall Rating'],\n      dtype='object')\n\n\n\n이름에 space가 있어서 좀 거슬림\n\n- 각 column 별로 자료형조사\n\npd.DataFrame({'colname':df.keys(), 'dtype':[df[key].dtype for key in df.keys()]})\n\n\n\n\n\n  \n    \n      \n      colname\n      dtype\n    \n  \n  \n    \n      0\n      ID\n      int64\n    \n    \n      1\n      Name\n      object\n    \n    \n      2\n      Age\n      int64\n    \n    \n      3\n      Photo\n      object\n    \n    \n      4\n      Nationality\n      object\n    \n    \n      5\n      Flag\n      object\n    \n    \n      6\n      Overall\n      int64\n    \n    \n      7\n      Potential\n      int64\n    \n    \n      8\n      Club\n      object\n    \n    \n      9\n      Club Logo\n      object\n    \n    \n      10\n      Value\n      object\n    \n    \n      11\n      Wage\n      object\n    \n    \n      12\n      Special\n      int64\n    \n    \n      13\n      Preferred Foot\n      object\n    \n    \n      14\n      International Reputation\n      float64\n    \n    \n      15\n      Weak Foot\n      float64\n    \n    \n      16\n      Skill Moves\n      float64\n    \n    \n      17\n      Work Rate\n      object\n    \n    \n      18\n      Body Type\n      object\n    \n    \n      19\n      Real Face\n      object\n    \n    \n      20\n      Position\n      object\n    \n    \n      21\n      Joined\n      object\n    \n    \n      22\n      Loaned From\n      object\n    \n    \n      23\n      Contract Valid Until\n      object\n    \n    \n      24\n      Height\n      object\n    \n    \n      25\n      Weight\n      object\n    \n    \n      26\n      Release Clause\n      object\n    \n    \n      27\n      Kit Number\n      float64\n    \n    \n      28\n      Best Overall Rating\n      object\n    \n  \n\n\n\n\n- 결측치조사\n\npd.DataFrame({'colname':df.keys(), \n              'dtype':[df[key].dtype for key in df.keys()],\n              'na':[df[key].isna().sum() for key in df.keys()]\n             })\n\n\n\n\n\n  \n    \n      \n      colname\n      dtype\n      na\n    \n  \n  \n    \n      0\n      ID\n      int64\n      0\n    \n    \n      1\n      Name\n      object\n      0\n    \n    \n      2\n      Age\n      int64\n      0\n    \n    \n      3\n      Photo\n      object\n      0\n    \n    \n      4\n      Nationality\n      object\n      0\n    \n    \n      5\n      Flag\n      object\n      0\n    \n    \n      6\n      Overall\n      int64\n      0\n    \n    \n      7\n      Potential\n      int64\n      0\n    \n    \n      8\n      Club\n      object\n      211\n    \n    \n      9\n      Club Logo\n      object\n      0\n    \n    \n      10\n      Value\n      object\n      0\n    \n    \n      11\n      Wage\n      object\n      0\n    \n    \n      12\n      Special\n      int64\n      0\n    \n    \n      13\n      Preferred Foot\n      object\n      0\n    \n    \n      14\n      International Reputation\n      float64\n      0\n    \n    \n      15\n      Weak Foot\n      float64\n      0\n    \n    \n      16\n      Skill Moves\n      float64\n      0\n    \n    \n      17\n      Work Rate\n      object\n      0\n    \n    \n      18\n      Body Type\n      object\n      38\n    \n    \n      19\n      Real Face\n      object\n      38\n    \n    \n      20\n      Position\n      object\n      35\n    \n    \n      21\n      Joined\n      object\n      1098\n    \n    \n      22\n      Loaned From\n      object\n      16966\n    \n    \n      23\n      Contract Valid Until\n      object\n      361\n    \n    \n      24\n      Height\n      object\n      0\n    \n    \n      25\n      Weight\n      object\n      0\n    \n    \n      26\n      Release Clause\n      object\n      1151\n    \n    \n      27\n      Kit Number\n      float64\n      35\n    \n    \n      28\n      Best Overall Rating\n      object\n      17639\n    \n  \n\n\n\n\n(퀴즈) 열의선택: 결측치가 10000개 이상인 열을 보고싶다면?\n\ndf.loc[:,[df[key].isna().sum()>10000 for key in df.keys()]]\n\n\n\n\n\n  \n    \n      \n      Loaned From\n      Best Overall Rating\n    \n  \n  \n    \n      0\n      NaN\n      NaN\n    \n    \n      1\n      NaN\n      NaN\n    \n    \n      2\n      NaN\n      NaN\n    \n    \n      3\n      NaN\n      NaN\n    \n    \n      4\n      NaN\n      NaN\n    \n    \n      ...\n      ...\n      ...\n    \n    \n      17655\n      NaN\n      NaN\n    \n    \n      17656\n      NaN\n      NaN\n    \n    \n      17657\n      NaN\n      NaN\n    \n    \n      17658\n      NaN\n      NaN\n    \n    \n      17659\n      NaN\n      NaN\n    \n  \n\n17660 rows × 2 columns\n\n\n\n- .info()\n\ndf.info()\n\n<class 'pandas.core.frame.DataFrame'>\nRangeIndex: 17660 entries, 0 to 17659\nData columns (total 29 columns):\n #   Column                    Non-Null Count  Dtype  \n---  ------                    --------------  -----  \n 0   ID                        17660 non-null  int64  \n 1   Name                      17660 non-null  object \n 2   Age                       17660 non-null  int64  \n 3   Photo                     17660 non-null  object \n 4   Nationality               17660 non-null  object \n 5   Flag                      17660 non-null  object \n 6   Overall                   17660 non-null  int64  \n 7   Potential                 17660 non-null  int64  \n 8   Club                      17449 non-null  object \n 9   Club Logo                 17660 non-null  object \n 10  Value                     17660 non-null  object \n 11  Wage                      17660 non-null  object \n 12  Special                   17660 non-null  int64  \n 13  Preferred Foot            17660 non-null  object \n 14  International Reputation  17660 non-null  float64\n 15  Weak Foot                 17660 non-null  float64\n 16  Skill Moves               17660 non-null  float64\n 17  Work Rate                 17660 non-null  object \n 18  Body Type                 17622 non-null  object \n 19  Real Face                 17622 non-null  object \n 20  Position                  17625 non-null  object \n 21  Joined                    16562 non-null  object \n 22  Loaned From               694 non-null    object \n 23  Contract Valid Until      17299 non-null  object \n 24  Height                    17660 non-null  object \n 25  Weight                    17660 non-null  object \n 26  Release Clause            16509 non-null  object \n 27  Kit Number                17625 non-null  float64\n 28  Best Overall Rating       21 non-null     object \ndtypes: float64(4), int64(5), object(20)\nmemory usage: 3.9+ MB\n\n\n- .describe(): 숫자들이 저장된 column에 대하여 기본통계량 조사\n\ndf.describe()\n\n\n\n\n\n  \n    \n      \n      ID\n      Age\n      Overall\n      Potential\n      Special\n      International Reputation\n      Weak Foot\n      Skill Moves\n      Kit Number\n    \n  \n  \n    \n      count\n      17660.000000\n      17660.000000\n      17660.000000\n      17660.000000\n      17660.000000\n      17660.000000\n      17660.000000\n      17660.000000\n      17625.000000\n    \n    \n      mean\n      246319.424462\n      23.127746\n      63.369592\n      70.981200\n      1537.915855\n      1.106285\n      2.900340\n      2.297169\n      25.037957\n    \n    \n      std\n      31487.892861\n      4.639821\n      8.036268\n      6.529836\n      285.893809\n      0.407021\n      0.663523\n      0.754264\n      19.154116\n    \n    \n      min\n      16.000000\n      15.000000\n      43.000000\n      42.000000\n      749.000000\n      1.000000\n      1.000000\n      1.000000\n      1.000000\n    \n    \n      25%\n      240732.500000\n      20.000000\n      58.000000\n      67.000000\n      1387.000000\n      1.000000\n      3.000000\n      2.000000\n      11.000000\n    \n    \n      50%\n      257041.000000\n      22.000000\n      63.000000\n      71.000000\n      1548.000000\n      1.000000\n      3.000000\n      2.000000\n      22.000000\n    \n    \n      75%\n      263027.500000\n      26.000000\n      69.000000\n      75.000000\n      1727.000000\n      1.000000\n      3.000000\n      3.000000\n      32.000000\n    \n    \n      max\n      271340.000000\n      54.000000\n      91.000000\n      95.000000\n      2312.000000\n      5.000000\n      5.000000\n      5.000000\n      99.000000\n    \n  \n\n\n\n\n- pandas_profiling.ProfileReport()을 이용한 전체적인 조사\n\n# pandas_profiling.ProfileReport(df).to_file('fifa2023_reprot.html')\n\n- 특정열을 중심으로 정렬하여 보기\n\ndf.sort_values(by='Overall',ascending=False).reset_index()\n\n\n\n\n\n  \n    \n      \n      index\n      ID\n      Name\n      Age\n      Photo\n      Nationality\n      Flag\n      Overall\n      Potential\n      Club\n      ...\n      Real Face\n      Position\n      Joined\n      Loaned From\n      Contract Valid Until\n      Height\n      Weight\n      Release Clause\n      Kit Number\n      Best Overall Rating\n    \n  \n  \n    \n      0\n      41\n      188545\n      R. Lewandowski\n      33\n      https://cdn.sofifa.net/players/188/545/23_60.png\n      Poland\n      https://cdn.sofifa.net/flags/pl.png\n      91\n      91\n      FC Barcelona\n      ...\n      Yes\n      <span class=\"pos pos25\">ST\n      Jul 18, 2022\n      NaN\n      2025\n      185cm\n      81kg\n      €172.2M\n      9.0\n      NaN\n    \n    \n      1\n      124\n      165153\n      K. Benzema\n      34\n      https://cdn.sofifa.net/players/165/153/23_60.png\n      France\n      https://cdn.sofifa.net/flags/fr.png\n      91\n      91\n      Real Madrid CF\n      ...\n      Yes\n      <span class=\"pos pos21\">CF\n      Jul 9, 2009\n      NaN\n      2023\n      185cm\n      81kg\n      €131.2M\n      9.0\n      NaN\n    \n    \n      2\n      3\n      192985\n      K. De Bruyne\n      31\n      https://cdn.sofifa.net/players/192/985/23_60.png\n      Belgium\n      https://cdn.sofifa.net/flags/be.png\n      91\n      91\n      Manchester City\n      ...\n      Yes\n      <span class=\"pos pos13\">RCM\n      Aug 30, 2015\n      NaN\n      2025\n      181cm\n      70kg\n      €198.9M\n      17.0\n      NaN\n    \n    \n      3\n      56\n      158023\n      L. Messi\n      35\n      https://cdn.sofifa.net/players/158/023/23_60.png\n      Argentina\n      https://cdn.sofifa.net/flags/ar.png\n      91\n      91\n      Paris Saint-Germain\n      ...\n      Yes\n      <span class=\"pos pos23\">RW\n      Aug 10, 2021\n      NaN\n      2023\n      169cm\n      67kg\n      €99.9M\n      30.0\n      NaN\n    \n    \n      4\n      75\n      231747\n      K. Mbappé\n      23\n      https://cdn.sofifa.net/players/231/747/23_60.png\n      France\n      https://cdn.sofifa.net/flags/fr.png\n      91\n      95\n      Paris Saint-Germain\n      ...\n      Yes\n      <span class=\"pos pos25\">ST\n      Jul 1, 2018\n      NaN\n      2025\n      182cm\n      73kg\n      €366.7M\n      7.0\n      NaN\n    \n    \n      ...\n      ...\n      ...\n      ...\n      ...\n      ...\n      ...\n      ...\n      ...\n      ...\n      ...\n      ...\n      ...\n      ...\n      ...\n      ...\n      ...\n      ...\n      ...\n      ...\n      ...\n      ...\n    \n    \n      17655\n      15513\n      266751\n      22 Jung Ho Yeon\n      20\n      https://cdn.sofifa.net/players/266/751/22_60.png\n      Korea Republic\n      https://cdn.sofifa.net/flags/kr.png\n      45\n      53\n      GwangJu FC\n      ...\n      No\n      <span class=\"pos pos29\">RES\n      Jan 20, 2022\n      NaN\n      2026\n      180cm\n      73kg\n      €145K\n      23.0\n      NaN\n    \n    \n      17656\n      16215\n      268279\n      22 J. Looschen\n      24\n      https://cdn.sofifa.net/players/268/279/22_60.png\n      Germany\n      https://cdn.sofifa.net/flags/de.png\n      44\n      47\n      SV Meppen\n      ...\n      No\n      <span class=\"pos pos29\">RES\n      Mar 19, 2022\n      NaN\n      2026\n      178cm\n      78kg\n      €92K\n      42.0\n      NaN\n    \n    \n      17657\n      16042\n      255283\n      20 Kim Yeong Geun\n      22\n      https://cdn.sofifa.net/players/255/283/20_60.png\n      Korea Republic\n      https://cdn.sofifa.net/flags/kr.png\n      44\n      49\n      Gyeongnam FC\n      ...\n      No\n      <span class=\"pos pos29\">RES\n      Jan 9, 2020\n      NaN\n      2020\n      174cm\n      71kg\n      €53K\n      43.0\n      NaN\n    \n    \n      17658\n      14634\n      269038\n      22 Zhang Wenxuan\n      16\n      https://cdn.sofifa.net/players/269/038/22_60.png\n      China PR\n      https://cdn.sofifa.net/flags/cn.png\n      44\n      59\n      Guangzhou FC\n      ...\n      No\n      <span class=\"pos pos29\">RES\n      May 1, 2022\n      NaN\n      2022\n      175cm\n      70kg\n      €239K\n      29.0\n      NaN\n    \n    \n      17659\n      17618\n      168933\n      07 I. Paskov\n      33\n      https://cdn.sofifa.net/players/168/933/07_60.png\n      Bulgaria\n      https://cdn.sofifa.net/flags/bg.png\n      43\n      42\n      NaN\n      ...\n      NaN\n      <span class=\"pos pos28\">SUB\n      NaN\n      NaN\n      NaN\n      184cm\n      79kg\n      NaN\n      24.0\n      NaN\n    \n  \n\n17660 rows × 30 columns\n\n\n\n- 특정열을 중심으로 그룹화하여 보기 (\\(\\star\\))\n\ndf.Nationality.unique() # 데이터셋에 포함된 나라들 출력\n\narray(['Germany', 'Portugal', 'Argentina', 'Belgium', 'Italy', 'Austria',\n       'Brazil', 'Croatia', 'Serbia', 'Spain', 'Netherlands', 'France',\n       'Colombia', 'England', 'Uruguay', 'Morocco', 'Egypt', 'Algeria',\n       'Ukraine', 'United States', \"Côte d'Ivoire\", 'Poland', 'Chile',\n       'Senegal', 'Central African Republic', 'Denmark', 'Nigeria',\n       'Mexico', 'Turkey', 'Canada', 'Wales', 'Scotland', 'Romania',\n       'Czech Republic', 'Ghana', 'Korea Republic',\n       'Bosnia and Herzegovina', 'Mali', 'Slovakia', 'Armenia', 'Norway',\n       'Switzerland', 'Cameroon', 'Peru', 'Jamaica', 'Zambia', 'Guinea',\n       'Sweden', 'North Macedonia', 'Russia', 'Tunisia', 'Malta',\n       'Angola', 'Republic of Ireland', 'Ecuador', 'Benin', 'Paraguay',\n       'Montenegro', 'Australia', 'Comoros', 'Gabon', 'Iceland',\n       'Slovenia', 'Japan', 'Israel', 'China PR', 'Venezuela', 'Liberia',\n       'Greece', 'Bulgaria', 'Honduras', 'Saudi Arabia', 'Curacao',\n       'Northern Ireland', 'Guinea Bissau', 'Kosovo', 'Hungary',\n       'Finland', 'Costa Rica', 'Albania', 'Congo DR', 'Iran',\n       'Mozambique', 'Suriname', 'Cape Verde Islands', 'Bolivia',\n       'Madagascar', 'New Zealand', 'Burkina Faso', 'Dominican Republic',\n       'Kazakhstan', 'Syria', 'Luxembourg', 'Kenya', 'Zimbabwe', 'Haiti',\n       'Uzbekistan', 'South Africa', 'Cyprus', 'Qatar',\n       'Equatorial Guinea', 'Libya', 'Thailand', 'Togo',\n       'Trinidad and Tobago', 'Liechtenstein', 'Gambia', 'Georgia',\n       'Philippines', 'Burundi', 'United Arab Emirates', 'Grenada',\n       'Iraq', 'Panama', 'Malaysia', 'Moldova', 'Congo', 'India',\n       'Jordan', 'Kuwait', 'Antigua and Barbuda', 'Cuba', 'Vietnam',\n       'Korea DPR', 'Uganda', 'Lithuania', 'Estonia', 'Montserrat',\n       'Sierra Leone', 'Afghanistan', 'New Caledonia', 'Belarus', 'Laos',\n       'Saint Lucia', 'Bhutan', 'Guyana', 'Mauritania', 'Faroe Islands',\n       'Namibia', 'Niger', 'Palestine', 'Sudan', 'Azerbaijan',\n       'Hong Kong', 'Gibraltar', 'Tanzania', 'Latvia', 'Chinese Taipei',\n       'Singapore', 'Lebanon', 'El Salvador', 'Indonesia', 'Guatemala',\n       'Papua New Guinea', 'Puerto Rico', 'Malawi', 'South Sudan',\n       'Ethiopia', 'San Marino', 'Andorra', 'Saint Kitts and Nevis'],\n      dtype=object)\n\n\n\ndf.groupby(by='Nationality')[['Overall']].agg({np.mean,len}).sort_values(('Overall', 'mean'),ascending=False)\n\n\n\n\n\n  \n    \n      \n      Overall\n    \n    \n      \n      mean\n      len\n    \n    \n      Nationality\n      \n      \n    \n  \n  \n    \n      Philippines\n      74.000000\n      1\n    \n    \n      Namibia\n      72.000000\n      1\n    \n    \n      Mozambique\n      72.000000\n      2\n    \n    \n      Kuwait\n      71.000000\n      1\n    \n    \n      Brazil\n      70.556586\n      539\n    \n    \n      ...\n      ...\n      ...\n    \n    \n      San Marino\n      53.000000\n      1\n    \n    \n      China PR\n      52.230769\n      325\n    \n    \n      South Sudan\n      52.000000\n      5\n    \n    \n      India\n      51.994681\n      188\n    \n    \n      Saint Kitts and Nevis\n      51.000000\n      1\n    \n  \n\n161 rows × 2 columns\n\n\n\n\ngroupby는 나중에 다시 설명 합니다."
  },
  {
    "objectID": "posts/Day3/08_ggplot2/2023-02-01-Lesson18.html#데이터정리하기",
    "href": "posts/Day3/08_ggplot2/2023-02-01-Lesson18.html#데이터정리하기",
    "title": "Lesson 18: FIFA23 자료분석",
    "section": "데이터정리하기",
    "text": "데이터정리하기\n- 칼럼이름변경\n\ndf.set_axis(pd.Index(map(lambda x: x.replace(' ','_'), df.columns)), axis=1)\n\n\n\n\n\n  \n    \n      \n      ID\n      Name\n      Age\n      Photo\n      Nationality\n      Flag\n      Overall\n      Potential\n      Club\n      Club_Logo\n      ...\n      Real_Face\n      Position\n      Joined\n      Loaned_From\n      Contract_Valid_Until\n      Height\n      Weight\n      Release_Clause\n      Kit_Number\n      Best_Overall_Rating\n    \n  \n  \n    \n      0\n      209658\n      L. Goretzka\n      27\n      https://cdn.sofifa.net/players/209/658/23_60.png\n      Germany\n      https://cdn.sofifa.net/flags/de.png\n      87\n      88\n      FC Bayern München\n      https://cdn.sofifa.net/teams/21/30.png\n      ...\n      Yes\n      <span class=\"pos pos28\">SUB\n      Jul 1, 2018\n      NaN\n      2026\n      189cm\n      82kg\n      €157M\n      8.0\n      NaN\n    \n    \n      1\n      212198\n      Bruno Fernandes\n      27\n      https://cdn.sofifa.net/players/212/198/23_60.png\n      Portugal\n      https://cdn.sofifa.net/flags/pt.png\n      86\n      87\n      Manchester United\n      https://cdn.sofifa.net/teams/11/30.png\n      ...\n      Yes\n      <span class=\"pos pos15\">LCM\n      Jan 30, 2020\n      NaN\n      2026\n      179cm\n      69kg\n      €155M\n      8.0\n      NaN\n    \n    \n      2\n      224334\n      M. Acuña\n      30\n      https://cdn.sofifa.net/players/224/334/23_60.png\n      Argentina\n      https://cdn.sofifa.net/flags/ar.png\n      85\n      85\n      Sevilla FC\n      https://cdn.sofifa.net/teams/481/30.png\n      ...\n      No\n      <span class=\"pos pos7\">LB\n      Sep 14, 2020\n      NaN\n      2024\n      172cm\n      69kg\n      €97.7M\n      19.0\n      NaN\n    \n    \n      3\n      192985\n      K. De Bruyne\n      31\n      https://cdn.sofifa.net/players/192/985/23_60.png\n      Belgium\n      https://cdn.sofifa.net/flags/be.png\n      91\n      91\n      Manchester City\n      https://cdn.sofifa.net/teams/10/30.png\n      ...\n      Yes\n      <span class=\"pos pos13\">RCM\n      Aug 30, 2015\n      NaN\n      2025\n      181cm\n      70kg\n      €198.9M\n      17.0\n      NaN\n    \n    \n      4\n      224232\n      N. Barella\n      25\n      https://cdn.sofifa.net/players/224/232/23_60.png\n      Italy\n      https://cdn.sofifa.net/flags/it.png\n      86\n      89\n      Inter\n      https://cdn.sofifa.net/teams/44/30.png\n      ...\n      Yes\n      <span class=\"pos pos13\">RCM\n      Sep 1, 2020\n      NaN\n      2026\n      172cm\n      68kg\n      €154.4M\n      23.0\n      NaN\n    \n    \n      ...\n      ...\n      ...\n      ...\n      ...\n      ...\n      ...\n      ...\n      ...\n      ...\n      ...\n      ...\n      ...\n      ...\n      ...\n      ...\n      ...\n      ...\n      ...\n      ...\n      ...\n      ...\n    \n    \n      17655\n      269526\n      Deng Xiongtao\n      19\n      https://cdn.sofifa.net/players/269/526/23_60.png\n      China PR\n      https://cdn.sofifa.net/flags/cn.png\n      48\n      61\n      Meizhou Hakka\n      https://cdn.sofifa.net/teams/114628/30.png\n      ...\n      No\n      <span class=\"pos pos29\">RES\n      Apr 11, 2022\n      NaN\n      2027\n      190cm\n      78kg\n      €218K\n      35.0\n      NaN\n    \n    \n      17656\n      267946\n      22 Lim Jun Sub\n      17\n      https://cdn.sofifa.net/players/267/946/22_60.png\n      Korea Republic\n      https://cdn.sofifa.net/flags/kr.png\n      48\n      64\n      Jeju United FC\n      https://cdn.sofifa.net/teams/1478/30.png\n      ...\n      No\n      <span class=\"pos pos29\">RES\n      Jan 1, 2022\n      NaN\n      2026\n      195cm\n      84kg\n      €188K\n      21.0\n      NaN\n    \n    \n      17657\n      270567\n      A. Demir\n      25\n      https://cdn.sofifa.net/players/270/567/23_60.png\n      Turkey\n      https://cdn.sofifa.net/flags/tr.png\n      51\n      56\n      Ümraniyespor\n      https://cdn.sofifa.net/teams/113796/30.png\n      ...\n      No\n      <span class=\"pos pos29\">RES\n      Jun 6, 2021\n      NaN\n      2023\n      190cm\n      82kg\n      €142K\n      12.0\n      NaN\n    \n    \n      17658\n      256624\n      21 S. Czajor\n      18\n      https://cdn.sofifa.net/players/256/624/21_60.png\n      Poland\n      https://cdn.sofifa.net/flags/pl.png\n      50\n      65\n      Fleetwood Town\n      https://cdn.sofifa.net/teams/112260/30.png\n      ...\n      No\n      <span class=\"pos pos29\">RES\n      Jan 1, 2020\n      NaN\n      2021\n      187cm\n      79kg\n      €214K\n      40.0\n      NaN\n    \n    \n      17659\n      256376\n      21 F. Jakobsson\n      20\n      https://cdn.sofifa.net/players/256/376/21_60.png\n      Sweden\n      https://cdn.sofifa.net/flags/se.png\n      50\n      61\n      IFK Norrköping\n      https://cdn.sofifa.net/teams/702/30.png\n      ...\n      No\n      <span class=\"pos pos29\">RES\n      Jan 8, 2020\n      NaN\n      2021\n      186cm\n      78kg\n      €131K\n      30.0\n      NaN\n    \n  \n\n17660 rows × 29 columns\n\n\n\n- 결측치제거\n\ndf.drop(columns=['Loaned From', 'Best Overall Rating']).dropna()\n\n\n\n\n\n  \n    \n      \n      ID\n      Name\n      Age\n      Photo\n      Nationality\n      Flag\n      Overall\n      Potential\n      Club\n      Club Logo\n      ...\n      Work Rate\n      Body Type\n      Real Face\n      Position\n      Joined\n      Contract Valid Until\n      Height\n      Weight\n      Release Clause\n      Kit Number\n    \n  \n  \n    \n      0\n      209658\n      L. Goretzka\n      27\n      https://cdn.sofifa.net/players/209/658/23_60.png\n      Germany\n      https://cdn.sofifa.net/flags/de.png\n      87\n      88\n      FC Bayern München\n      https://cdn.sofifa.net/teams/21/30.png\n      ...\n      High/ Medium\n      Unique\n      Yes\n      <span class=\"pos pos28\">SUB\n      Jul 1, 2018\n      2026\n      189cm\n      82kg\n      €157M\n      8.0\n    \n    \n      1\n      212198\n      Bruno Fernandes\n      27\n      https://cdn.sofifa.net/players/212/198/23_60.png\n      Portugal\n      https://cdn.sofifa.net/flags/pt.png\n      86\n      87\n      Manchester United\n      https://cdn.sofifa.net/teams/11/30.png\n      ...\n      High/ High\n      Unique\n      Yes\n      <span class=\"pos pos15\">LCM\n      Jan 30, 2020\n      2026\n      179cm\n      69kg\n      €155M\n      8.0\n    \n    \n      2\n      224334\n      M. Acuña\n      30\n      https://cdn.sofifa.net/players/224/334/23_60.png\n      Argentina\n      https://cdn.sofifa.net/flags/ar.png\n      85\n      85\n      Sevilla FC\n      https://cdn.sofifa.net/teams/481/30.png\n      ...\n      High/ High\n      Stocky (170-185)\n      No\n      <span class=\"pos pos7\">LB\n      Sep 14, 2020\n      2024\n      172cm\n      69kg\n      €97.7M\n      19.0\n    \n    \n      3\n      192985\n      K. De Bruyne\n      31\n      https://cdn.sofifa.net/players/192/985/23_60.png\n      Belgium\n      https://cdn.sofifa.net/flags/be.png\n      91\n      91\n      Manchester City\n      https://cdn.sofifa.net/teams/10/30.png\n      ...\n      High/ High\n      Unique\n      Yes\n      <span class=\"pos pos13\">RCM\n      Aug 30, 2015\n      2025\n      181cm\n      70kg\n      €198.9M\n      17.0\n    \n    \n      4\n      224232\n      N. Barella\n      25\n      https://cdn.sofifa.net/players/224/232/23_60.png\n      Italy\n      https://cdn.sofifa.net/flags/it.png\n      86\n      89\n      Inter\n      https://cdn.sofifa.net/teams/44/30.png\n      ...\n      High/ High\n      Normal (170-)\n      Yes\n      <span class=\"pos pos13\">RCM\n      Sep 1, 2020\n      2026\n      172cm\n      68kg\n      €154.4M\n      23.0\n    \n    \n      ...\n      ...\n      ...\n      ...\n      ...\n      ...\n      ...\n      ...\n      ...\n      ...\n      ...\n      ...\n      ...\n      ...\n      ...\n      ...\n      ...\n      ...\n      ...\n      ...\n      ...\n      ...\n    \n    \n      17655\n      269526\n      Deng Xiongtao\n      19\n      https://cdn.sofifa.net/players/269/526/23_60.png\n      China PR\n      https://cdn.sofifa.net/flags/cn.png\n      48\n      61\n      Meizhou Hakka\n      https://cdn.sofifa.net/teams/114628/30.png\n      ...\n      Medium/ Medium\n      Normal (185+)\n      No\n      <span class=\"pos pos29\">RES\n      Apr 11, 2022\n      2027\n      190cm\n      78kg\n      €218K\n      35.0\n    \n    \n      17656\n      267946\n      22 Lim Jun Sub\n      17\n      https://cdn.sofifa.net/players/267/946/22_60.png\n      Korea Republic\n      https://cdn.sofifa.net/flags/kr.png\n      48\n      64\n      Jeju United FC\n      https://cdn.sofifa.net/teams/1478/30.png\n      ...\n      Medium/ Medium\n      Lean (185+)\n      No\n      <span class=\"pos pos29\">RES\n      Jan 1, 2022\n      2026\n      195cm\n      84kg\n      €188K\n      21.0\n    \n    \n      17657\n      270567\n      A. Demir\n      25\n      https://cdn.sofifa.net/players/270/567/23_60.png\n      Turkey\n      https://cdn.sofifa.net/flags/tr.png\n      51\n      56\n      Ümraniyespor\n      https://cdn.sofifa.net/teams/113796/30.png\n      ...\n      Medium/ Medium\n      Lean (185+)\n      No\n      <span class=\"pos pos29\">RES\n      Jun 6, 2021\n      2023\n      190cm\n      82kg\n      €142K\n      12.0\n    \n    \n      17658\n      256624\n      21 S. Czajor\n      18\n      https://cdn.sofifa.net/players/256/624/21_60.png\n      Poland\n      https://cdn.sofifa.net/flags/pl.png\n      50\n      65\n      Fleetwood Town\n      https://cdn.sofifa.net/teams/112260/30.png\n      ...\n      Medium/ Medium\n      Normal (185+)\n      No\n      <span class=\"pos pos29\">RES\n      Jan 1, 2020\n      2021\n      187cm\n      79kg\n      €214K\n      40.0\n    \n    \n      17659\n      256376\n      21 F. Jakobsson\n      20\n      https://cdn.sofifa.net/players/256/376/21_60.png\n      Sweden\n      https://cdn.sofifa.net/flags/se.png\n      50\n      61\n      IFK Norrköping\n      https://cdn.sofifa.net/teams/702/30.png\n      ...\n      Medium/ Medium\n      Normal (185+)\n      No\n      <span class=\"pos pos29\">RES\n      Jan 8, 2020\n      2021\n      186cm\n      78kg\n      €131K\n      30.0\n    \n  \n\n16364 rows × 27 columns\n\n\n\n- Height, Weight의 자료형을 float형으로 수정하기\n\ndf.assign(\n    Height= list(map(lambda x: float(x[:-2]), df.Height)),\n    Weight= list(map(lambda x: float(x[:-2]), df.Weight))\n)\n\n\n\n\n\n  \n    \n      \n      ID\n      Name\n      Age\n      Photo\n      Nationality\n      Flag\n      Overall\n      Potential\n      Club\n      Club Logo\n      ...\n      Real Face\n      Position\n      Joined\n      Loaned From\n      Contract Valid Until\n      Height\n      Weight\n      Release Clause\n      Kit Number\n      Best Overall Rating\n    \n  \n  \n    \n      0\n      209658\n      L. Goretzka\n      27\n      https://cdn.sofifa.net/players/209/658/23_60.png\n      Germany\n      https://cdn.sofifa.net/flags/de.png\n      87\n      88\n      FC Bayern München\n      https://cdn.sofifa.net/teams/21/30.png\n      ...\n      Yes\n      <span class=\"pos pos28\">SUB\n      Jul 1, 2018\n      NaN\n      2026\n      189.0\n      82.0\n      €157M\n      8.0\n      NaN\n    \n    \n      1\n      212198\n      Bruno Fernandes\n      27\n      https://cdn.sofifa.net/players/212/198/23_60.png\n      Portugal\n      https://cdn.sofifa.net/flags/pt.png\n      86\n      87\n      Manchester United\n      https://cdn.sofifa.net/teams/11/30.png\n      ...\n      Yes\n      <span class=\"pos pos15\">LCM\n      Jan 30, 2020\n      NaN\n      2026\n      179.0\n      69.0\n      €155M\n      8.0\n      NaN\n    \n    \n      2\n      224334\n      M. Acuña\n      30\n      https://cdn.sofifa.net/players/224/334/23_60.png\n      Argentina\n      https://cdn.sofifa.net/flags/ar.png\n      85\n      85\n      Sevilla FC\n      https://cdn.sofifa.net/teams/481/30.png\n      ...\n      No\n      <span class=\"pos pos7\">LB\n      Sep 14, 2020\n      NaN\n      2024\n      172.0\n      69.0\n      €97.7M\n      19.0\n      NaN\n    \n    \n      3\n      192985\n      K. De Bruyne\n      31\n      https://cdn.sofifa.net/players/192/985/23_60.png\n      Belgium\n      https://cdn.sofifa.net/flags/be.png\n      91\n      91\n      Manchester City\n      https://cdn.sofifa.net/teams/10/30.png\n      ...\n      Yes\n      <span class=\"pos pos13\">RCM\n      Aug 30, 2015\n      NaN\n      2025\n      181.0\n      70.0\n      €198.9M\n      17.0\n      NaN\n    \n    \n      4\n      224232\n      N. Barella\n      25\n      https://cdn.sofifa.net/players/224/232/23_60.png\n      Italy\n      https://cdn.sofifa.net/flags/it.png\n      86\n      89\n      Inter\n      https://cdn.sofifa.net/teams/44/30.png\n      ...\n      Yes\n      <span class=\"pos pos13\">RCM\n      Sep 1, 2020\n      NaN\n      2026\n      172.0\n      68.0\n      €154.4M\n      23.0\n      NaN\n    \n    \n      ...\n      ...\n      ...\n      ...\n      ...\n      ...\n      ...\n      ...\n      ...\n      ...\n      ...\n      ...\n      ...\n      ...\n      ...\n      ...\n      ...\n      ...\n      ...\n      ...\n      ...\n      ...\n    \n    \n      17655\n      269526\n      Deng Xiongtao\n      19\n      https://cdn.sofifa.net/players/269/526/23_60.png\n      China PR\n      https://cdn.sofifa.net/flags/cn.png\n      48\n      61\n      Meizhou Hakka\n      https://cdn.sofifa.net/teams/114628/30.png\n      ...\n      No\n      <span class=\"pos pos29\">RES\n      Apr 11, 2022\n      NaN\n      2027\n      190.0\n      78.0\n      €218K\n      35.0\n      NaN\n    \n    \n      17656\n      267946\n      22 Lim Jun Sub\n      17\n      https://cdn.sofifa.net/players/267/946/22_60.png\n      Korea Republic\n      https://cdn.sofifa.net/flags/kr.png\n      48\n      64\n      Jeju United FC\n      https://cdn.sofifa.net/teams/1478/30.png\n      ...\n      No\n      <span class=\"pos pos29\">RES\n      Jan 1, 2022\n      NaN\n      2026\n      195.0\n      84.0\n      €188K\n      21.0\n      NaN\n    \n    \n      17657\n      270567\n      A. Demir\n      25\n      https://cdn.sofifa.net/players/270/567/23_60.png\n      Turkey\n      https://cdn.sofifa.net/flags/tr.png\n      51\n      56\n      Ümraniyespor\n      https://cdn.sofifa.net/teams/113796/30.png\n      ...\n      No\n      <span class=\"pos pos29\">RES\n      Jun 6, 2021\n      NaN\n      2023\n      190.0\n      82.0\n      €142K\n      12.0\n      NaN\n    \n    \n      17658\n      256624\n      21 S. Czajor\n      18\n      https://cdn.sofifa.net/players/256/624/21_60.png\n      Poland\n      https://cdn.sofifa.net/flags/pl.png\n      50\n      65\n      Fleetwood Town\n      https://cdn.sofifa.net/teams/112260/30.png\n      ...\n      No\n      <span class=\"pos pos29\">RES\n      Jan 1, 2020\n      NaN\n      2021\n      187.0\n      79.0\n      €214K\n      40.0\n      NaN\n    \n    \n      17659\n      256376\n      21 F. Jakobsson\n      20\n      https://cdn.sofifa.net/players/256/376/21_60.png\n      Sweden\n      https://cdn.sofifa.net/flags/se.png\n      50\n      61\n      IFK Norrköping\n      https://cdn.sofifa.net/teams/702/30.png\n      ...\n      No\n      <span class=\"pos pos29\">RES\n      Jan 8, 2020\n      NaN\n      2021\n      186.0\n      78.0\n      €131K\n      30.0\n      NaN\n    \n  \n\n17660 rows × 29 columns\n\n\n\n- Release Clause의 자료형을 float으로 수정하기\n\ndf['Release Clause']\n\n0          €157M\n1          €155M\n2         €97.7M\n3        €198.9M\n4        €154.4M\n          ...   \n17655      €218K\n17656      €188K\n17657      €142K\n17658      €214K\n17659      €131K\nName: Release Clause, Length: 17660, dtype: object\n\n\n\n_f = lambda x: float(x[1:-1])*1000 if x[-1]=='K' else float(x[1:-1])*1000000\n\n\n_f('€157M')\n\n157000000.0\n\n\n\n_f('€131K')\n\n131000.0\n\n\n(시도1–실패)\n\nlist(map(_f,df['Release Clause']))\n\nTypeError: 'float' object is not subscriptable\n\n\n(시도1이 실패한 이유)\n\ndf['Release Clause'].isna().sum() # 이 column에는 1151개의 결측치가 존재\n\n1151\n\n\n(nan에 대한 예비학습)\n\ndf.loc[df['Release Clause'].isna(), 'Release Clause']\n\n18       NaN\n34       NaN\n38       NaN\n49       NaN\n50       NaN\n        ... \n17378    NaN\n17386    NaN\n17535    NaN\n17590    NaN\n17618    NaN\nName: Release Clause, Length: 1151, dtype: object\n\n\n\ndf.loc[18, 'Release Clause']\n\nnan\n\n\n\npd.isna(df.loc[18, 'Release Clause'])\n\nTrue\n\n\n\ntype(df.loc[18, 'Release Clause'])\n\nfloat\n\n\n\ndf.loc[18, 'Release Clause'][-1]\n\nTypeError: 'float' object is not subscriptable\n\n\n(시도2–성공)\n\ndf.rename(columns={'Release Clause':'ReleaseClause'})\\\n.assign(ReleaseClause = list(map(lambda x: _f(x) if pd.isna(x)==False else x , df['Release Clause'])))\\\n.rename(columns={'ReleaseClause':'Release Clause'})\n\n\n\n\n\n  \n    \n      \n      ID\n      Name\n      Age\n      Photo\n      Nationality\n      Flag\n      Overall\n      Potential\n      Club\n      Club Logo\n      ...\n      Real Face\n      Position\n      Joined\n      Loaned From\n      Contract Valid Until\n      Height\n      Weight\n      Release Clause\n      Kit Number\n      Best Overall Rating\n    \n  \n  \n    \n      0\n      209658\n      L. Goretzka\n      27\n      https://cdn.sofifa.net/players/209/658/23_60.png\n      Germany\n      https://cdn.sofifa.net/flags/de.png\n      87\n      88\n      FC Bayern München\n      https://cdn.sofifa.net/teams/21/30.png\n      ...\n      Yes\n      <span class=\"pos pos28\">SUB\n      Jul 1, 2018\n      NaN\n      2026\n      189cm\n      82kg\n      157000000.0\n      8.0\n      NaN\n    \n    \n      1\n      212198\n      Bruno Fernandes\n      27\n      https://cdn.sofifa.net/players/212/198/23_60.png\n      Portugal\n      https://cdn.sofifa.net/flags/pt.png\n      86\n      87\n      Manchester United\n      https://cdn.sofifa.net/teams/11/30.png\n      ...\n      Yes\n      <span class=\"pos pos15\">LCM\n      Jan 30, 2020\n      NaN\n      2026\n      179cm\n      69kg\n      155000000.0\n      8.0\n      NaN\n    \n    \n      2\n      224334\n      M. Acuña\n      30\n      https://cdn.sofifa.net/players/224/334/23_60.png\n      Argentina\n      https://cdn.sofifa.net/flags/ar.png\n      85\n      85\n      Sevilla FC\n      https://cdn.sofifa.net/teams/481/30.png\n      ...\n      No\n      <span class=\"pos pos7\">LB\n      Sep 14, 2020\n      NaN\n      2024\n      172cm\n      69kg\n      97700000.0\n      19.0\n      NaN\n    \n    \n      3\n      192985\n      K. De Bruyne\n      31\n      https://cdn.sofifa.net/players/192/985/23_60.png\n      Belgium\n      https://cdn.sofifa.net/flags/be.png\n      91\n      91\n      Manchester City\n      https://cdn.sofifa.net/teams/10/30.png\n      ...\n      Yes\n      <span class=\"pos pos13\">RCM\n      Aug 30, 2015\n      NaN\n      2025\n      181cm\n      70kg\n      198900000.0\n      17.0\n      NaN\n    \n    \n      4\n      224232\n      N. Barella\n      25\n      https://cdn.sofifa.net/players/224/232/23_60.png\n      Italy\n      https://cdn.sofifa.net/flags/it.png\n      86\n      89\n      Inter\n      https://cdn.sofifa.net/teams/44/30.png\n      ...\n      Yes\n      <span class=\"pos pos13\">RCM\n      Sep 1, 2020\n      NaN\n      2026\n      172cm\n      68kg\n      154400000.0\n      23.0\n      NaN\n    \n    \n      ...\n      ...\n      ...\n      ...\n      ...\n      ...\n      ...\n      ...\n      ...\n      ...\n      ...\n      ...\n      ...\n      ...\n      ...\n      ...\n      ...\n      ...\n      ...\n      ...\n      ...\n      ...\n    \n    \n      17655\n      269526\n      Deng Xiongtao\n      19\n      https://cdn.sofifa.net/players/269/526/23_60.png\n      China PR\n      https://cdn.sofifa.net/flags/cn.png\n      48\n      61\n      Meizhou Hakka\n      https://cdn.sofifa.net/teams/114628/30.png\n      ...\n      No\n      <span class=\"pos pos29\">RES\n      Apr 11, 2022\n      NaN\n      2027\n      190cm\n      78kg\n      218000.0\n      35.0\n      NaN\n    \n    \n      17656\n      267946\n      22 Lim Jun Sub\n      17\n      https://cdn.sofifa.net/players/267/946/22_60.png\n      Korea Republic\n      https://cdn.sofifa.net/flags/kr.png\n      48\n      64\n      Jeju United FC\n      https://cdn.sofifa.net/teams/1478/30.png\n      ...\n      No\n      <span class=\"pos pos29\">RES\n      Jan 1, 2022\n      NaN\n      2026\n      195cm\n      84kg\n      188000.0\n      21.0\n      NaN\n    \n    \n      17657\n      270567\n      A. Demir\n      25\n      https://cdn.sofifa.net/players/270/567/23_60.png\n      Turkey\n      https://cdn.sofifa.net/flags/tr.png\n      51\n      56\n      Ümraniyespor\n      https://cdn.sofifa.net/teams/113796/30.png\n      ...\n      No\n      <span class=\"pos pos29\">RES\n      Jun 6, 2021\n      NaN\n      2023\n      190cm\n      82kg\n      142000.0\n      12.0\n      NaN\n    \n    \n      17658\n      256624\n      21 S. Czajor\n      18\n      https://cdn.sofifa.net/players/256/624/21_60.png\n      Poland\n      https://cdn.sofifa.net/flags/pl.png\n      50\n      65\n      Fleetwood Town\n      https://cdn.sofifa.net/teams/112260/30.png\n      ...\n      No\n      <span class=\"pos pos29\">RES\n      Jan 1, 2020\n      NaN\n      2021\n      187cm\n      79kg\n      214000.0\n      40.0\n      NaN\n    \n    \n      17659\n      256376\n      21 F. Jakobsson\n      20\n      https://cdn.sofifa.net/players/256/376/21_60.png\n      Sweden\n      https://cdn.sofifa.net/flags/se.png\n      50\n      61\n      IFK Norrköping\n      https://cdn.sofifa.net/teams/702/30.png\n      ...\n      No\n      <span class=\"pos pos29\">RES\n      Jan 8, 2020\n      NaN\n      2021\n      186cm\n      78kg\n      131000.0\n      30.0\n      NaN\n    \n  \n\n17660 rows × 29 columns\n\n\n\n(시도3–성공) 그냥 결측치를 제거하고 변형해도 무방..\n\ndf2 = df.drop(columns=['Loaned From', 'Best Overall Rating']).dropna()\ndf2['Release Clause'] = list(map(lambda x: _f(x) if pd.isna(x)==False else x , df2['Release Clause']))\ndf2\n\n\n\n\n\n  \n    \n      \n      ID\n      Name\n      Age\n      Photo\n      Nationality\n      Flag\n      Overall\n      Potential\n      Club\n      Club Logo\n      ...\n      Work Rate\n      Body Type\n      Real Face\n      Position\n      Joined\n      Contract Valid Until\n      Height\n      Weight\n      Release Clause\n      Kit Number\n    \n  \n  \n    \n      0\n      209658\n      L. Goretzka\n      27\n      https://cdn.sofifa.net/players/209/658/23_60.png\n      Germany\n      https://cdn.sofifa.net/flags/de.png\n      87\n      88\n      FC Bayern München\n      https://cdn.sofifa.net/teams/21/30.png\n      ...\n      High/ Medium\n      Unique\n      Yes\n      <span class=\"pos pos28\">SUB\n      Jul 1, 2018\n      2026\n      189cm\n      82kg\n      157000000.0\n      8.0\n    \n    \n      1\n      212198\n      Bruno Fernandes\n      27\n      https://cdn.sofifa.net/players/212/198/23_60.png\n      Portugal\n      https://cdn.sofifa.net/flags/pt.png\n      86\n      87\n      Manchester United\n      https://cdn.sofifa.net/teams/11/30.png\n      ...\n      High/ High\n      Unique\n      Yes\n      <span class=\"pos pos15\">LCM\n      Jan 30, 2020\n      2026\n      179cm\n      69kg\n      155000000.0\n      8.0\n    \n    \n      2\n      224334\n      M. Acuña\n      30\n      https://cdn.sofifa.net/players/224/334/23_60.png\n      Argentina\n      https://cdn.sofifa.net/flags/ar.png\n      85\n      85\n      Sevilla FC\n      https://cdn.sofifa.net/teams/481/30.png\n      ...\n      High/ High\n      Stocky (170-185)\n      No\n      <span class=\"pos pos7\">LB\n      Sep 14, 2020\n      2024\n      172cm\n      69kg\n      97700000.0\n      19.0\n    \n    \n      3\n      192985\n      K. De Bruyne\n      31\n      https://cdn.sofifa.net/players/192/985/23_60.png\n      Belgium\n      https://cdn.sofifa.net/flags/be.png\n      91\n      91\n      Manchester City\n      https://cdn.sofifa.net/teams/10/30.png\n      ...\n      High/ High\n      Unique\n      Yes\n      <span class=\"pos pos13\">RCM\n      Aug 30, 2015\n      2025\n      181cm\n      70kg\n      198900000.0\n      17.0\n    \n    \n      4\n      224232\n      N. Barella\n      25\n      https://cdn.sofifa.net/players/224/232/23_60.png\n      Italy\n      https://cdn.sofifa.net/flags/it.png\n      86\n      89\n      Inter\n      https://cdn.sofifa.net/teams/44/30.png\n      ...\n      High/ High\n      Normal (170-)\n      Yes\n      <span class=\"pos pos13\">RCM\n      Sep 1, 2020\n      2026\n      172cm\n      68kg\n      154400000.0\n      23.0\n    \n    \n      ...\n      ...\n      ...\n      ...\n      ...\n      ...\n      ...\n      ...\n      ...\n      ...\n      ...\n      ...\n      ...\n      ...\n      ...\n      ...\n      ...\n      ...\n      ...\n      ...\n      ...\n      ...\n    \n    \n      17655\n      269526\n      Deng Xiongtao\n      19\n      https://cdn.sofifa.net/players/269/526/23_60.png\n      China PR\n      https://cdn.sofifa.net/flags/cn.png\n      48\n      61\n      Meizhou Hakka\n      https://cdn.sofifa.net/teams/114628/30.png\n      ...\n      Medium/ Medium\n      Normal (185+)\n      No\n      <span class=\"pos pos29\">RES\n      Apr 11, 2022\n      2027\n      190cm\n      78kg\n      218000.0\n      35.0\n    \n    \n      17656\n      267946\n      22 Lim Jun Sub\n      17\n      https://cdn.sofifa.net/players/267/946/22_60.png\n      Korea Republic\n      https://cdn.sofifa.net/flags/kr.png\n      48\n      64\n      Jeju United FC\n      https://cdn.sofifa.net/teams/1478/30.png\n      ...\n      Medium/ Medium\n      Lean (185+)\n      No\n      <span class=\"pos pos29\">RES\n      Jan 1, 2022\n      2026\n      195cm\n      84kg\n      188000.0\n      21.0\n    \n    \n      17657\n      270567\n      A. Demir\n      25\n      https://cdn.sofifa.net/players/270/567/23_60.png\n      Turkey\n      https://cdn.sofifa.net/flags/tr.png\n      51\n      56\n      Ümraniyespor\n      https://cdn.sofifa.net/teams/113796/30.png\n      ...\n      Medium/ Medium\n      Lean (185+)\n      No\n      <span class=\"pos pos29\">RES\n      Jun 6, 2021\n      2023\n      190cm\n      82kg\n      142000.0\n      12.0\n    \n    \n      17658\n      256624\n      21 S. Czajor\n      18\n      https://cdn.sofifa.net/players/256/624/21_60.png\n      Poland\n      https://cdn.sofifa.net/flags/pl.png\n      50\n      65\n      Fleetwood Town\n      https://cdn.sofifa.net/teams/112260/30.png\n      ...\n      Medium/ Medium\n      Normal (185+)\n      No\n      <span class=\"pos pos29\">RES\n      Jan 1, 2020\n      2021\n      187cm\n      79kg\n      214000.0\n      40.0\n    \n    \n      17659\n      256376\n      21 F. Jakobsson\n      20\n      https://cdn.sofifa.net/players/256/376/21_60.png\n      Sweden\n      https://cdn.sofifa.net/flags/se.png\n      50\n      61\n      IFK Norrköping\n      https://cdn.sofifa.net/teams/702/30.png\n      ...\n      Medium/ Medium\n      Normal (185+)\n      No\n      <span class=\"pos pos29\">RES\n      Jan 8, 2020\n      2021\n      186cm\n      78kg\n      131000.0\n      30.0\n    \n  \n\n16364 rows × 27 columns\n\n\n\n\n분석의 편의를 위하여 (1) colnames를 변경하고 (2) 결측치를 제거하고 (3) 몇 가지 전 처리를 추가로 진행한 뒤 df2를 만들어서 분석하는게 좋음"
  },
  {
    "objectID": "posts/Day3/08_ggplot2/2023-02-01-Lesson18.html#데이터분석시각화",
    "href": "posts/Day3/08_ggplot2/2023-02-01-Lesson18.html#데이터분석시각화",
    "title": "Lesson 18: FIFA23 자료분석",
    "section": "데이터분석+시각화",
    "text": "데이터분석+시각화\n- Overall vs Potential\n\nggplot(data=df) + geom_point(aes(x='Overall',y='Potential'))\n\n\n\n\n<ggplot: (8772275859669)>\n\n\n\n뭔가 Potential > Overall 인 관계가 성립하는 듯 하다. \\(\\to\\) 우리가 생각하는 포텐셜의 의미는 사실 Potential2 = Potential - Overall 에 더 가깝다. \\(\\to\\) Potential2 = Potential - Overall 인 변수를 새로 만들고 시각화 해보자.\n\n- Potential2 = Potential - Overall 를 계산하여 새로운 열을 추가하자.\n\ndf.eval('Potential2 = Potential - Overall')\n\n\n\n\n\n  \n    \n      \n      ID\n      Name\n      Age\n      Photo\n      Nationality\n      Flag\n      Overall\n      Potential\n      Club\n      Club Logo\n      ...\n      Position\n      Joined\n      Loaned From\n      Contract Valid Until\n      Height\n      Weight\n      Release Clause\n      Kit Number\n      Best Overall Rating\n      Potential2\n    \n  \n  \n    \n      0\n      209658\n      L. Goretzka\n      27\n      https://cdn.sofifa.net/players/209/658/23_60.png\n      Germany\n      https://cdn.sofifa.net/flags/de.png\n      87\n      88\n      FC Bayern München\n      https://cdn.sofifa.net/teams/21/30.png\n      ...\n      <span class=\"pos pos28\">SUB\n      Jul 1, 2018\n      NaN\n      2026\n      189cm\n      82kg\n      €157M\n      8.0\n      NaN\n      1\n    \n    \n      1\n      212198\n      Bruno Fernandes\n      27\n      https://cdn.sofifa.net/players/212/198/23_60.png\n      Portugal\n      https://cdn.sofifa.net/flags/pt.png\n      86\n      87\n      Manchester United\n      https://cdn.sofifa.net/teams/11/30.png\n      ...\n      <span class=\"pos pos15\">LCM\n      Jan 30, 2020\n      NaN\n      2026\n      179cm\n      69kg\n      €155M\n      8.0\n      NaN\n      1\n    \n    \n      2\n      224334\n      M. Acuña\n      30\n      https://cdn.sofifa.net/players/224/334/23_60.png\n      Argentina\n      https://cdn.sofifa.net/flags/ar.png\n      85\n      85\n      Sevilla FC\n      https://cdn.sofifa.net/teams/481/30.png\n      ...\n      <span class=\"pos pos7\">LB\n      Sep 14, 2020\n      NaN\n      2024\n      172cm\n      69kg\n      €97.7M\n      19.0\n      NaN\n      0\n    \n    \n      3\n      192985\n      K. De Bruyne\n      31\n      https://cdn.sofifa.net/players/192/985/23_60.png\n      Belgium\n      https://cdn.sofifa.net/flags/be.png\n      91\n      91\n      Manchester City\n      https://cdn.sofifa.net/teams/10/30.png\n      ...\n      <span class=\"pos pos13\">RCM\n      Aug 30, 2015\n      NaN\n      2025\n      181cm\n      70kg\n      €198.9M\n      17.0\n      NaN\n      0\n    \n    \n      4\n      224232\n      N. Barella\n      25\n      https://cdn.sofifa.net/players/224/232/23_60.png\n      Italy\n      https://cdn.sofifa.net/flags/it.png\n      86\n      89\n      Inter\n      https://cdn.sofifa.net/teams/44/30.png\n      ...\n      <span class=\"pos pos13\">RCM\n      Sep 1, 2020\n      NaN\n      2026\n      172cm\n      68kg\n      €154.4M\n      23.0\n      NaN\n      3\n    \n    \n      ...\n      ...\n      ...\n      ...\n      ...\n      ...\n      ...\n      ...\n      ...\n      ...\n      ...\n      ...\n      ...\n      ...\n      ...\n      ...\n      ...\n      ...\n      ...\n      ...\n      ...\n      ...\n    \n    \n      17655\n      269526\n      Deng Xiongtao\n      19\n      https://cdn.sofifa.net/players/269/526/23_60.png\n      China PR\n      https://cdn.sofifa.net/flags/cn.png\n      48\n      61\n      Meizhou Hakka\n      https://cdn.sofifa.net/teams/114628/30.png\n      ...\n      <span class=\"pos pos29\">RES\n      Apr 11, 2022\n      NaN\n      2027\n      190cm\n      78kg\n      €218K\n      35.0\n      NaN\n      13\n    \n    \n      17656\n      267946\n      22 Lim Jun Sub\n      17\n      https://cdn.sofifa.net/players/267/946/22_60.png\n      Korea Republic\n      https://cdn.sofifa.net/flags/kr.png\n      48\n      64\n      Jeju United FC\n      https://cdn.sofifa.net/teams/1478/30.png\n      ...\n      <span class=\"pos pos29\">RES\n      Jan 1, 2022\n      NaN\n      2026\n      195cm\n      84kg\n      €188K\n      21.0\n      NaN\n      16\n    \n    \n      17657\n      270567\n      A. Demir\n      25\n      https://cdn.sofifa.net/players/270/567/23_60.png\n      Turkey\n      https://cdn.sofifa.net/flags/tr.png\n      51\n      56\n      Ümraniyespor\n      https://cdn.sofifa.net/teams/113796/30.png\n      ...\n      <span class=\"pos pos29\">RES\n      Jun 6, 2021\n      NaN\n      2023\n      190cm\n      82kg\n      €142K\n      12.0\n      NaN\n      5\n    \n    \n      17658\n      256624\n      21 S. Czajor\n      18\n      https://cdn.sofifa.net/players/256/624/21_60.png\n      Poland\n      https://cdn.sofifa.net/flags/pl.png\n      50\n      65\n      Fleetwood Town\n      https://cdn.sofifa.net/teams/112260/30.png\n      ...\n      <span class=\"pos pos29\">RES\n      Jan 1, 2020\n      NaN\n      2021\n      187cm\n      79kg\n      €214K\n      40.0\n      NaN\n      15\n    \n    \n      17659\n      256376\n      21 F. Jakobsson\n      20\n      https://cdn.sofifa.net/players/256/376/21_60.png\n      Sweden\n      https://cdn.sofifa.net/flags/se.png\n      50\n      61\n      IFK Norrköping\n      https://cdn.sofifa.net/teams/702/30.png\n      ...\n      <span class=\"pos pos29\">RES\n      Jan 8, 2020\n      NaN\n      2021\n      186cm\n      78kg\n      €131K\n      30.0\n      NaN\n      11\n    \n  \n\n17660 rows × 30 columns\n\n\n\n- 수정된 데이터프레임으로 다시 시각화를 하자.\n\nggplot(data=df.eval('Potential2 = Potential - Overall'))\\\n+ geom_point(aes(x='Overall',y='Potential2'),alpha=0.01)\n\n\n\n\n<ggplot: (8772307230189)>\n\n\n- 일부점들이 겹치므로 position = ’jitter’를 사용하여 점들을 흩뿌리자.\n\nggplot(data=df.eval('Potential2 = Potential - Overall'))\\\n+ geom_point(aes(x='Overall',y='Potential2'),alpha=0.05,position='jitter')\n\n\n\n\n<ggplot: (8772275596573)>\n\n\n- 해석 - 해석1: Overall, Potential2는 음의 상관관계가 있다. - 해석2: 0근처에 데이터가 많음 \\(\\to\\) 이미 은퇴한 선수들이 아닐까? - 해석3: Overall의 값이 작을수록 Potential2의 분산이 크다.\n- 은퇴한 선수들은 제외하고 시각화하자.\n\nggplot(data=df.eval('Potential2 = Potential - Overall').query('Potential2 > 1'))\\\n+ geom_point(aes(x='Overall',y='Potential2'),alpha=0.05,position='jitter')\n\n\n\n\n<ggplot: (8772275556513)>\n\n\n- Overall에 따라서 구간을 나누고 그 구간에 대응하는 boxplot을 그리자.\n\ndf.eval('Potential2 = Potential - Overall').query('Potential2 > 1')\\\n.Overall.describe()\n\ncount    13644.000000\nmean        61.415347\nstd          7.247821\nmin         44.000000\n25%         56.000000\n50%         61.000000\n75%         66.000000\nmax         91.000000\nName: Overall, dtype: float64\n\n\n\ndef f(x):\n    if x>66: \n        y='66<'\n    elif x>61:\n        y='61~66'\n    elif x>56:\n        y='56~61'\n    else:\n        y='<56' \n    return y\n\n\nggplot(data=df.eval('Potential2 = Potential - Overall').query('Potential2 > 1')\\\n.assign(Overall_grouped= lambda df: list(map(f,df.Overall))))\\\n    + geom_boxplot(aes(x='Overall_grouped',y='Potential2',color='Overall_grouped'))\n\n\n\n\n<ggplot: (8772275730901)>\n\n\n\nOverall_grouped = “<56” 에 대응하는 점들을 모두 뽑아서 mean(Overall)를 계산하고 그 값을 Overall_grouped = “<56” 에 대응하는 박스플랏의 x축위치로 설정\nOverall_grouped = “56~61” 에 대응하는 점들을 모두 뽑아서 mean(Overall)를 계산하고 그 값을 Overall_grouped = “56~61” 에 대응하는 박스플랏의 x축위치로 설정\nOverall_grouped = “61~66” 에 대응하는 점들을 모두 뽑아서 mean(Overall)를 계산하고 그 값을 Overall_grouped = “61~66” 에 대응하는 박스플랏의 x축위치로 설정\nOverall_grouped = “66<” 에 대응하는 점들을 모두 뽑아서 mean(Overall)를 계산하고 그 값을 Overall_grouped = “66<” 에 대응하는 박스플랏의 x축위치로 설정\n\n\ndf.eval('Potential2 = Potential - Overall').query('Potential2 > 1')\\\n.assign(Overall_grouped= lambda df: list(map(f,df.Overall)))\\\n.query(\"Overall_grouped == '66<'\").Overall.mean()\n\n71.8127687727423\n\n\n(방법1)\n\ndef g(x):\n    if x=='66<': \n        y= 71.8127687727423\n    elif x=='61~66':\n        y= 63.773918342474104\n    elif x=='56~61':\n        y= 59.155840684309005\n    else:\n        y= 52.87743190661479\n    return y\n\n\ndf.eval('Potential2 = Potential - Overall').query('Potential2 > 1')\\\n.assign(Overall_grouped= lambda df: list(map(f,df.Overall)))\\\n.assign(Overall_x= lambda df: list(map(g,df.Overall_grouped)))\n\n\n\n\n\n  \n    \n      \n      ID\n      Name\n      Age\n      Photo\n      Nationality\n      Flag\n      Overall\n      Potential\n      Club\n      Club Logo\n      ...\n      Loaned From\n      Contract Valid Until\n      Height\n      Weight\n      Release Clause\n      Kit Number\n      Best Overall Rating\n      Potential2\n      Overall_grouped\n      Overall_x\n    \n  \n  \n    \n      4\n      224232\n      N. Barella\n      25\n      https://cdn.sofifa.net/players/224/232/23_60.png\n      Italy\n      https://cdn.sofifa.net/flags/it.png\n      86\n      89\n      Inter\n      https://cdn.sofifa.net/teams/44/30.png\n      ...\n      NaN\n      2026\n      172cm\n      68kg\n      €154.4M\n      23.0\n      NaN\n      3\n      66<\n      71.812769\n    \n    \n      10\n      228251\n      L. Pellegrini\n      26\n      https://cdn.sofifa.net/players/228/251/23_60.png\n      Italy\n      https://cdn.sofifa.net/flags/it.png\n      84\n      87\n      Roma\n      https://cdn.sofifa.net/teams/52/30.png\n      ...\n      NaN\n      2026\n      186cm\n      77kg\n      €97.6M\n      7.0\n      NaN\n      3\n      66<\n      71.812769\n    \n    \n      13\n      225193\n      Merino\n      26\n      https://cdn.sofifa.net/players/225/193/23_60.png\n      Spain\n      https://cdn.sofifa.net/flags/es.png\n      83\n      86\n      Real Sociedad\n      https://cdn.sofifa.net/teams/457/30.png\n      ...\n      NaN\n      2025\n      189cm\n      83kg\n      €102.2M\n      8.0\n      NaN\n      3\n      66<\n      71.812769\n    \n    \n      17\n      228702\n      F. de Jong\n      25\n      https://cdn.sofifa.net/players/228/702/23_60.png\n      Netherlands\n      https://cdn.sofifa.net/flags/nl.png\n      87\n      92\n      FC Barcelona\n      https://cdn.sofifa.net/teams/241/30.png\n      ...\n      NaN\n      2026\n      180cm\n      74kg\n      €247.6M\n      21.0\n      NaN\n      5\n      66<\n      71.812769\n    \n    \n      21\n      231281\n      T. Alexander-Arnold\n      23\n      https://cdn.sofifa.net/players/231/281/23_60.png\n      England\n      https://cdn.sofifa.net/flags/gb-eng.png\n      87\n      90\n      Liverpool\n      https://cdn.sofifa.net/teams/9/30.png\n      ...\n      NaN\n      2025\n      180cm\n      69kg\n      €193.5M\n      66.0\n      NaN\n      3\n      66<\n      71.812769\n    \n    \n      ...\n      ...\n      ...\n      ...\n      ...\n      ...\n      ...\n      ...\n      ...\n      ...\n      ...\n      ...\n      ...\n      ...\n      ...\n      ...\n      ...\n      ...\n      ...\n      ...\n      ...\n      ...\n    \n    \n      17655\n      269526\n      Deng Xiongtao\n      19\n      https://cdn.sofifa.net/players/269/526/23_60.png\n      China PR\n      https://cdn.sofifa.net/flags/cn.png\n      48\n      61\n      Meizhou Hakka\n      https://cdn.sofifa.net/teams/114628/30.png\n      ...\n      NaN\n      2027\n      190cm\n      78kg\n      €218K\n      35.0\n      NaN\n      13\n      <56\n      52.877432\n    \n    \n      17656\n      267946\n      22 Lim Jun Sub\n      17\n      https://cdn.sofifa.net/players/267/946/22_60.png\n      Korea Republic\n      https://cdn.sofifa.net/flags/kr.png\n      48\n      64\n      Jeju United FC\n      https://cdn.sofifa.net/teams/1478/30.png\n      ...\n      NaN\n      2026\n      195cm\n      84kg\n      €188K\n      21.0\n      NaN\n      16\n      <56\n      52.877432\n    \n    \n      17657\n      270567\n      A. Demir\n      25\n      https://cdn.sofifa.net/players/270/567/23_60.png\n      Turkey\n      https://cdn.sofifa.net/flags/tr.png\n      51\n      56\n      Ümraniyespor\n      https://cdn.sofifa.net/teams/113796/30.png\n      ...\n      NaN\n      2023\n      190cm\n      82kg\n      €142K\n      12.0\n      NaN\n      5\n      <56\n      52.877432\n    \n    \n      17658\n      256624\n      21 S. Czajor\n      18\n      https://cdn.sofifa.net/players/256/624/21_60.png\n      Poland\n      https://cdn.sofifa.net/flags/pl.png\n      50\n      65\n      Fleetwood Town\n      https://cdn.sofifa.net/teams/112260/30.png\n      ...\n      NaN\n      2021\n      187cm\n      79kg\n      €214K\n      40.0\n      NaN\n      15\n      <56\n      52.877432\n    \n    \n      17659\n      256376\n      21 F. Jakobsson\n      20\n      https://cdn.sofifa.net/players/256/376/21_60.png\n      Sweden\n      https://cdn.sofifa.net/flags/se.png\n      50\n      61\n      IFK Norrköping\n      https://cdn.sofifa.net/teams/702/30.png\n      ...\n      NaN\n      2021\n      186cm\n      78kg\n      €131K\n      30.0\n      NaN\n      11\n      <56\n      52.877432\n    \n  \n\n13644 rows × 32 columns\n\n\n\n\ndf2= df.eval('Potential2 = Potential - Overall').query('Potential2 > 1')\\\n.assign(Overall_grouped= lambda df: list(map(f,df.Overall)))\\\n.assign(Overall_x= lambda df: list(map(g,df.Overall_grouped)))\ndf2\n\n\n\n\n\n  \n    \n      \n      ID\n      Name\n      Age\n      Photo\n      Nationality\n      Flag\n      Overall\n      Potential\n      Club\n      Club Logo\n      ...\n      Loaned From\n      Contract Valid Until\n      Height\n      Weight\n      Release Clause\n      Kit Number\n      Best Overall Rating\n      Potential2\n      Overall_grouped\n      Overall_x\n    \n  \n  \n    \n      4\n      224232\n      N. Barella\n      25\n      https://cdn.sofifa.net/players/224/232/23_60.png\n      Italy\n      https://cdn.sofifa.net/flags/it.png\n      86\n      89\n      Inter\n      https://cdn.sofifa.net/teams/44/30.png\n      ...\n      NaN\n      2026\n      172cm\n      68kg\n      €154.4M\n      23.0\n      NaN\n      3\n      66<\n      71.812769\n    \n    \n      10\n      228251\n      L. Pellegrini\n      26\n      https://cdn.sofifa.net/players/228/251/23_60.png\n      Italy\n      https://cdn.sofifa.net/flags/it.png\n      84\n      87\n      Roma\n      https://cdn.sofifa.net/teams/52/30.png\n      ...\n      NaN\n      2026\n      186cm\n      77kg\n      €97.6M\n      7.0\n      NaN\n      3\n      66<\n      71.812769\n    \n    \n      13\n      225193\n      Merino\n      26\n      https://cdn.sofifa.net/players/225/193/23_60.png\n      Spain\n      https://cdn.sofifa.net/flags/es.png\n      83\n      86\n      Real Sociedad\n      https://cdn.sofifa.net/teams/457/30.png\n      ...\n      NaN\n      2025\n      189cm\n      83kg\n      €102.2M\n      8.0\n      NaN\n      3\n      66<\n      71.812769\n    \n    \n      17\n      228702\n      F. de Jong\n      25\n      https://cdn.sofifa.net/players/228/702/23_60.png\n      Netherlands\n      https://cdn.sofifa.net/flags/nl.png\n      87\n      92\n      FC Barcelona\n      https://cdn.sofifa.net/teams/241/30.png\n      ...\n      NaN\n      2026\n      180cm\n      74kg\n      €247.6M\n      21.0\n      NaN\n      5\n      66<\n      71.812769\n    \n    \n      21\n      231281\n      T. Alexander-Arnold\n      23\n      https://cdn.sofifa.net/players/231/281/23_60.png\n      England\n      https://cdn.sofifa.net/flags/gb-eng.png\n      87\n      90\n      Liverpool\n      https://cdn.sofifa.net/teams/9/30.png\n      ...\n      NaN\n      2025\n      180cm\n      69kg\n      €193.5M\n      66.0\n      NaN\n      3\n      66<\n      71.812769\n    \n    \n      ...\n      ...\n      ...\n      ...\n      ...\n      ...\n      ...\n      ...\n      ...\n      ...\n      ...\n      ...\n      ...\n      ...\n      ...\n      ...\n      ...\n      ...\n      ...\n      ...\n      ...\n      ...\n    \n    \n      17655\n      269526\n      Deng Xiongtao\n      19\n      https://cdn.sofifa.net/players/269/526/23_60.png\n      China PR\n      https://cdn.sofifa.net/flags/cn.png\n      48\n      61\n      Meizhou Hakka\n      https://cdn.sofifa.net/teams/114628/30.png\n      ...\n      NaN\n      2027\n      190cm\n      78kg\n      €218K\n      35.0\n      NaN\n      13\n      <56\n      52.877432\n    \n    \n      17656\n      267946\n      22 Lim Jun Sub\n      17\n      https://cdn.sofifa.net/players/267/946/22_60.png\n      Korea Republic\n      https://cdn.sofifa.net/flags/kr.png\n      48\n      64\n      Jeju United FC\n      https://cdn.sofifa.net/teams/1478/30.png\n      ...\n      NaN\n      2026\n      195cm\n      84kg\n      €188K\n      21.0\n      NaN\n      16\n      <56\n      52.877432\n    \n    \n      17657\n      270567\n      A. Demir\n      25\n      https://cdn.sofifa.net/players/270/567/23_60.png\n      Turkey\n      https://cdn.sofifa.net/flags/tr.png\n      51\n      56\n      Ümraniyespor\n      https://cdn.sofifa.net/teams/113796/30.png\n      ...\n      NaN\n      2023\n      190cm\n      82kg\n      €142K\n      12.0\n      NaN\n      5\n      <56\n      52.877432\n    \n    \n      17658\n      256624\n      21 S. Czajor\n      18\n      https://cdn.sofifa.net/players/256/624/21_60.png\n      Poland\n      https://cdn.sofifa.net/flags/pl.png\n      50\n      65\n      Fleetwood Town\n      https://cdn.sofifa.net/teams/112260/30.png\n      ...\n      NaN\n      2021\n      187cm\n      79kg\n      €214K\n      40.0\n      NaN\n      15\n      <56\n      52.877432\n    \n    \n      17659\n      256376\n      21 F. Jakobsson\n      20\n      https://cdn.sofifa.net/players/256/376/21_60.png\n      Sweden\n      https://cdn.sofifa.net/flags/se.png\n      50\n      61\n      IFK Norrköping\n      https://cdn.sofifa.net/teams/702/30.png\n      ...\n      NaN\n      2021\n      186cm\n      78kg\n      €131K\n      30.0\n      NaN\n      11\n      <56\n      52.877432\n    \n  \n\n13644 rows × 32 columns\n\n\n\n\nggplot(data=df2)\\\n+geom_point(aes(x='Overall',y='Potential2',color='Overall_grouped'),position='jitter',alpha=0.05)\\\n+geom_boxplot(aes(x='Overall_x',y='Potential2',color='Overall_grouped'))\n\n\n\n\n<ggplot: (8772275710537)>\n\n\n(방법2)\n\n_df = df.eval('Potential2 = Potential - Overall').query('Potential2 > 1')\\\n.assign(Overall_grouped= lambda df: list(map(f,df.Overall)))\n\n\ndf3=_df.groupby(by=\"Overall_grouped\").agg({'Overall':np.mean}).reset_index()\\\n.rename(columns={'Overall':'Overall_x'}).merge(_df)\n\n\nggplot(data=df3)\\\n+geom_point(aes(x='Overall',y='Potential2',color='Overall_grouped'),position='jitter',alpha=0.05)\\\n+geom_boxplot(aes(x='Overall_x',y='Potential2',color='Overall_grouped'))\n\n\n\n\n<ggplot: (8772275671993)>"
  },
  {
    "objectID": "posts/Day3/08_ggplot2/2023-02-01-Lesson19.html#geom_col",
    "href": "posts/Day3/08_ggplot2/2023-02-01-Lesson19.html#geom_col",
    "title": "Lesson 19: 심슨의 역설",
    "section": "geom_col",
    "text": "geom_col\n- 예시1: 한국과 일본의 평균능력치 비교\n\ndata=df.groupby('Nationality').agg({'Overall':np.mean}).reset_index()\ndata\n\n\n\n\n\n  \n    \n      \n      Nationality\n      Overall\n    \n  \n  \n    \n      0\n      Japan\n      66.478873\n    \n    \n      1\n      Korea Republic\n      65.457627\n    \n  \n\n\n\n\n\nggplot(data)+geom_col(aes(x='Nationality',y='Overall'))\n\n\n\n\n<ggplot: (8739001076625)>\n\n\n- 예시2: 한국과 일본의 평균능력치 비교 (색상변경)\n\ndata=df.groupby('Nationality').agg({'Overall':np.mean}).reset_index()\ndata\n\n\n\n\n\n  \n    \n      \n      Nationality\n      Overall\n    \n  \n  \n    \n      0\n      Japan\n      66.478873\n    \n    \n      1\n      Korea Republic\n      65.457627\n    \n  \n\n\n\n\n\nggplot(data)+geom_col(aes(x='Nationality',y='Overall',fill='Nationality'))\n#ggplot(data)+geom_col(aes(x='Nationality',y='Overall',color='Nationality'))\n\n\n\n\n<ggplot: (8739001430581)>\n\n\n- 예시3: 한국과 일본의 평균연령 비교\n\ndata=df.groupby('Nationality').agg({'Age':np.mean}).reset_index()\ndata\n\n\n\n\n\n  \n    \n      \n      Nationality\n      Age\n    \n  \n  \n    \n      0\n      Japan\n      26.084507\n    \n    \n      1\n      Korea Republic\n      27.158192\n    \n  \n\n\n\n\n\nggplot(data)+geom_col(aes(x='Nationality',y='Age',fill='Nationality'))\n\n\n\n\n<ggplot: (8739000939717)>"
  },
  {
    "objectID": "posts/Day3/08_ggplot2/2023-02-01-Lesson19.html#geom_col-positiondodge",
    "href": "posts/Day3/08_ggplot2/2023-02-01-Lesson19.html#geom_col-positiondodge",
    "title": "Lesson 19: 심슨의 역설",
    "section": "geom_col + position=‘dodge’",
    "text": "geom_col + position=‘dodge’\n- 예시1: 한국과 일본의 평균연령+평균능력치 비교\n\ndata=df.groupby('Nationality').agg({'Overall':np.mean,'Age':np.mean})\\\n.stack().reset_index().rename({0:'value'},axis=1)\ndata\n\n\n\n\n\n  \n    \n      \n      Nationality\n      level_1\n      value\n    \n  \n  \n    \n      0\n      Japan\n      Overall\n      66.478873\n    \n    \n      1\n      Japan\n      Age\n      26.084507\n    \n    \n      2\n      Korea Republic\n      Overall\n      65.457627\n    \n    \n      3\n      Korea Republic\n      Age\n      27.158192\n    \n  \n\n\n\n\n\nggplot(data)+geom_col(aes(x='level_1',fill='Nationality',y='value'),position='dodge')\n\n\n\n\n<ggplot: (8739004389489)>"
  },
  {
    "objectID": "posts/Day3/08_ggplot2/2023-02-01-Lesson19.html#geom_col-coord_flip",
    "href": "posts/Day3/08_ggplot2/2023-02-01-Lesson19.html#geom_col-coord_flip",
    "title": "Lesson 19: 심슨의 역설",
    "section": "geom_col + coord_flip()",
    "text": "geom_col + coord_flip()\n- 예시1: 한국과 일본의 평균연령+평균능력치 비교 (90도회전)\n\ndata=df.groupby('Nationality').agg({'Overall':np.mean,'Age':np.mean})\\\n.stack().reset_index().rename({0:'value'},axis=1)\ndata\n\n\n\n\n\n  \n    \n      \n      Nationality\n      level_1\n      value\n    \n  \n  \n    \n      0\n      Japan\n      Overall\n      66.478873\n    \n    \n      1\n      Japan\n      Age\n      26.084507\n    \n    \n      2\n      Korea Republic\n      Overall\n      65.457627\n    \n    \n      3\n      Korea Republic\n      Age\n      27.158192\n    \n  \n\n\n\n\n\nggplot(data)+geom_col(aes(x='level_1',fill='Nationality',y='value'),position='dodge')\\\n+coord_flip()\n\n\n\n\n<ggplot: (8739001299161)>"
  },
  {
    "objectID": "posts/Day3/08_ggplot2/2023-02-01-Lesson19.html#geom_col-facet_wrapvar",
    "href": "posts/Day3/08_ggplot2/2023-02-01-Lesson19.html#geom_col-facet_wrapvar",
    "title": "Lesson 19: 심슨의 역설",
    "section": "geom_col + facet_wrap(var)",
    "text": "geom_col + facet_wrap(var)\n- 예시1: 한국과 일본의 평균연령+평균능력치 비교 (면분할)\n\ndata=df.groupby('Nationality').agg({'Overall':np.mean,'Age':np.mean})\\\n.stack().reset_index().rename({0:'value'},axis=1)\ndata\n\n\n\n\n\n  \n    \n      \n      Nationality\n      level_1\n      value\n    \n  \n  \n    \n      0\n      Japan\n      Overall\n      66.478873\n    \n    \n      1\n      Japan\n      Age\n      26.084507\n    \n    \n      2\n      Korea Republic\n      Overall\n      65.457627\n    \n    \n      3\n      Korea Republic\n      Age\n      27.158192\n    \n  \n\n\n\n\n\nggplot(data)+geom_col(aes(x='Nationality',fill='Nationality',y='value'),position='dodge')\\\n+facet_wrap('level_1')\n\n\n\n\n<ggplot: (8739001171105)>\n\n\n- 예시2: 한국과 일본의 평균연령+평균능력치 비교 (면분할)\n\ndata=df.groupby('Nationality').agg({'Overall':np.mean,'Age':np.mean})\\\n.stack().reset_index().rename({0:'value'},axis=1)\ndata\n\n\n\n\n\n  \n    \n      \n      Nationality\n      level_1\n      value\n    \n  \n  \n    \n      0\n      Japan\n      Overall\n      66.478873\n    \n    \n      1\n      Japan\n      Age\n      26.084507\n    \n    \n      2\n      Korea Republic\n      Overall\n      65.457627\n    \n    \n      3\n      Korea Republic\n      Age\n      27.158192\n    \n  \n\n\n\n\n\nggplot(data)+geom_col(aes(x='level_1',fill='Nationality',y='value'),position='dodge')\\\n+facet_wrap('Nationality')\n\n\n\n\n<ggplot: (8739005005861)>"
  },
  {
    "objectID": "posts/Day3/08_ggplot2/2023-02-01-Lesson19.html#geom_col-facet_gridvar_y-var_x",
    "href": "posts/Day3/08_ggplot2/2023-02-01-Lesson19.html#geom_col-facet_gridvar_y-var_x",
    "title": "Lesson 19: 심슨의 역설",
    "section": "geom_col + facet_grid(‘var_y ~ var_x’)",
    "text": "geom_col + facet_grid(‘var_y ~ var_x’)\n- 예시1: 한국과 일본의 평균연령+평균능력치+최대능력치 비교 (면분할)\n\ndata=df.groupby('Nationality').agg({'Overall':[np.mean,np.max],'Age':np.mean})\\\n.melt(ignore_index=False).reset_index()\ndata\n\n\n\n\n\n  \n    \n      \n      Nationality\n      variable_0\n      variable_1\n      value\n    \n  \n  \n    \n      0\n      Japan\n      Overall\n      mean\n      66.478873\n    \n    \n      1\n      Korea Republic\n      Overall\n      mean\n      65.457627\n    \n    \n      2\n      Japan\n      Overall\n      amax\n      79.000000\n    \n    \n      3\n      Korea Republic\n      Overall\n      amax\n      89.000000\n    \n    \n      4\n      Japan\n      Age\n      mean\n      26.084507\n    \n    \n      5\n      Korea Republic\n      Age\n      mean\n      27.158192\n    \n  \n\n\n\n\n\nggplot(data)+geom_col(aes(fill='Nationality',x='Nationality',y='value'),position='dodge')\\\n+facet_grid('variable_1~variable_0')\n\n\n\n\n<ggplot: (8739001454385)>"
  },
  {
    "objectID": "posts/Day3/08_ggplot2/2023-02-01-Lesson19.html#geom_bar-vs-geom_col",
    "href": "posts/Day3/08_ggplot2/2023-02-01-Lesson19.html#geom_bar-vs-geom_col",
    "title": "Lesson 19: 심슨의 역설",
    "section": "geom_bar vs geom_col",
    "text": "geom_bar vs geom_col\n- 예시1: 한국과 일본의 단순 선수 숫자 비교 (with goem_col)\n\ndata=df.groupby('Nationality').agg({'Age':'count'}).reset_index().rename({'Age':'count'},axis=1)\ndata\n\n\n\n\n\n  \n    \n      \n      Nationality\n      count\n    \n  \n  \n    \n      0\n      Japan\n      284\n    \n    \n      1\n      Korea Republic\n      177\n    \n  \n\n\n\n\n\nggplot(data)+geom_col(aes(x='Nationality',fill='Nationality',y='count'))\n\n\n\n\n<ggplot: (8739001309845)>\n\n\n- 예시2: 한국과 일본의 단순 선수 숫자 비교 (with goem_bar)\n\nggplot(df)+geom_bar(aes(x='Nationality',fill='Nationality'))\n\n\n\n\n<ggplot: (8739003315533)>\n\n\n\n특징1: 원래 데이터프레임 그대로 하는게 아니라 뭔가 변형된 값이 출력 (정확하게는 groupby + count가 변형요소)\n특징2: y는 당연히 count이므로 y를 명시할 필요가 없음. (잘 생각해보면 명시하고 싶어도 명시할 수 없음, y는 groupby + count 에 의해서 계산된 값이고 df자체에는 존재하지 않음)\n\n- 이렇게 약속된 변형은 stat='count' 옵션 때문에 가능함\n\nstat=’count’는 그룹바이이후에 count를 하라는 의미\n\n\nggplot(df)+geom_bar(aes(x='Nationality',fill='Nationality'),stat='count')\n\n\n\n\n<ggplot: (8739005443049)>\n\n\n- stat='identity' 로 옵션을 바꾸면 약속된 변환이 수행되지 않음\n\nstat=’identity’는 아무 변환도 하지말라는 의미\n\n\nggplot(df)+geom_bar(aes(x='Nationality',fill='Nationality'),stat='identity')\n\nKeyError: 'y'\n\n\n\n에러가난다.\n\n(참고) 사실 아래의 3개의 코드가 모두 같다. <– 수업시간에 설명 X\n\nggplot(df)+geom_bar(aes(x='Nationality',y='..count..',fill='Nationality'),stat='count')\nggplot(df)+geom_bar(aes(x='Nationality',fill='Nationality'),stat='count') # y='..count..' 생략,\nggplot(df)+geom_bar(aes(x='Nationality',fill='Nationality')) # y='..count..' 생략, stat='count' 생략\n\n\n\n\n<ggplot: (8739004080929)>"
  },
  {
    "objectID": "posts/Day3/08_ggplot2/2023-02-01-Lesson19.html#geom_bar의-불편한점",
    "href": "posts/Day3/08_ggplot2/2023-02-01-Lesson19.html#geom_bar의-불편한점",
    "title": "Lesson 19: 심슨의 역설",
    "section": "geom_bar()의 불편한점",
    "text": "geom_bar()의 불편한점\n- 사실 편하라고 만든것 같은데, 그닥 편하지 않음.\n\n편하라고 만든 점1: groupby를 자동으로 해줘서 groupby를 못하는 유저들이 사용하기 편리하게 함 -> 그런데 우리는 groupby 잘함\n편하라고 만든 점2: groupby이후 count연산을 알아서 해줌 -> 그런데 count연산만 알아서해주고 그 이외의 연산은 잘 지원안됨\n\n- 결론: groupby + count 조합에서만 편리하고 나머지는 편하지 않다.\n- 불편한 예시: 나라별 overall의 평균을 geom_bar()로 플랏해보라.\n\ndata= df.groupby('Nationality').agg({'Overall':np.mean}).reset_index()\ndata\n\n\n\n\n\n  \n    \n      \n      Nationality\n      Overall\n    \n  \n  \n    \n      0\n      Japan\n      66.478873\n    \n    \n      1\n      Korea Republic\n      65.457627\n    \n  \n\n\n\n\n\nggplot(data)+geom_bar(aes(x='Nationality',y='Overall',fill='Nationality'),stat='identity')\nggplot(data)+geom_col(aes(x='Nationality',y='Overall',fill='Nationality'))\n\n\n\n\n<ggplot: (8738999896737)>"
  },
  {
    "objectID": "posts/Day3/08_ggplot2/2023-02-01-Lesson19.html#시각화1-전체합격률",
    "href": "posts/Day3/08_ggplot2/2023-02-01-Lesson19.html#시각화1-전체합격률",
    "title": "Lesson 19: 심슨의 역설",
    "section": "시각화1: 전체합격률",
    "text": "시각화1: 전체합격률\n- df1\n\ndf.groupby(['gender','result']).agg({'count':np.sum}).reset_index()\n\n\n\n\n\n  \n    \n      \n      gender\n      result\n      count\n    \n  \n  \n    \n      0\n      female\n      fail\n      1063\n    \n    \n      1\n      female\n      pass\n      772\n    \n    \n      2\n      male\n      fail\n      1291\n    \n    \n      3\n      male\n      pass\n      1400\n    \n  \n\n\n\n\n- df2\n\ndf.groupby('gender').agg({'count':np.sum}).reset_index().rename({'count':'count2'},axis=1)\n\n\n\n\n\n  \n    \n      \n      gender\n      count2\n    \n  \n  \n    \n      0\n      female\n      1835\n    \n    \n      1\n      male\n      2691\n    \n  \n\n\n\n\n- merge: 두개의 데이터프레임을 합친다\n\ndf.groupby(['gender','result']).agg({'count':np.sum}).reset_index()\\\n.merge(df.groupby('gender').agg({'count':np.sum}).reset_index().rename({'count':'count2'},axis=1))\n\n\n\n\n\n  \n    \n      \n      gender\n      result\n      count\n      count2\n    \n  \n  \n    \n      0\n      female\n      fail\n      1063\n      1835\n    \n    \n      1\n      female\n      pass\n      772\n      1835\n    \n    \n      2\n      male\n      fail\n      1291\n      2691\n    \n    \n      3\n      male\n      pass\n      1400\n      2691\n    \n  \n\n\n\n\n- 비율계산\n\ndf.groupby(['gender','result']).agg({'count':np.sum}).reset_index()\\\n.merge(df.groupby('gender').agg({'count':np.sum}).reset_index().rename({'count':'count2'},axis=1))\\\n.eval('rate = count/count2')\n\n\n\n\n\n  \n    \n      \n      gender\n      result\n      count\n      count2\n      rate\n    \n  \n  \n    \n      0\n      female\n      fail\n      1063\n      1835\n      0.579292\n    \n    \n      1\n      female\n      pass\n      772\n      1835\n      0.420708\n    \n    \n      2\n      male\n      fail\n      1291\n      2691\n      0.479747\n    \n    \n      3\n      male\n      pass\n      1400\n      2691\n      0.520253\n    \n  \n\n\n\n\n- 시각화\n\ndata1= df.groupby(['gender','result']).agg({'count':np.sum}).reset_index()\\\n.merge(df.groupby('gender').agg({'count':np.sum}).reset_index().rename({'count':'count2'},axis=1))\\\n.eval('rate = count/count2')\nggplot(data1.query('result==\"pass\"'))+geom_col(aes(x='gender',fill='gender',y='rate'))\n\n\n\n\n<ggplot: (8789343060161)>\n\n\n- 결론: 남자의 합격률이 더 높다. \\(\\to\\) 성차별이 있어보인다(?)"
  },
  {
    "objectID": "posts/Day3/08_ggplot2/2023-02-01-Lesson19.html#시각화2-학과별-합격률",
    "href": "posts/Day3/08_ggplot2/2023-02-01-Lesson19.html#시각화2-학과별-합격률",
    "title": "Lesson 19: 심슨의 역설",
    "section": "시각화2: 학과별 합격률",
    "text": "시각화2: 학과별 합격률\n- df2\n\ndf.groupby(['department','gender']).agg({'count':np.sum}).reset_index().rename({'count':'count2'},axis=1)\n\n\n\n\n\n  \n    \n      \n      department\n      gender\n      count2\n    \n  \n  \n    \n      0\n      A\n      female\n      108\n    \n    \n      1\n      A\n      male\n      825\n    \n    \n      2\n      B\n      female\n      25\n    \n    \n      3\n      B\n      male\n      560\n    \n    \n      4\n      C\n      female\n      593\n    \n    \n      5\n      C\n      male\n      325\n    \n    \n      6\n      D\n      female\n      375\n    \n    \n      7\n      D\n      male\n      417\n    \n    \n      8\n      E\n      female\n      393\n    \n    \n      9\n      E\n      male\n      191\n    \n    \n      10\n      F\n      female\n      341\n    \n    \n      11\n      F\n      male\n      373\n    \n  \n\n\n\n\n- merge\n\ndf.merge(df.groupby(['department','gender']).agg({'count':np.sum}).reset_index().rename({'count':'count2'},axis=1))\\\n.eval('rate = count/count2')\n\n\n\n\n\n  \n    \n      \n      department\n      result\n      gender\n      count\n      count2\n      rate\n    \n  \n  \n    \n      0\n      A\n      fail\n      female\n      19\n      108\n      0.175926\n    \n    \n      1\n      A\n      pass\n      female\n      89\n      108\n      0.824074\n    \n    \n      2\n      A\n      fail\n      male\n      314\n      825\n      0.380606\n    \n    \n      3\n      A\n      pass\n      male\n      511\n      825\n      0.619394\n    \n    \n      4\n      B\n      fail\n      female\n      7\n      25\n      0.280000\n    \n    \n      5\n      B\n      pass\n      female\n      18\n      25\n      0.720000\n    \n    \n      6\n      B\n      fail\n      male\n      208\n      560\n      0.371429\n    \n    \n      7\n      B\n      pass\n      male\n      352\n      560\n      0.628571\n    \n    \n      8\n      C\n      fail\n      female\n      391\n      593\n      0.659359\n    \n    \n      9\n      C\n      pass\n      female\n      202\n      593\n      0.340641\n    \n    \n      10\n      C\n      fail\n      male\n      204\n      325\n      0.627692\n    \n    \n      11\n      C\n      pass\n      male\n      121\n      325\n      0.372308\n    \n    \n      12\n      D\n      fail\n      female\n      244\n      375\n      0.650667\n    \n    \n      13\n      D\n      pass\n      female\n      131\n      375\n      0.349333\n    \n    \n      14\n      D\n      fail\n      male\n      279\n      417\n      0.669065\n    \n    \n      15\n      D\n      pass\n      male\n      138\n      417\n      0.330935\n    \n    \n      16\n      E\n      fail\n      female\n      299\n      393\n      0.760814\n    \n    \n      17\n      E\n      pass\n      female\n      94\n      393\n      0.239186\n    \n    \n      18\n      E\n      fail\n      male\n      137\n      191\n      0.717277\n    \n    \n      19\n      E\n      pass\n      male\n      54\n      191\n      0.282723\n    \n    \n      20\n      F\n      fail\n      female\n      103\n      341\n      0.302053\n    \n    \n      21\n      F\n      pass\n      female\n      238\n      341\n      0.697947\n    \n    \n      22\n      F\n      fail\n      male\n      149\n      373\n      0.399464\n    \n    \n      23\n      F\n      pass\n      male\n      224\n      373\n      0.600536\n    \n  \n\n\n\n\n- 시각화\n\ndata2=df.merge(df.groupby(['department','gender']).agg({'count':np.sum}).reset_index().rename({'count':'count2'},axis=1))\\\n.eval('rate = count/count2')\nggplot(data2.query('result==\"pass\"'))+geom_col(aes(x='gender',fill='gender',y='rate'))\\\n+facet_wrap('department')\n\n\n\n\n<ggplot: (8789343111249)>\n\n\n\n학과별로 살펴보니 오히려 A,B,F,D의 경우 여성의 합격률이 높다.\n\n- 교재에서 설명한 이유: 여성이 합격률이 낮은 학과에만 많이 지원하였기 때문\n\nggplot(data2.query('result==\"pass\"'))+geom_col(aes(x='department',y='count2',fill='gender'),position='dodge')\n\n\n\n\n<ggplot: (8789343070225)>\n\n\n\n살펴보니 합격률이 높은 A,B학과의 경우 상대적으로 남성이 많이 지원하였음. 합격률이 낮은 C,D학과는 상대적으로 여성이 많이 지원함. D,F의 지원수는 비슷"
  },
  {
    "objectID": "posts/Day3/09_PandasBackend/2023-02-01-Lesson16.html#애드워드-터프티",
    "href": "posts/Day3/09_PandasBackend/2023-02-01-Lesson16.html#애드워드-터프티",
    "title": "Lesson 16: 고차원 자료의 시각화 (with plotnine)",
    "section": "애드워드 터프티",
    "text": "애드워드 터프티\n- 데이터 시각화계의 거장\n- 터프티의 이론중 백미: 엄격한 미니멀리즘\n\n최소한의 잉크로 많은 정보를 전달할 수 있다면 그것이 바로 좋은 그래프이다.\n작은 지면 내에서 잉크를 최대한 적게 써서 짧은 시간 안에 많은 영감을 주어야 한다.\n\n- 데이터-잉크비: 데이터를 표현하는데 들아가는 잉크의 양 / 그래픽을 인쇄하는데 들어가는 잉크의 총량\n- 차트정크 (나이젤홈즈의 그래프)\n\n\n“Lurking behind chartjunk is contempt both for information and for the audience. Chartjunk promoters imagine that numbers and details are boring, dull, and tedious, requiring ornament to enliven. Cosmetic decoration, which frequently distorts the data, will never salvage an underlying lack of content. If the numbers are boring, then you’ve got the wrong numbers (…) Worse is contempt for our audience, designing as if readers were obtuse and uncaring. In fact, consumers of graphics are often more intelligent about the information at hand than those who fabricate the data decoration (…) The operating moral premise of information design should be that our readers are alert and caring; they may be busy, eager to get on with it, but they are not stupid.”\n\n\n차트정크 = 대중을 멸시 + 데이터에 대한 모독\n차트정크 옹호가는 숫자와 데이터가 지루하여 활기가 필요하다고 생각하는 모양이다..\n\n- 별로인 그래프 (왼쪽) / 우수한 그래프 오른쪽\n\n- 별로인 그래프 (왼쪽) / 우수한 그래프 오른쪽\n\n- 별로인 그래프 (왼쪽) / 우수한 그래프 오른쪽\n\n- 제 생각: 글쎄…"
  },
  {
    "objectID": "posts/Day3/09_PandasBackend/2023-02-01-Lesson16.html#찰스미나드의-도표",
    "href": "posts/Day3/09_PandasBackend/2023-02-01-Lesson16.html#찰스미나드의-도표",
    "title": "Lesson 16: 고차원 자료의 시각화 (with plotnine)",
    "section": "찰스미나드의 도표",
    "text": "찰스미나드의 도표\n\n인류역사상 가장 훌륭한 시각화\n\n\n- 터프티의 평\n\n지금까지 그려진 최고의 통계 그래픽일지도 모른다.\n여기에서는 군대의 크기, 2차원 평면상의 위치, 군대의 이동방향, 모스코바에서 퇴각하는 동안의 여러날짜, 온도 \\(\\to\\) 6차원의 변수\n백만번에 한번 이런 그림을 그릴수는 있겠지만 이러한 멋진 그래픽을 만드는 방법에 대한 원칙은 없다. \\(\\to\\) 미니멀리즘..\n\n- 왜 우수한 그래프일까?\n\n자료를 파악하는 기법은 최근까지도 산점도, 막대그래프, 라인플랏에 의존\n이러한 플랏의 단점은 고차원의 자료를 분석하기 어렵다는 것임\n미나드는 여러그램을 그리는 방법 대신에 한 그림에서 패널을 늘리는 방법을 선택함."
  },
  {
    "objectID": "posts/Day3/09_PandasBackend/2023-02-01-Lesson16.html#미나드처럼-그리는게-왜-어려운가",
    "href": "posts/Day3/09_PandasBackend/2023-02-01-Lesson16.html#미나드처럼-그리는게-왜-어려운가",
    "title": "Lesson 16: 고차원 자료의 시각화 (with plotnine)",
    "section": "미나드처럼 그리는게 왜 어려운가?",
    "text": "미나드처럼 그리는게 왜 어려운가?\n- 몸무게, 키, 성별, 국적\n\ndf1=pd.read_csv('https://raw.githubusercontent.com/guebin/DV2022/master/posts/male1.csv')\ndf2=pd.read_csv('https://raw.githubusercontent.com/guebin/DV2022/master/posts/male2.csv')  \ndf3=pd.read_csv('https://raw.githubusercontent.com/guebin/DV2022/master/posts/female.csv') \ndf4=pd.read_csv('https://raw.githubusercontent.com/guebin/DV2022/master/posts/foreign.csv')\n\n- 미나드의 접근방법\n\n_df = pd.concat([pd.concat([df1,df2],axis=1).assign(g='m'),df3.assign(g='f')])\ndf = pd.concat([_df.assign(g2='korea'),df4.assign(g2='foreign')]).reset_index(drop=True)\ndf\n\n\n\n\n\n  \n    \n      \n      w\n      h\n      g\n      g2\n    \n  \n  \n    \n      0\n      72.788217\n      183.486773\n      m\n      korea\n    \n    \n      1\n      66.606430\n      173.599877\n      m\n      korea\n    \n    \n      2\n      69.806324\n      173.237903\n      m\n      korea\n    \n    \n      3\n      67.449439\n      173.223805\n      m\n      korea\n    \n    \n      4\n      70.463183\n      174.931946\n      m\n      korea\n    \n    \n      ...\n      ...\n      ...\n      ...\n      ...\n    \n    \n      1525\n      78.154632\n      188.324350\n      m\n      foreign\n    \n    \n      1526\n      74.754308\n      183.017979\n      f\n      foreign\n    \n    \n      1527\n      91.196208\n      190.100456\n      m\n      foreign\n    \n    \n      1528\n      87.770394\n      187.987255\n      m\n      foreign\n    \n    \n      1529\n      88.021995\n      193.456798\n      m\n      foreign\n    \n  \n\n1530 rows × 4 columns\n\n\n\n\nsns.scatterplot(data=df,x='w',y='h',hue='g',style='g2')\n\n<AxesSubplot:xlabel='w', ylabel='h'>\n\n\n\n\n\n- 어려운점: (1) 센스가 없어서 hue/style을 이용하여 그룹을 구분할 생각을 못함 (2) long df (=tidy data) 형태로 데이터를 정리할 생각을 못함 (3) long df 형태로 데이터를 변형하는 코드를 모름\n\n기획력부족 -> 훌륭한 시각화를 많이 볼 것\n데이터프레임에 대한 이해부족 -> tidydata에 대한 개념\n프로그래밍 능력 -> 코딩공부열심히 (pandas를 엄청 잘해야함)"
  },
  {
    "objectID": "posts/Day3/09_PandasBackend/2023-02-01-Lesson16.html#data-설명",
    "href": "posts/Day3/09_PandasBackend/2023-02-01-Lesson16.html#data-설명",
    "title": "Lesson 16: 고차원 자료의 시각화 (with plotnine)",
    "section": "data 설명",
    "text": "data 설명\n- displ: 자동차의 엔진크기\n- hwy: 연료의 효율, 동일한 연료로 얼마나 멀리 가느냐?\n- 자세한 설명은 R에서 ?mpg를 이용해 스스로 찾아볼 것"
  },
  {
    "objectID": "posts/Day3/09_PandasBackend/2023-02-01-Lesson16.html#python에서-plotnine을-이용한-산점도",
    "href": "posts/Day3/09_PandasBackend/2023-02-01-Lesson16.html#python에서-plotnine을-이용한-산점도",
    "title": "Lesson 16: 고차원 자료의 시각화 (with plotnine)",
    "section": "python에서: plotnine을 이용한 산점도",
    "text": "python에서: plotnine을 이용한 산점도\n\nggplot(data=mpg) + geom_point(mapping=aes(x='displ',y='hwy')) ## plotnine\n\n\n\n\n<ggplot: (8775336983373)>\n\n\n\n산점도 해석: 엔진크기가 클수록 효율이 낮음.\n\n- 빠르게 그리기: data=와 mapping=은 생략가능함\n\nggplot(mpg) + geom_point(aes(x='displ',y='hwy')) ## plotnine\n\n\n\n\n<ggplot: (8775336295029)>"
  },
  {
    "objectID": "posts/Day3/09_PandasBackend/2023-02-01-Lesson16.html#객체지향적인-느낌으로-산점도-그리기",
    "href": "posts/Day3/09_PandasBackend/2023-02-01-Lesson16.html#객체지향적인-느낌으로-산점도-그리기",
    "title": "Lesson 16: 고차원 자료의 시각화 (with plotnine)",
    "section": "객체지향적인 느낌으로 산점도 그리기",
    "text": "객체지향적인 느낌으로 산점도 그리기\nstep1: 도화지를 준비한다.\n\nfig = ggplot(data=mpg)\nfig\n\n\n\n\n<ggplot: (8775336276849)>\n\n\nstep2 변수와 에스테틱사이의 맵핑을 설정한다.\n\na1= aes(x='displ',y='hwy')\na1\n\n{'x': 'displ', 'y': 'hwy'}\n\n\nstep3 점들의 집합을 만든다. 즉 포인트 지옴을 만든다.\n\npoint1=geom_point(mapping=a1)\n\n\ngeom_point(): 점들을 그려! 어떻게?\na1에서 설정된 표를 보고\n\nstep4 도화지와 지옴을 합친다.\n\nfig+point1\n\n\n\n\n<ggplot: (8775335422437)>"
  },
  {
    "objectID": "posts/Day3/09_PandasBackend/2023-02-01-Lesson16.html#산점도-점크기변경",
    "href": "posts/Day3/09_PandasBackend/2023-02-01-Lesson16.html#산점도-점크기변경",
    "title": "Lesson 16: 고차원 자료의 시각화 (with plotnine)",
    "section": "산점도 + 점크기변경",
    "text": "산점도 + 점크기변경\n\nggplot(data=mpg) + geom_point(mapping = aes(x='displ',y='hwy',size='class'))\n\n/home/cgb4/anaconda3/envs/py37/lib/python3.7/site-packages/plotnine/scales/scale_size.py:50: PlotnineWarning: Using size for a discrete variable is not advised.\n\n\n\n\n\n<ggplot: (8726734563561)>"
  },
  {
    "objectID": "posts/Day3/09_PandasBackend/2023-02-01-Lesson16.html#산점도-투명도변경",
    "href": "posts/Day3/09_PandasBackend/2023-02-01-Lesson16.html#산점도-투명도변경",
    "title": "Lesson 16: 고차원 자료의 시각화 (with plotnine)",
    "section": "산점도 + 투명도변경",
    "text": "산점도 + 투명도변경\n\nggplot(data=mpg) + geom_point(mapping = aes(x='displ',y='hwy',alpha='class'))\n\n/home/cgb4/anaconda3/envs/py37/lib/python3.7/site-packages/plotnine/scales/scale_alpha.py:70: PlotnineWarning: Using alpha for a discrete variable is not advised.\n\n\n\n\n\n<ggplot: (8726734989121)>"
  },
  {
    "objectID": "posts/Day3/09_PandasBackend/2023-02-01-Lesson16.html#산점도-투명도점크기를-동시에-적용",
    "href": "posts/Day3/09_PandasBackend/2023-02-01-Lesson16.html#산점도-투명도점크기를-동시에-적용",
    "title": "Lesson 16: 고차원 자료의 시각화 (with plotnine)",
    "section": "산점도 + 투명도/점크기를 동시에 적용",
    "text": "산점도 + 투명도/점크기를 동시에 적용\n\nggplot(data=mpg) + geom_point(mapping = aes(x='displ',y='hwy',alpha='class',size='class'))\n\n/home/cgb4/anaconda3/envs/py37/lib/python3.7/site-packages/plotnine/scales/scale_alpha.py:70: PlotnineWarning: Using alpha for a discrete variable is not advised.\n/home/cgb4/anaconda3/envs/py37/lib/python3.7/site-packages/plotnine/scales/scale_size.py:50: PlotnineWarning: Using size for a discrete variable is not advised.\n\n\n\n\n\n<ggplot: (8726734522405)>"
  },
  {
    "objectID": "posts/Day3/09_PandasBackend/2023-02-01-Lesson16.html#산점도-형태",
    "href": "posts/Day3/09_PandasBackend/2023-02-01-Lesson16.html#산점도-형태",
    "title": "Lesson 16: 고차원 자료의 시각화 (with plotnine)",
    "section": "산점도 + 형태",
    "text": "산점도 + 형태\n\nggplot(data=mpg) + geom_point(mapping = aes(x='displ',y='hwy',shape='class'))\n\n\n\n\n<ggplot: (8726734265229)>"
  },
  {
    "objectID": "posts/Day3/09_PandasBackend/2023-02-01-Lesson16.html#산점도-색깔",
    "href": "posts/Day3/09_PandasBackend/2023-02-01-Lesson16.html#산점도-색깔",
    "title": "Lesson 16: 고차원 자료의 시각화 (with plotnine)",
    "section": "산점도 + 색깔",
    "text": "산점도 + 색깔\n\nggplot(data=mpg) + geom_point(mapping = aes(x='displ',y='hwy',color='class'))\n\n\n\n\n<ggplot: (8726734017473)>"
  },
  {
    "objectID": "posts/Day3/09_PandasBackend/2023-02-01-Lesson16.html#객체지향적-느낌으로",
    "href": "posts/Day3/09_PandasBackend/2023-02-01-Lesson16.html#객체지향적-느낌으로",
    "title": "Lesson 16: 고차원 자료의 시각화 (with plotnine)",
    "section": "객체지향적 느낌으로?",
    "text": "객체지향적 느낌으로?\n\na2 = aes(x='displ', y='hwy', color='class') \n\n\na1,a2\n\n({'x': 'displ', 'y': 'hwy'}, {'x': 'displ', 'y': 'hwy', 'color': 'class'})\n\n\n\npoint2=geom_point(a2)\n\n\nfig+point2\n\n\n\n\n<ggplot: (8775335353217)>"
  },
  {
    "objectID": "posts/Day3/09_PandasBackend/2023-02-01-Lesson16.html#산점도-색깔-적합선",
    "href": "posts/Day3/09_PandasBackend/2023-02-01-Lesson16.html#산점도-색깔-적합선",
    "title": "Lesson 16: 고차원 자료의 시각화 (with plotnine)",
    "section": "산점도 + 색깔 + 적합선",
    "text": "산점도 + 색깔 + 적합선\n- 일단 색깔이 없는 포인트 지옴부터 연습\n\nfig+point1\n\n\n\n\n<ggplot: (8775335332061)>\n\n\n\nline1 = geom_smooth(a1)\n\n\nfig+point1+line1\n\n/home/cgb2/anaconda3/envs/py37/lib/python3.7/site-packages/plotnine/stats/smoothers.py:311: PlotnineWarning: Confidence intervals are not yet implementedfor lowess smoothings.\n\n\n\n\n\n<ggplot: (8775334960069)>\n\n\n- point1(색깔없는 포인트 지옴)을 point2(색깔있는 포인트 지옴)으로 언제든지 바꿔치기 가능!\n\nfig+point2+line1\n\n/home/cgb4/anaconda3/envs/py37/lib/python3.7/site-packages/plotnine/stats/smoothers.py:311: PlotnineWarning: Confidence intervals are not yet implementedfor lowess smoothings.\n\n\n\n\n\n<ggplot: (8726732661565)>\n\n\n- 명령어로 한번에 그리기\n\nggplot(data=mpg) + \\\ngeom_point(mapping=aes(x='displ',y='hwy',color='class')) + \\\ngeom_smooth(mapping=aes(x='displ',y='hwy'))\n\n/home/cgb4/anaconda3/envs/py37/lib/python3.7/site-packages/plotnine/stats/smoothers.py:311: PlotnineWarning: Confidence intervals are not yet implementedfor lowess smoothings.\n\n\n\n\n\n<ggplot: (8726732727485)>\n\n\n- 공통적인 맵핑규칙은 ggplot()쪽으로 빼기도 한다. (figure를 선언하는 곳에서 공통으로 선언함)\n\nggplot(data=mpg,mapping=aes(x='displ',y='hwy')) + \\\ngeom_point(mapping=aes(color='class')) + \\\ngeom_smooth()\n\n/home/cgb4/anaconda3/envs/py37/lib/python3.7/site-packages/plotnine/stats/smoothers.py:311: PlotnineWarning: Confidence intervals are not yet implementedfor lowess smoothings.\n\n\n\n\n\n<ggplot: (8726733489953)>"
  },
  {
    "objectID": "posts/Day3/09_PandasBackend/2023-02-01-Lesson16.html#산점도-점크기변경-색깔",
    "href": "posts/Day3/09_PandasBackend/2023-02-01-Lesson16.html#산점도-점크기변경-색깔",
    "title": "Lesson 16: 고차원 자료의 시각화 (with plotnine)",
    "section": "산점도 + 점크기변경 + 색깔",
    "text": "산점도 + 점크기변경 + 색깔\n- drv (전륜, 후륜, 4륜 구동)에 따라서 데이터를 시각화 하고 싶다.\n\nggplot(data=mpg, mapping=aes(x='displ',y='hwy')) + geom_point(mapping=aes(size='class',color='drv'),alpha=0.3)\n\n/home/cgb4/anaconda3/envs/py37/lib/python3.7/site-packages/plotnine/scales/scale_size.py:50: PlotnineWarning: Using size for a discrete variable is not advised.\n\n\n\n\n\n<ggplot: (8726731152845)>\n\n\n\n모든 \\(x\\)에 대하여 붉은색 점들이 대부분 초록색과 보라색 점들에 비하여 아래쪽에 있음 \\(\\to\\) 4륜구동방식이 연비가 좋지 않음"
  },
  {
    "objectID": "posts/Day3/09_PandasBackend/2023-02-01-Lesson16.html#산점도-점크기변경-색깔-객체지향버전",
    "href": "posts/Day3/09_PandasBackend/2023-02-01-Lesson16.html#산점도-점크기변경-색깔-객체지향버전",
    "title": "Lesson 16: 고차원 자료의 시각화 (with plotnine)",
    "section": "산점도 + 점크기변경 + 색깔 (객체지향버전)",
    "text": "산점도 + 점크기변경 + 색깔 (객체지향버전)\n- 맵핑규칙\n\na1,a2\n\n({'x': 'displ', 'y': 'hwy'}, {'x': 'displ', 'y': 'hwy', 'color': 'class'})\n\n\n\na3 = a2.copy() \n\n\na3['color'] = 'drv'\na3['size'] = 'class'\na3\n\n{'x': 'displ', 'y': 'hwy', 'color': 'drv', 'size': 'class'}\n\n\n\n아래와 같이 선언해도 괜찮음\n\na3= aes(x='displ',y='hwy',color='drv',size='class')\n\npoint3=geom_point(a3)\n\n\nfig+point3\n\n/home/cgb2/anaconda3/envs/py37/lib/python3.7/site-packages/plotnine/scales/scale_size.py:50: PlotnineWarning: Using size for a discrete variable is not advised.\n\n\n\n\n\n<ggplot: (8775334891765)>\n\n\n\n그림의 전체적인 투명도를 조절하면 좋겠음\n\n\npoint3=geom_point(a3,alpha=0.2)\nfig+point3\n\n/home/cgb2/anaconda3/envs/py37/lib/python3.7/site-packages/plotnine/scales/scale_size.py:50: PlotnineWarning: Using size for a discrete variable is not advised.\n\n\n\n\n\n<ggplot: (8775333161077)>"
  },
  {
    "objectID": "posts/Day3/09_PandasBackend/2023-02-01-Lesson16.html#산점도-점크기변경-색깔-선추가",
    "href": "posts/Day3/09_PandasBackend/2023-02-01-Lesson16.html#산점도-점크기변경-색깔-선추가",
    "title": "Lesson 16: 고차원 자료의 시각화 (with plotnine)",
    "section": "산점도 + 점크기변경 + 색깔 + 선추가",
    "text": "산점도 + 점크기변경 + 색깔 + 선추가\n\nfig+point3+line1\n\n/home/cgb4/anaconda3/envs/py37/lib/python3.7/site-packages/plotnine/scales/scale_size.py:50: PlotnineWarning: Using size for a discrete variable is not advised.\n/home/cgb4/anaconda3/envs/py37/lib/python3.7/site-packages/plotnine/stats/smoothers.py:311: PlotnineWarning: Confidence intervals are not yet implementedfor lowess smoothings.\n\n\n\n\n\n<ggplot: (8726730575253)>"
  },
  {
    "objectID": "posts/Day3/09_PandasBackend/2023-02-01-Lesson16.html#산점도-점크기변경-색깔-drv별로-선추가",
    "href": "posts/Day3/09_PandasBackend/2023-02-01-Lesson16.html#산점도-점크기변경-색깔-drv별로-선추가",
    "title": "Lesson 16: 고차원 자료의 시각화 (with plotnine)",
    "section": "산점도 + 점크기변경 + 색깔 + drv별로 선추가",
    "text": "산점도 + 점크기변경 + 색깔 + drv별로 선추가\n- 맵핑규칙\n\na1,a2,a3\n\n({'x': 'displ', 'y': 'hwy'},\n {'x': 'displ', 'y': 'hwy', 'color': 'class'},\n {'x': 'displ', 'y': 'hwy', 'color': 'drv', 'size': 'class'})\n\n\n\na4 = a2.copy() \na4['color']='drv'\na4\n\n{'x': 'displ', 'y': 'hwy', 'color': 'drv'}\n\n\n\nline2 = geom_smooth(a4)\n\n\nfig + point3 +line2\n\n/home/cgb2/anaconda3/envs/py37/lib/python3.7/site-packages/plotnine/scales/scale_size.py:50: PlotnineWarning: Using size for a discrete variable is not advised.\n/home/cgb2/anaconda3/envs/py37/lib/python3.7/site-packages/plotnine/stats/smoothers.py:311: PlotnineWarning: Confidence intervals are not yet implementedfor lowess smoothings.\n\n\n\n\n\n<ggplot: (8775336209333)>\n\n\n- 선의 색깔을 동일하게 하고 선의 타입을 변경하여 drv를 표시하고 싶다면?\n\na1,a2,a3,a4\n\n({'x': 'displ', 'y': 'hwy'},\n {'x': 'displ', 'y': 'hwy', 'color': 'class'},\n {'x': 'displ', 'y': 'hwy', 'color': 'drv', 'size': 'class'},\n {'x': 'displ', 'y': 'hwy', 'color': 'drv'})\n\n\n\na5=a1.copy()\na5['linetype']='drv' \na5\n\n{'x': 'displ', 'y': 'hwy', 'linetype': 'drv'}\n\n\n\nline3 = geom_smooth(a5,size=0.5,color='gray')\n\n\nfig+point3+line3\n\n/home/cgb4/anaconda3/envs/py37/lib/python3.7/site-packages/plotnine/scales/scale_size.py:50: PlotnineWarning: Using size for a discrete variable is not advised.\n/home/cgb4/anaconda3/envs/py37/lib/python3.7/site-packages/plotnine/stats/smoothers.py:311: PlotnineWarning: Confidence intervals are not yet implementedfor lowess smoothings.\n\n\n\n\n\n<ggplot: (8726732637457)>\n\n\n- 전체적인 추세선도 추가하고 싶다면?\n\nfig+point3+line3+line1\n\n/home/cgb4/anaconda3/envs/py37/lib/python3.7/site-packages/plotnine/scales/scale_size.py:50: PlotnineWarning: Using size for a discrete variable is not advised.\n/home/cgb4/anaconda3/envs/py37/lib/python3.7/site-packages/plotnine/stats/smoothers.py:311: PlotnineWarning: Confidence intervals are not yet implementedfor lowess smoothings.\n\n\n\n\n\n<ggplot: (8726732939513)>\n\n\n- 그려보니까 역시 drv별로 그려지는 추세선은 색깔별로 구분하는게 좋겠음.\n\nline2 = geom_smooth(a4,size=0.5,linetype='dashed')\nfig+point3+line2+line1\n\n/home/cgb4/anaconda3/envs/py37/lib/python3.7/site-packages/plotnine/scales/scale_size.py:50: PlotnineWarning: Using size for a discrete variable is not advised.\n/home/cgb4/anaconda3/envs/py37/lib/python3.7/site-packages/plotnine/stats/smoothers.py:311: PlotnineWarning: Confidence intervals are not yet implementedfor lowess smoothings.\n\n\n\n\n\n<ggplot: (8726733678229)>\n\n\n- 고차원을 변수를 표현할 수 있는 무기는 다양하다.\n\n산점도(포인트지옴): 점의크기, 점의형태, 점의색깔, 점의투명도\n라인플랏(스무스지옴,라인지옴): 선의형태, 선의색깔, 선의굵기"
  },
  {
    "objectID": "posts/Day3/09_PandasBackend/2023-02-01-Lesson17.html#toy-exam",
    "href": "posts/Day3/09_PandasBackend/2023-02-01-Lesson17.html#toy-exam",
    "title": "Lesson 17: 아이스크림을 많이 먹으면 걸리는 병",
    "section": "Toy exam",
    "text": "Toy exam\n- 교재의 예제상황은 예를들면 아래와 같다.\n(숨은진짜상황1)\n\\[\\text{아이스크림 판매량} = 20 + 2 \\times \\text{온도} + \\epsilon\\]\n\nnp.random.seed(1) \ntemp= np.array([-10.2, -5.2, 0.1, 10.1, 12.2, 14.7, \n                25.4, 26.8, 28.9, 35.1, 32.2, 34.6])\neps= np.random.normal(size=12,scale=5)\nicecream= 20 + temp * 2 + eps\n\n\nplt.plot(temp,icecream,'.')\n\n\n\n\n\n온도와 아이스크림 판매량의 산점도\n\n(숨은진짜상황2)\n\\[\\text{소아마비 반응수치} = 30 + 0.5 \\times \\text{온도} + \\epsilon\\] - 좌변은 소아마비임을 나타내는 어떠한 반응수치라고 생각하자.\n\nnp.random.seed(2) \neps = np.random.normal(size=12,scale=5) \ndisease = 30+ temp* 0.5 + eps\n\n\nplt.plot(temp,disease,'.')\n\n\n\n\n\n온도와 소아마비의 산점도\n\n(우리가 데이터로부터 관측한 상황)\n- 아이스크림과 질병의 산점도를 그려보자.\n\nplt.plot(icecream,disease,'.')\n\n\n\n\n\n양의 상관관계에 있다.\n\n- 아이스크림 중 어떠한 물질이 소아마비를 일으키는것이 분명하므로 (인과성이 분명해보이니까) 아래와 같은 모형을 세우자. <– 여기서부터 틀렸음\n\\[{\\tt disease}_i =\\beta_0 +\\beta_1 {\\tt icecream}_i +\\epsilon_i,\\quad \\textbf{for} ~~ i=1,2,\\dots, 12\\]\n- 적절한 \\(\\beta_0\\)와 \\(\\beta_1\\)을 추정하면 우리는 아이스크림과 소아마비의 관계를 알 수 있다. <– 틀린주장\n\n틀린 모형\n도데체 우리가 뭘 잘못했는가?\n\n- 두 변수 사이에 상관관계가 있어도 실제 원인은 다른 변수에 숨겨져 있는 경우가 많다.\n(ex1)\n\n온도 \\(\\to\\) 익사\n온도 \\(\\to\\) 아이스크림\n아이스크림과 익사자도 양의 상관관계에 있을것이다.\n아이스크림을 먹이면 물에 빠져 죽는다 \\(\\to\\) 틀린주장\n사실 기온이 숨겨진 원인이다. 기온이 증가하면 아이스크림 판매량도 증가하고 폭염때문에 익사사고율도 높아지는 구조이다.\n\n(ex2)\n\n인구수 \\(\\to\\) 교회\n인구수 \\(\\to\\) 범죄건수\n지역별 교회와 범죄건수를 살펴보면 상관관계가 높게 나올것임\n교회를 지으면 범죄건수도 증가한다? \\(\\to\\) 틀린주장\n사실 인구가 숨겨진 요인임\n\n- ex2, ex1에 대하여 바른 분석을 하려면?\n\nex2: 인구가 비슷한 도시끼리 묶어서 비교해보면 교회와 범죄의 건수는 양의 상관관계에 있지 않을것임\nex1: 온도가 비슷한 그룹끼리 묶어보자.\n\n- 올바른 분석: 온도가 비슷한 그룹끼리 묶어서 그려보자. \\(\\to\\) 상관계수가 줄어들 것이다.\n\nplt.plot(icecream[:6],disease[:6],'.')\n\n\n\n\n\nplt.plot(icecream[6:],disease[6:],'.')\n\n\n\n\n\n진짜로 선형관계가 약해졌다.."
  },
  {
    "objectID": "posts/Day3/09_PandasBackend/2023-02-01-Lesson17.html#자료생성-좀-더-그럴듯한-자료-만들기",
    "href": "posts/Day3/09_PandasBackend/2023-02-01-Lesson17.html#자료생성-좀-더-그럴듯한-자료-만들기",
    "title": "Lesson 17: 아이스크림을 많이 먹으면 걸리는 병",
    "section": "자료생성: 좀 더 그럴듯한 자료 (만들기)",
    "text": "자료생성: 좀 더 그럴듯한 자료 (만들기)\n- 지난 시간의 toy example은 데이터가 너무 작아서 억지스러움 \\(\\to\\) 기상자료개방포털, 회원가입해야 자료받을 수 있음.\n\n_df=pd.read_csv('https://raw.githubusercontent.com/guebin/DV2022/master/posts/temp.csv')\n_df\n\n\n\n\n\n  \n    \n      \n      지점번호\n      지점명\n      일시\n      평균기온(℃)\n      최고기온(℃)\n      최고기온시각\n      최저기온(℃)\n    \n  \n  \n    \n      0\n      146\n      전주\n      2020-01-01\n      -0.5\n      4.3\n      15:09\n      -6.4\n    \n    \n      1\n      146\n      전주\n      2020-01-02\n      1.4\n      6.5\n      14:12\n      -3.0\n    \n    \n      2\n      146\n      전주\n      2020-01-03\n      2.6\n      7.6\n      13:32\n      -0.5\n    \n    \n      3\n      146\n      전주\n      2020-01-04\n      2.0\n      7.7\n      13:51\n      -2.6\n    \n    \n      4\n      146\n      전주\n      2020-01-05\n      2.5\n      8.6\n      14:05\n      -3.2\n    \n    \n      ...\n      ...\n      ...\n      ...\n      ...\n      ...\n      ...\n      ...\n    \n    \n      651\n      146\n      전주\n      2021-10-13\n      19.9\n      25.5\n      14:29\n      15.6\n    \n    \n      652\n      146\n      전주\n      2021-10-14\n      20.4\n      25.5\n      13:36\n      17.0\n    \n    \n      653\n      146\n      전주\n      2021-10-15\n      18.3\n      22.0\n      13:47\n      15.7\n    \n    \n      654\n      146\n      전주\n      2021-10-16\n      12.8\n      17.4\n      0:01\n      6.5\n    \n    \n      655\n      146\n      전주\n      2021-10-17\n      6.7\n      12.4\n      15:18\n      2.2\n    \n  \n\n656 rows × 7 columns\n\n\n\n- 평균기온만 선택\n\npd.Series(_df.columns)\n\n0       지점번호\n1        지점명\n2         일시\n3    평균기온(℃)\n4    최고기온(℃)\n5     최고기온시각\n6    최저기온(℃)\ndtype: object\n\n\n\ntemp = np.array(_df.iloc[:,3])\ntemp[:5]\n\narray([-0.5,  1.4,  2.6,  2. ,  2.5])\n\n\n\n# 숨은진짜상황1: 온도 \\(\\to\\) 아이스크림 판매량\n- 아래와 같은 관계가 있다고 하자.\n\\[\\text{아이스크림 판매량} = 20 + 2 \\times \\text{온도} + \\epsilon\\]\n\nnp.random.seed(1)\neps = np.random.normal(size=len(temp), scale=10) \nicecream = 20 + 2*temp + eps\n\n\nplt.plot(temp,icecream,'o',alpha=0.3)\nplt.xlabel(\"temp\",size=15)\nplt.ylabel(\"icecream\",size=15)\n\nText(0, 0.5, 'icecream')\n\n\n\n\n\n\n\n# 숨은진짜상황1: 온도 \\(\\to\\) 아이스크림 판매량\n- 아래와 같은 관계가 있다고 하자.\n\\[\\text{소아마비 반응수치} = 30 + 0.5 \\times \\text{온도} + \\epsilon\\]\n\nnp.random.seed(2) \neps=np.random.normal(size=len(temp),scale=1)\ndisease= 30 + 0.5 * temp + eps\n\n\nplt.plot(temp,disease,'o',alpha=0.3)\nplt.xlabel(\"temp\",size=15)\nplt.ylabel(\"disease\",size=15)\n\nText(0, 0.5, 'disease')\n\n\n\n\n\n\n\n# 우리가 관측한 상황 (온도는 은닉되어있음)\n\nplt.plot(icecream,disease,'o',alpha=0.3)\nplt.xlabel(\"icecream\",size=15)\nplt.ylabel(\"disease\",size=15)\n\nText(0, 0.5, 'disease')\n\n\n\n\n\n\nnp.corrcoef(icecream,disease)\n\narray([[1.        , 0.86298975],\n       [0.86298975, 1.        ]])\n\n\n\n0.86정도.."
  },
  {
    "objectID": "posts/Day3/09_PandasBackend/2023-02-01-Lesson17.html#직관-여름만-뽑아서-plot-해보자.",
    "href": "posts/Day3/09_PandasBackend/2023-02-01-Lesson17.html#직관-여름만-뽑아서-plot-해보자.",
    "title": "Lesson 17: 아이스크림을 많이 먹으면 걸리는 병",
    "section": "직관: 여름만 뽑아서 plot 해보자.",
    "text": "직관: 여름만 뽑아서 plot 해보자.\n- temp>25 (여름으로 간주) 인 관측치만 플랏\n\nplt.plot(icecream[temp>25],disease[temp>25], 'o', color='C1') ## 평균기온이 25도가 넘어가면 여름이라 생각 \n\n\n\n\n- 전체적인 산점도\n\nfig , ((ax1,ax2), (ax3,ax4)) = plt.subplots(2,2,figsize=(8,6)) \nax1.plot(temp,icecream,'o',alpha=0.2); ax1.set_xlabel('temp'); ax1.set_ylabel('icecream'); ax1.set_title(\"hidden1\")\nax2.plot(temp,disease,'o',alpha=0.2); ax2.set_xlabel('temp'); ax2.set_ylabel('disease'); ax2.set_title(\"hidden2\")\nax3.plot(icecream,disease,'o',alpha=0.2); ax3.set_xlabel('icecream'); ax3.set_ylabel('disease'); ax3.set_title(\"observed\")\nax4.plot(icecream,disease,'o',alpha=0.2); ax4.set_xlabel('icecream'); ax4.set_ylabel('disease'); ax4.set_title(\"observed\")\nax4.plot(icecream[temp>25],disease[temp>25],'o',label='temp>25')\nax4.legend()\nfig.tight_layout()"
  },
  {
    "objectID": "posts/Day3/09_PandasBackend/2023-02-01-Lesson17.html#ggplot-온도구간을-세분화-하여-시각화",
    "href": "posts/Day3/09_PandasBackend/2023-02-01-Lesson17.html#ggplot-온도구간을-세분화-하여-시각화",
    "title": "Lesson 17: 아이스크림을 많이 먹으면 걸리는 병",
    "section": "ggplot: 온도구간을 세분화 하여 시각화",
    "text": "ggplot: 온도구간을 세분화 하여 시각화\n- 목표: 모든 온도구간에 대하여 각각 색을 다르게 하여 그려보자.\n\n사실 지금 변수는 온도, 아이스크림판매량, 소아마비\n온도가 유사한 지역을 색으로 묶으면 3차원 플랏이 가능함\n\n\n# df로 자료정리\n- 일단 데이터 프레임을 정리하자.\n\ndf = pd.DataFrame({'temp':temp,'icecream':icecream,'disease':disease})\ndf\n\n\n\n\n\n  \n    \n      \n      temp\n      icecream\n      disease\n    \n  \n  \n    \n      0\n      -0.5\n      35.243454\n      29.333242\n    \n    \n      1\n      1.4\n      16.682436\n      30.643733\n    \n    \n      2\n      2.6\n      19.918282\n      29.163804\n    \n    \n      3\n      2.0\n      13.270314\n      32.640271\n    \n    \n      4\n      2.5\n      33.654076\n      29.456564\n    \n    \n      ...\n      ...\n      ...\n      ...\n    \n    \n      651\n      19.9\n      68.839992\n      39.633906\n    \n    \n      652\n      20.4\n      76.554679\n      38.920443\n    \n    \n      653\n      18.3\n      68.666079\n      39.882650\n    \n    \n      654\n      12.8\n      42.771364\n      36.613159\n    \n    \n      655\n      6.7\n      30.736731\n      34.902513\n    \n  \n\n656 rows × 3 columns\n\n\n\n\n\n# 구간세분화\n- 온도를 카테고리화 하자 \\(\\to\\) 적당한 구긴을 설정하기 위해서 히스토그램을 그려보자.\n\ndf.temp.hist() # ? 이거 14주차쯤 배우는데 미리 스포합니다.. 엄청 편해요 \n\n<AxesSubplot:>\n\n\n\n\n\n\nplt.hist(df.temp) # 원래는 이걸 배웠죠\n\n(array([  3.,   9.,  29.,  60.,  92.,  86.,  65.,  93., 139.,  80.]),\n array([-12.4 ,  -8.16,  -3.92,   0.32,   4.56,   8.8 ,  13.04,  17.28,\n         21.52,  25.76,  30.  ]),\n <BarContainer object of 10 artists>)\n\n\n\n\n\n- 구간은 5정도로 하면 적당할 것 같다.\n\ndef cut(x): # 이거보다 더 좋은 방법이 있을 것 같긴 한데요..\n    if x<0: \n        y='Temp: <0'\n    elif x<5: \n        y='Temp: 0~5'\n    elif x<10: \n        y='Temp: 5~10'\n    elif x<15: \n        y='Temp: 10~15'\n    elif x<20:\n        y='Temp: 15~20'\n    elif x<25: \n        y='Temp: 20~25'\n    else: \n        y='Temp: >30'\n    return y \n\n\ndf.assign(temp2 = list(map(cut,df.temp)))\n\n\n\n\n\n  \n    \n      \n      temp\n      icecream\n      disease\n      temp2\n    \n  \n  \n    \n      0\n      -0.5\n      35.243454\n      29.333242\n      Temp: <0\n    \n    \n      1\n      1.4\n      16.682436\n      30.643733\n      Temp: 0~5\n    \n    \n      2\n      2.6\n      19.918282\n      29.163804\n      Temp: 0~5\n    \n    \n      3\n      2.0\n      13.270314\n      32.640271\n      Temp: 0~5\n    \n    \n      4\n      2.5\n      33.654076\n      29.456564\n      Temp: 0~5\n    \n    \n      ...\n      ...\n      ...\n      ...\n      ...\n    \n    \n      651\n      19.9\n      68.839992\n      39.633906\n      Temp: 15~20\n    \n    \n      652\n      20.4\n      76.554679\n      38.920443\n      Temp: 20~25\n    \n    \n      653\n      18.3\n      68.666079\n      39.882650\n      Temp: 15~20\n    \n    \n      654\n      12.8\n      42.771364\n      36.613159\n      Temp: 10~15\n    \n    \n      655\n      6.7\n      30.736731\n      34.902513\n      Temp: 5~10\n    \n  \n\n656 rows × 4 columns\n\n\n\n\n\n# ggplot\n- 온도를 색으로 구분하면\n\nfig = ggplot(data=df.assign(temp2 = list(map(cut,df.temp))))\np1 = geom_point(aes(x='icecream',y='disease',colour='temp2'),alpha=0.5)\nfig + p1\n\n\n\n\n<ggplot: (8762005360345)>\n\n\n- 추세선을 추가하면\n\nl1 = geom_smooth(aes(x='icecream',y='disease',colour='temp2'))\n\n\nfig+p1+l1\n\n/home/cgb4/anaconda3/envs/py37/lib/python3.7/site-packages/plotnine/stats/smoothers.py:311: PlotnineWarning: Confidence intervals are not yet implementedfor lowess smoothings.\n\n\n\n\n\n<ggplot: (8762010169613)>\n\n\n\n각 온도별로 추세선은 거의 기울기가 0이다. \\(\\to\\) 온도가 비슷한 구간별로 묶어서 보니까 상관관계가 없다는 거!\n아이스크림 판매량과 소아마비의 corr은 유의미해보이지만, 온도를 통제하였을 경우 아이스크림 판매량과 소아마비의 partial corr은 유의미해보이지 않음.\n\n\n\n# 해석\n- 해피앤딩: 온도를 통제하니까 아이스크림과 질병은 관련이 없어보인다. \\(\\to\\) 아이스크림을 먹으면 소아마비를 유발한다는 이상한 결론이 나올뻔 했지만 우리는 온도라는 흑막을 잘 찾았고 결과적으로 “온도->아이스크림판매량,소아마비” 이라는 합리적인 진리를 얻을 수 있었다.\n\n온도와 같은 변수를 은닉변수라고 한다.\n\n- 또 다른 흑막? 고려할 흑막이 온도뿐이라는 보장이 어디있지? 사실 흑막2, 흑막3이 있어서 그런 흑막들을 고려하다보니까 아이스크림과 소아마비사이의 상관관계가 다시 보이면 어떡하지?\n\n이러한 이유 때문에 상관계수로 인과성을 유추하는건 사실상 불가능.\n그런데 이론적으로는 “세상의 모든 은닉변수를 통제하였을 경우에도 corr(X,Y)의 값이 1에 가깝다면 그때는 인과성이 있다고 봐도 무방함, (물론 이 경우에도 무엇이 원인인지는 통계적으로 따지는것이 불가)” 이라고 주장할 수 있다. 즉 모든 흑막을 제거한다면 “상관성=인과성”이다.\n\n- 실험계획법, 인과추론: 세상의 모든 흑막을 제거하는건 상식적으로 불가능\n\n피셔의주장(실험계획법): 그런데 실험계획을 잘하면 흑막을 제거한 효과가 있음 (무작위로 사람뽑아서 담배를 피우게 한다든가)\n인과추론: 실험계획이 사실상 불가능한 경우가 있음 \\(\\to\\) 모인 데이터에서 최대한 흑막2,3,4,.. 등이 비슷한 그룹끼리 “매칭”을 시킨다!"
  },
  {
    "objectID": "posts/Day3/09_PandasBackend/2023-02-01-Lesson17.html#그냥-궁금해서-진짜-만약에-아이스크림과-소아마비가-관련있는-경우라면",
    "href": "posts/Day3/09_PandasBackend/2023-02-01-Lesson17.html#그냥-궁금해서-진짜-만약에-아이스크림과-소아마비가-관련있는-경우라면",
    "title": "Lesson 17: 아이스크림을 많이 먹으면 걸리는 병",
    "section": "그냥 궁금해서: 진짜 만약에 아이스크림과 소아마비가 관련있는 경우라면?",
    "text": "그냥 궁금해서: 진짜 만약에 아이스크림과 소아마비가 관련있는 경우라면?\n- 온도는 아이스크림 판매에 여전히 영향을 주지만\n\\[\\text{아이스크림 판매량} = 20 + 2 \\times \\text{온도} + \\epsilon\\]\n\nnp.random.seed(1)\neps=np.random.normal(size=len(temp), scale=10) \nicecream = 20 + 2 * temp + eps \n\n- 수영장이 원인이 아니라 진짜 아이스크림을 먹고 소아마비에 걸린상황이라면?\n\\[\\text{소아마비 반응수치} = 30 + 0 \\times \\text{온도} + 0.15 \\times \\text{아이스크림 판매량} + \\epsilon\\]\n\nnp.random.seed(2) \neps = np.random.normal(size=len(temp),scale=2)\ndisease= 30+ 0*temp + 0.15*icecream + eps\n\n\ndf2=pd.DataFrame({'temp':temp,'icecream':icecream,'disease':disease})\ndf2.assign(temp2=list(map(cut,df2.temp)))\n\n\n\n\n\n  \n    \n      \n      temp\n      icecream\n      disease\n      temp2\n    \n  \n  \n    \n      0\n      -0.5\n      35.243454\n      34.453002\n      Temp: <0\n    \n    \n      1\n      1.4\n      16.682436\n      32.389832\n      Temp: 0~5\n    \n    \n      2\n      2.6\n      19.918282\n      28.715350\n      Temp: 0~5\n    \n    \n      3\n      2.0\n      13.270314\n      35.271089\n      Temp: 0~5\n    \n    \n      4\n      2.5\n      33.654076\n      31.461240\n      Temp: 0~5\n    \n    \n      ...\n      ...\n      ...\n      ...\n      ...\n    \n    \n      651\n      19.9\n      68.839992\n      39.693811\n      Temp: 15~20\n    \n    \n      652\n      20.4\n      76.554679\n      38.924088\n      Temp: 20~25\n    \n    \n      653\n      18.3\n      68.666079\n      41.765212\n      Temp: 15~20\n    \n    \n      654\n      12.8\n      42.771364\n      36.842022\n      Temp: 10~15\n    \n    \n      655\n      6.7\n      30.736731\n      37.715537\n      Temp: 5~10\n    \n  \n\n656 rows × 4 columns\n\n\n\n\nggplot(data=df2.assign(temp2=list(map(cut,df2.temp))))+\\\ngeom_point(aes(x='icecream',y='disease',colour='temp2'),alpha=0.2)+\\\ngeom_smooth(aes(x='icecream',y='disease',colour='temp2'))\n\n/home/cgb4/anaconda3/envs/py37/lib/python3.7/site-packages/plotnine/stats/smoothers.py:311: PlotnineWarning: Confidence intervals are not yet implementedfor lowess smoothings.\n\n\n\n\n\n<ggplot: (8762005194073)>\n\n\n\n이번엔 partial corr도 유의미하게 나옴\n\n- 단순 corr을 봐서는 “온도->아이스크림,소아마비” 인지, “온도->아이스크림->소아마비” 인지 알기 어렵다.\n\ndf.corr()\n\n\n\n\n\n  \n    \n      \n      temp\n      icecream\n      disease\n    \n  \n  \n    \n      temp\n      1.000000\n      0.884366\n      0.975609\n    \n    \n      icecream\n      0.884366\n      1.000000\n      0.862990\n    \n    \n      disease\n      0.975609\n      0.862990\n      1.000000\n    \n  \n\n\n\n\n\ndf2.corr()\n\n\n\n\n\n  \n    \n      \n      temp\n      icecream\n      disease\n    \n  \n  \n    \n      temp\n      1.000000\n      0.884366\n      0.725505\n    \n    \n      icecream\n      0.884366\n      1.000000\n      0.830539\n    \n    \n      disease\n      0.725505\n      0.830539\n      1.000000"
  },
  {
    "objectID": "posts/Day3/09_PandasBackend/2023-02-01-Lesson18.html#fifa23-data",
    "href": "posts/Day3/09_PandasBackend/2023-02-01-Lesson18.html#fifa23-data",
    "title": "Lesson 18: FIFA23 자료분석",
    "section": "FIFA23 data",
    "text": "FIFA23 data\n- FIFA23라는 축구게임이 있음\n- 게임에 실제 선수들이 나오면서 선수들의 능력치가 세밀하게 구현되어 있음\n- 선수들 능력치에 대한 데이터셋은 캐글에 공개되어 있음 - https://www.kaggle.com/datasets/bryanb/fifa-player-stats-database?select=FIFA23_official_data.csv"
  },
  {
    "objectID": "posts/Day3/09_PandasBackend/2023-02-01-Lesson18.html#데이터살펴보기",
    "href": "posts/Day3/09_PandasBackend/2023-02-01-Lesson18.html#데이터살펴보기",
    "title": "Lesson 18: FIFA23 자료분석",
    "section": "데이터살펴보기",
    "text": "데이터살펴보기\n- 일단 살펴보기\n\ndf=pd.read_csv('https://raw.githubusercontent.com/guebin/DV2022/master/posts/FIFA23_official_data.csv')\ndf.head()\n\n\n\n\n\n  \n    \n      \n      ID\n      Name\n      Age\n      Photo\n      Nationality\n      Flag\n      Overall\n      Potential\n      Club\n      Club Logo\n      ...\n      Real Face\n      Position\n      Joined\n      Loaned From\n      Contract Valid Until\n      Height\n      Weight\n      Release Clause\n      Kit Number\n      Best Overall Rating\n    \n  \n  \n    \n      0\n      209658\n      L. Goretzka\n      27\n      https://cdn.sofifa.net/players/209/658/23_60.png\n      Germany\n      https://cdn.sofifa.net/flags/de.png\n      87\n      88\n      FC Bayern München\n      https://cdn.sofifa.net/teams/21/30.png\n      ...\n      Yes\n      <span class=\"pos pos28\">SUB\n      Jul 1, 2018\n      NaN\n      2026\n      189cm\n      82kg\n      €157M\n      8.0\n      NaN\n    \n    \n      1\n      212198\n      Bruno Fernandes\n      27\n      https://cdn.sofifa.net/players/212/198/23_60.png\n      Portugal\n      https://cdn.sofifa.net/flags/pt.png\n      86\n      87\n      Manchester United\n      https://cdn.sofifa.net/teams/11/30.png\n      ...\n      Yes\n      <span class=\"pos pos15\">LCM\n      Jan 30, 2020\n      NaN\n      2026\n      179cm\n      69kg\n      €155M\n      8.0\n      NaN\n    \n    \n      2\n      224334\n      M. Acuña\n      30\n      https://cdn.sofifa.net/players/224/334/23_60.png\n      Argentina\n      https://cdn.sofifa.net/flags/ar.png\n      85\n      85\n      Sevilla FC\n      https://cdn.sofifa.net/teams/481/30.png\n      ...\n      No\n      <span class=\"pos pos7\">LB\n      Sep 14, 2020\n      NaN\n      2024\n      172cm\n      69kg\n      €97.7M\n      19.0\n      NaN\n    \n    \n      3\n      192985\n      K. De Bruyne\n      31\n      https://cdn.sofifa.net/players/192/985/23_60.png\n      Belgium\n      https://cdn.sofifa.net/flags/be.png\n      91\n      91\n      Manchester City\n      https://cdn.sofifa.net/teams/10/30.png\n      ...\n      Yes\n      <span class=\"pos pos13\">RCM\n      Aug 30, 2015\n      NaN\n      2025\n      181cm\n      70kg\n      €198.9M\n      17.0\n      NaN\n    \n    \n      4\n      224232\n      N. Barella\n      25\n      https://cdn.sofifa.net/players/224/232/23_60.png\n      Italy\n      https://cdn.sofifa.net/flags/it.png\n      86\n      89\n      Inter\n      https://cdn.sofifa.net/teams/44/30.png\n      ...\n      Yes\n      <span class=\"pos pos13\">RCM\n      Sep 1, 2020\n      NaN\n      2026\n      172cm\n      68kg\n      €154.4M\n      23.0\n      NaN\n    \n  \n\n5 rows × 29 columns\n\n\n\n트랜스포즈하여 보는 것이 편할때도 있음\n\ndf.T\n\n\n\n\n\n  \n    \n      \n      0\n      1\n      2\n      3\n      4\n      5\n      6\n      7\n      8\n      9\n      ...\n      17650\n      17651\n      17652\n      17653\n      17654\n      17655\n      17656\n      17657\n      17658\n      17659\n    \n  \n  \n    \n      ID\n      209658\n      212198\n      224334\n      192985\n      224232\n      212622\n      197445\n      187961\n      208333\n      210514\n      ...\n      256879\n      269546\n      267647\n      253186\n      267461\n      269526\n      267946\n      270567\n      256624\n      256376\n    \n    \n      Name\n      L. Goretzka\n      Bruno Fernandes\n      M. Acuña\n      K. De Bruyne\n      N. Barella\n      J. Kimmich\n      D. Alaba\n      22 Paulinho\n      E. Can\n      João Cancelo\n      ...\n      22 G. Leijon\n      Wu Fei\n      22 E. Grosz\n      22 S. Booth\n      22 L. Grimpe\n      Deng Xiongtao\n      22 Lim Jun Sub\n      A. Demir\n      21 S. Czajor\n      21 F. Jakobsson\n    \n    \n      Age\n      27\n      27\n      30\n      31\n      25\n      27\n      30\n      32\n      28\n      28\n      ...\n      19\n      32\n      18\n      20\n      17\n      19\n      17\n      25\n      18\n      20\n    \n    \n      Photo\n      https://cdn.sofifa.net/players/209/658/23_60.png\n      https://cdn.sofifa.net/players/212/198/23_60.png\n      https://cdn.sofifa.net/players/224/334/23_60.png\n      https://cdn.sofifa.net/players/192/985/23_60.png\n      https://cdn.sofifa.net/players/224/232/23_60.png\n      https://cdn.sofifa.net/players/212/622/23_60.png\n      https://cdn.sofifa.net/players/197/445/23_60.png\n      https://cdn.sofifa.net/players/187/961/22_60.png\n      https://cdn.sofifa.net/players/208/333/23_60.png\n      https://cdn.sofifa.net/players/210/514/23_60.png\n      ...\n      https://cdn.sofifa.net/players/256/879/22_60.png\n      https://cdn.sofifa.net/players/269/546/23_60.png\n      https://cdn.sofifa.net/players/267/647/22_60.png\n      https://cdn.sofifa.net/players/253/186/22_60.png\n      https://cdn.sofifa.net/players/267/461/22_60.png\n      https://cdn.sofifa.net/players/269/526/23_60.png\n      https://cdn.sofifa.net/players/267/946/22_60.png\n      https://cdn.sofifa.net/players/270/567/23_60.png\n      https://cdn.sofifa.net/players/256/624/21_60.png\n      https://cdn.sofifa.net/players/256/376/21_60.png\n    \n    \n      Nationality\n      Germany\n      Portugal\n      Argentina\n      Belgium\n      Italy\n      Germany\n      Austria\n      Brazil\n      Germany\n      Portugal\n      ...\n      Sweden\n      China PR\n      Romania\n      England\n      Germany\n      China PR\n      Korea Republic\n      Turkey\n      Poland\n      Sweden\n    \n    \n      Flag\n      https://cdn.sofifa.net/flags/de.png\n      https://cdn.sofifa.net/flags/pt.png\n      https://cdn.sofifa.net/flags/ar.png\n      https://cdn.sofifa.net/flags/be.png\n      https://cdn.sofifa.net/flags/it.png\n      https://cdn.sofifa.net/flags/de.png\n      https://cdn.sofifa.net/flags/at.png\n      https://cdn.sofifa.net/flags/br.png\n      https://cdn.sofifa.net/flags/de.png\n      https://cdn.sofifa.net/flags/pt.png\n      ...\n      https://cdn.sofifa.net/flags/se.png\n      https://cdn.sofifa.net/flags/cn.png\n      https://cdn.sofifa.net/flags/ro.png\n      https://cdn.sofifa.net/flags/gb-eng.png\n      https://cdn.sofifa.net/flags/de.png\n      https://cdn.sofifa.net/flags/cn.png\n      https://cdn.sofifa.net/flags/kr.png\n      https://cdn.sofifa.net/flags/tr.png\n      https://cdn.sofifa.net/flags/pl.png\n      https://cdn.sofifa.net/flags/se.png\n    \n    \n      Overall\n      87\n      86\n      85\n      91\n      86\n      89\n      86\n      83\n      82\n      88\n      ...\n      52\n      51\n      52\n      51\n      54\n      48\n      48\n      51\n      50\n      50\n    \n    \n      Potential\n      88\n      87\n      85\n      91\n      89\n      90\n      86\n      83\n      82\n      88\n      ...\n      62\n      51\n      70\n      60\n      68\n      61\n      64\n      56\n      65\n      61\n    \n    \n      Club\n      FC Bayern München\n      Manchester United\n      Sevilla FC\n      Manchester City\n      Inter\n      FC Bayern München\n      Real Madrid CF\n      Al Ahli\n      Borussia Dortmund\n      Manchester City\n      ...\n      Örebro SK\n      Wuhan Three Towns\n      Gaz Metan Mediaş\n      Crewe Alexandra\n      RB Leipzig\n      Meizhou Hakka\n      Jeju United FC\n      Ümraniyespor\n      Fleetwood Town\n      IFK Norrköping\n    \n    \n      Club Logo\n      https://cdn.sofifa.net/teams/21/30.png\n      https://cdn.sofifa.net/teams/11/30.png\n      https://cdn.sofifa.net/teams/481/30.png\n      https://cdn.sofifa.net/teams/10/30.png\n      https://cdn.sofifa.net/teams/44/30.png\n      https://cdn.sofifa.net/teams/21/30.png\n      https://cdn.sofifa.net/teams/243/30.png\n      https://cdn.sofifa.net/teams/112387/30.png\n      https://cdn.sofifa.net/teams/22/30.png\n      https://cdn.sofifa.net/teams/10/30.png\n      ...\n      https://cdn.sofifa.net/teams/705/30.png\n      https://cdn.sofifa.net/teams/116361/30.png\n      https://cdn.sofifa.net/teams/112637/30.png\n      https://cdn.sofifa.net/teams/121/30.png\n      https://cdn.sofifa.net/teams/112172/30.png\n      https://cdn.sofifa.net/teams/114628/30.png\n      https://cdn.sofifa.net/teams/1478/30.png\n      https://cdn.sofifa.net/teams/113796/30.png\n      https://cdn.sofifa.net/teams/112260/30.png\n      https://cdn.sofifa.net/teams/702/30.png\n    \n    \n      Value\n      €91M\n      €78.5M\n      €46.5M\n      €107.5M\n      €89.5M\n      €105.5M\n      €55.5M\n      €28.5M\n      €30.5M\n      €82.5M\n      ...\n      €150K\n      €30K\n      €180K\n      €110K\n      €210K\n      €100K\n      €100K\n      €70K\n      €90K\n      €90K\n    \n    \n      Wage\n      €115K\n      €190K\n      €46K\n      €350K\n      €110K\n      €130K\n      €220K\n      €61K\n      €63K\n      €250K\n      ...\n      €500\n      €2K\n      €500\n      €850\n      €500\n      €500\n      €500\n      €2K\n      €500\n      €500\n    \n    \n      Special\n      2312\n      2305\n      2303\n      2303\n      2296\n      2283\n      2277\n      2273\n      2271\n      2262\n      ...\n      779\n      777\n      775\n      768\n      767\n      762\n      761\n      759\n      758\n      749\n    \n    \n      Preferred Foot\n      Right\n      Right\n      Left\n      Right\n      Right\n      Right\n      Left\n      Right\n      Right\n      Right\n      ...\n      Right\n      Right\n      Right\n      Right\n      Right\n      Right\n      Right\n      Right\n      Right\n      Left\n    \n    \n      International Reputation\n      4.0\n      3.0\n      2.0\n      4.0\n      3.0\n      4.0\n      4.0\n      3.0\n      3.0\n      3.0\n      ...\n      1.0\n      1.0\n      1.0\n      1.0\n      1.0\n      1.0\n      1.0\n      1.0\n      1.0\n      1.0\n    \n    \n      Weak Foot\n      4.0\n      3.0\n      3.0\n      5.0\n      3.0\n      4.0\n      4.0\n      4.0\n      4.0\n      4.0\n      ...\n      3.0\n      2.0\n      2.0\n      2.0\n      3.0\n      3.0\n      2.0\n      2.0\n      2.0\n      2.0\n    \n    \n      Skill Moves\n      3.0\n      4.0\n      3.0\n      4.0\n      3.0\n      3.0\n      3.0\n      4.0\n      3.0\n      4.0\n      ...\n      1.0\n      1.0\n      1.0\n      1.0\n      1.0\n      1.0\n      1.0\n      1.0\n      1.0\n      1.0\n    \n    \n      Work Rate\n      High/ Medium\n      High/ High\n      High/ High\n      High/ High\n      High/ High\n      High/ Medium\n      Medium/ Medium\n      High/ High\n      Medium/ High\n      High/ Medium\n      ...\n      Medium/ Medium\n      Medium/ Medium\n      Medium/ Medium\n      Medium/ Medium\n      Medium/ Medium\n      Medium/ Medium\n      Medium/ Medium\n      Medium/ Medium\n      Medium/ Medium\n      Medium/ Medium\n    \n    \n      Body Type\n      Unique\n      Unique\n      Stocky (170-185)\n      Unique\n      Normal (170-)\n      Normal (170-185)\n      Normal (170-185)\n      Normal (170-185)\n      Stocky (185+)\n      Unique\n      ...\n      Normal (185+)\n      Normal (185+)\n      Lean (185+)\n      Lean (185+)\n      Lean (185+)\n      Normal (185+)\n      Lean (185+)\n      Lean (185+)\n      Normal (185+)\n      Normal (185+)\n    \n    \n      Real Face\n      Yes\n      Yes\n      No\n      Yes\n      Yes\n      Yes\n      Yes\n      Yes\n      Yes\n      Yes\n      ...\n      No\n      No\n      No\n      No\n      No\n      No\n      No\n      No\n      No\n      No\n    \n    \n      Position\n      <span class=\"pos pos28\">SUB\n      <span class=\"pos pos15\">LCM\n      <span class=\"pos pos7\">LB\n      <span class=\"pos pos13\">RCM\n      <span class=\"pos pos13\">RCM\n      <span class=\"pos pos9\">RDM\n      <span class=\"pos pos6\">LCB\n      <span class=\"pos pos15\">LCM\n      <span class=\"pos pos28\">SUB\n      <span class=\"pos pos7\">LB\n      ...\n      <span class=\"pos pos28\">SUB\n      <span class=\"pos pos28\">SUB\n      <span class=\"pos pos28\">SUB\n      <span class=\"pos pos29\">RES\n      <span class=\"pos pos29\">RES\n      <span class=\"pos pos29\">RES\n      <span class=\"pos pos29\">RES\n      <span class=\"pos pos29\">RES\n      <span class=\"pos pos29\">RES\n      <span class=\"pos pos29\">RES\n    \n    \n      Joined\n      Jul 1, 2018\n      Jan 30, 2020\n      Sep 14, 2020\n      Aug 30, 2015\n      Sep 1, 2020\n      Jul 1, 2015\n      Jul 1, 2021\n      Jul 22, 2021\n      Feb 18, 2020\n      Aug 7, 2019\n      ...\n      Jun 14, 2020\n      Feb 15, 2019\n      Jul 1, 2020\n      Jul 1, 2019\n      Feb 7, 2022\n      Apr 11, 2022\n      Jan 1, 2022\n      Jun 6, 2021\n      Jan 1, 2020\n      Jan 8, 2020\n    \n    \n      Loaned From\n      NaN\n      NaN\n      NaN\n      NaN\n      NaN\n      NaN\n      NaN\n      NaN\n      NaN\n      NaN\n      ...\n      NaN\n      NaN\n      NaN\n      NaN\n      NaN\n      NaN\n      NaN\n      NaN\n      NaN\n      NaN\n    \n    \n      Contract Valid Until\n      2026\n      2026\n      2024\n      2025\n      2026\n      2025\n      2026\n      2024\n      2024\n      2027\n      ...\n      2022\n      2022\n      2022\n      2022\n      2023\n      2027\n      2026\n      2023\n      2021\n      2021\n    \n    \n      Height\n      189cm\n      179cm\n      172cm\n      181cm\n      172cm\n      177cm\n      180cm\n      183cm\n      186cm\n      182cm\n      ...\n      188cm\n      186cm\n      190cm\n      195cm\n      186cm\n      190cm\n      195cm\n      190cm\n      187cm\n      186cm\n    \n    \n      Weight\n      82kg\n      69kg\n      69kg\n      70kg\n      68kg\n      75kg\n      78kg\n      80kg\n      86kg\n      74kg\n      ...\n      81kg\n      78kg\n      70kg\n      80kg\n      78kg\n      78kg\n      84kg\n      82kg\n      79kg\n      78kg\n    \n    \n      Release Clause\n      €157M\n      €155M\n      €97.7M\n      €198.9M\n      €154.4M\n      €182M\n      €113.8M\n      €48.5M\n      €51.9M\n      €152.6M\n      ...\n      €218K\n      €47K\n      €356K\n      €215K\n      €488K\n      €218K\n      €188K\n      €142K\n      €214K\n      €131K\n    \n    \n      Kit Number\n      8.0\n      8.0\n      19.0\n      17.0\n      23.0\n      6.0\n      4.0\n      15.0\n      23.0\n      7.0\n      ...\n      33.0\n      1.0\n      99.0\n      27.0\n      43.0\n      35.0\n      21.0\n      12.0\n      40.0\n      30.0\n    \n    \n      Best Overall Rating\n      NaN\n      NaN\n      NaN\n      NaN\n      NaN\n      NaN\n      NaN\n      NaN\n      NaN\n      NaN\n      ...\n      NaN\n      NaN\n      NaN\n      NaN\n      NaN\n      NaN\n      NaN\n      NaN\n      NaN\n      NaN\n    \n  \n\n29 rows × 17660 columns\n\n\n\n- column이름조사\n\ndf.keys()\n\nIndex(['ID', 'Name', 'Age', 'Photo', 'Nationality', 'Flag', 'Overall',\n       'Potential', 'Club', 'Club Logo', 'Value', 'Wage', 'Special',\n       'Preferred Foot', 'International Reputation', 'Weak Foot',\n       'Skill Moves', 'Work Rate', 'Body Type', 'Real Face', 'Position',\n       'Joined', 'Loaned From', 'Contract Valid Until', 'Height', 'Weight',\n       'Release Clause', 'Kit Number', 'Best Overall Rating'],\n      dtype='object')\n\n\n\n이름에 space가 있어서 좀 거슬림\n\n- 각 column 별로 자료형조사\n\npd.DataFrame({'colname':df.keys(), 'dtype':[df[key].dtype for key in df.keys()]})\n\n\n\n\n\n  \n    \n      \n      colname\n      dtype\n    \n  \n  \n    \n      0\n      ID\n      int64\n    \n    \n      1\n      Name\n      object\n    \n    \n      2\n      Age\n      int64\n    \n    \n      3\n      Photo\n      object\n    \n    \n      4\n      Nationality\n      object\n    \n    \n      5\n      Flag\n      object\n    \n    \n      6\n      Overall\n      int64\n    \n    \n      7\n      Potential\n      int64\n    \n    \n      8\n      Club\n      object\n    \n    \n      9\n      Club Logo\n      object\n    \n    \n      10\n      Value\n      object\n    \n    \n      11\n      Wage\n      object\n    \n    \n      12\n      Special\n      int64\n    \n    \n      13\n      Preferred Foot\n      object\n    \n    \n      14\n      International Reputation\n      float64\n    \n    \n      15\n      Weak Foot\n      float64\n    \n    \n      16\n      Skill Moves\n      float64\n    \n    \n      17\n      Work Rate\n      object\n    \n    \n      18\n      Body Type\n      object\n    \n    \n      19\n      Real Face\n      object\n    \n    \n      20\n      Position\n      object\n    \n    \n      21\n      Joined\n      object\n    \n    \n      22\n      Loaned From\n      object\n    \n    \n      23\n      Contract Valid Until\n      object\n    \n    \n      24\n      Height\n      object\n    \n    \n      25\n      Weight\n      object\n    \n    \n      26\n      Release Clause\n      object\n    \n    \n      27\n      Kit Number\n      float64\n    \n    \n      28\n      Best Overall Rating\n      object\n    \n  \n\n\n\n\n- 결측치조사\n\npd.DataFrame({'colname':df.keys(), \n              'dtype':[df[key].dtype for key in df.keys()],\n              'na':[df[key].isna().sum() for key in df.keys()]\n             })\n\n\n\n\n\n  \n    \n      \n      colname\n      dtype\n      na\n    \n  \n  \n    \n      0\n      ID\n      int64\n      0\n    \n    \n      1\n      Name\n      object\n      0\n    \n    \n      2\n      Age\n      int64\n      0\n    \n    \n      3\n      Photo\n      object\n      0\n    \n    \n      4\n      Nationality\n      object\n      0\n    \n    \n      5\n      Flag\n      object\n      0\n    \n    \n      6\n      Overall\n      int64\n      0\n    \n    \n      7\n      Potential\n      int64\n      0\n    \n    \n      8\n      Club\n      object\n      211\n    \n    \n      9\n      Club Logo\n      object\n      0\n    \n    \n      10\n      Value\n      object\n      0\n    \n    \n      11\n      Wage\n      object\n      0\n    \n    \n      12\n      Special\n      int64\n      0\n    \n    \n      13\n      Preferred Foot\n      object\n      0\n    \n    \n      14\n      International Reputation\n      float64\n      0\n    \n    \n      15\n      Weak Foot\n      float64\n      0\n    \n    \n      16\n      Skill Moves\n      float64\n      0\n    \n    \n      17\n      Work Rate\n      object\n      0\n    \n    \n      18\n      Body Type\n      object\n      38\n    \n    \n      19\n      Real Face\n      object\n      38\n    \n    \n      20\n      Position\n      object\n      35\n    \n    \n      21\n      Joined\n      object\n      1098\n    \n    \n      22\n      Loaned From\n      object\n      16966\n    \n    \n      23\n      Contract Valid Until\n      object\n      361\n    \n    \n      24\n      Height\n      object\n      0\n    \n    \n      25\n      Weight\n      object\n      0\n    \n    \n      26\n      Release Clause\n      object\n      1151\n    \n    \n      27\n      Kit Number\n      float64\n      35\n    \n    \n      28\n      Best Overall Rating\n      object\n      17639\n    \n  \n\n\n\n\n(퀴즈) 열의선택: 결측치가 10000개 이상인 열을 보고싶다면?\n\ndf.loc[:,[df[key].isna().sum()>10000 for key in df.keys()]]\n\n\n\n\n\n  \n    \n      \n      Loaned From\n      Best Overall Rating\n    \n  \n  \n    \n      0\n      NaN\n      NaN\n    \n    \n      1\n      NaN\n      NaN\n    \n    \n      2\n      NaN\n      NaN\n    \n    \n      3\n      NaN\n      NaN\n    \n    \n      4\n      NaN\n      NaN\n    \n    \n      ...\n      ...\n      ...\n    \n    \n      17655\n      NaN\n      NaN\n    \n    \n      17656\n      NaN\n      NaN\n    \n    \n      17657\n      NaN\n      NaN\n    \n    \n      17658\n      NaN\n      NaN\n    \n    \n      17659\n      NaN\n      NaN\n    \n  \n\n17660 rows × 2 columns\n\n\n\n- .info()\n\ndf.info()\n\n<class 'pandas.core.frame.DataFrame'>\nRangeIndex: 17660 entries, 0 to 17659\nData columns (total 29 columns):\n #   Column                    Non-Null Count  Dtype  \n---  ------                    --------------  -----  \n 0   ID                        17660 non-null  int64  \n 1   Name                      17660 non-null  object \n 2   Age                       17660 non-null  int64  \n 3   Photo                     17660 non-null  object \n 4   Nationality               17660 non-null  object \n 5   Flag                      17660 non-null  object \n 6   Overall                   17660 non-null  int64  \n 7   Potential                 17660 non-null  int64  \n 8   Club                      17449 non-null  object \n 9   Club Logo                 17660 non-null  object \n 10  Value                     17660 non-null  object \n 11  Wage                      17660 non-null  object \n 12  Special                   17660 non-null  int64  \n 13  Preferred Foot            17660 non-null  object \n 14  International Reputation  17660 non-null  float64\n 15  Weak Foot                 17660 non-null  float64\n 16  Skill Moves               17660 non-null  float64\n 17  Work Rate                 17660 non-null  object \n 18  Body Type                 17622 non-null  object \n 19  Real Face                 17622 non-null  object \n 20  Position                  17625 non-null  object \n 21  Joined                    16562 non-null  object \n 22  Loaned From               694 non-null    object \n 23  Contract Valid Until      17299 non-null  object \n 24  Height                    17660 non-null  object \n 25  Weight                    17660 non-null  object \n 26  Release Clause            16509 non-null  object \n 27  Kit Number                17625 non-null  float64\n 28  Best Overall Rating       21 non-null     object \ndtypes: float64(4), int64(5), object(20)\nmemory usage: 3.9+ MB\n\n\n- .describe(): 숫자들이 저장된 column에 대하여 기본통계량 조사\n\ndf.describe()\n\n\n\n\n\n  \n    \n      \n      ID\n      Age\n      Overall\n      Potential\n      Special\n      International Reputation\n      Weak Foot\n      Skill Moves\n      Kit Number\n    \n  \n  \n    \n      count\n      17660.000000\n      17660.000000\n      17660.000000\n      17660.000000\n      17660.000000\n      17660.000000\n      17660.000000\n      17660.000000\n      17625.000000\n    \n    \n      mean\n      246319.424462\n      23.127746\n      63.369592\n      70.981200\n      1537.915855\n      1.106285\n      2.900340\n      2.297169\n      25.037957\n    \n    \n      std\n      31487.892861\n      4.639821\n      8.036268\n      6.529836\n      285.893809\n      0.407021\n      0.663523\n      0.754264\n      19.154116\n    \n    \n      min\n      16.000000\n      15.000000\n      43.000000\n      42.000000\n      749.000000\n      1.000000\n      1.000000\n      1.000000\n      1.000000\n    \n    \n      25%\n      240732.500000\n      20.000000\n      58.000000\n      67.000000\n      1387.000000\n      1.000000\n      3.000000\n      2.000000\n      11.000000\n    \n    \n      50%\n      257041.000000\n      22.000000\n      63.000000\n      71.000000\n      1548.000000\n      1.000000\n      3.000000\n      2.000000\n      22.000000\n    \n    \n      75%\n      263027.500000\n      26.000000\n      69.000000\n      75.000000\n      1727.000000\n      1.000000\n      3.000000\n      3.000000\n      32.000000\n    \n    \n      max\n      271340.000000\n      54.000000\n      91.000000\n      95.000000\n      2312.000000\n      5.000000\n      5.000000\n      5.000000\n      99.000000\n    \n  \n\n\n\n\n- pandas_profiling.ProfileReport()을 이용한 전체적인 조사\n\n# pandas_profiling.ProfileReport(df).to_file('fifa2023_reprot.html')\n\n- 특정열을 중심으로 정렬하여 보기\n\ndf.sort_values(by='Overall',ascending=False).reset_index()\n\n\n\n\n\n  \n    \n      \n      index\n      ID\n      Name\n      Age\n      Photo\n      Nationality\n      Flag\n      Overall\n      Potential\n      Club\n      ...\n      Real Face\n      Position\n      Joined\n      Loaned From\n      Contract Valid Until\n      Height\n      Weight\n      Release Clause\n      Kit Number\n      Best Overall Rating\n    \n  \n  \n    \n      0\n      41\n      188545\n      R. Lewandowski\n      33\n      https://cdn.sofifa.net/players/188/545/23_60.png\n      Poland\n      https://cdn.sofifa.net/flags/pl.png\n      91\n      91\n      FC Barcelona\n      ...\n      Yes\n      <span class=\"pos pos25\">ST\n      Jul 18, 2022\n      NaN\n      2025\n      185cm\n      81kg\n      €172.2M\n      9.0\n      NaN\n    \n    \n      1\n      124\n      165153\n      K. Benzema\n      34\n      https://cdn.sofifa.net/players/165/153/23_60.png\n      France\n      https://cdn.sofifa.net/flags/fr.png\n      91\n      91\n      Real Madrid CF\n      ...\n      Yes\n      <span class=\"pos pos21\">CF\n      Jul 9, 2009\n      NaN\n      2023\n      185cm\n      81kg\n      €131.2M\n      9.0\n      NaN\n    \n    \n      2\n      3\n      192985\n      K. De Bruyne\n      31\n      https://cdn.sofifa.net/players/192/985/23_60.png\n      Belgium\n      https://cdn.sofifa.net/flags/be.png\n      91\n      91\n      Manchester City\n      ...\n      Yes\n      <span class=\"pos pos13\">RCM\n      Aug 30, 2015\n      NaN\n      2025\n      181cm\n      70kg\n      €198.9M\n      17.0\n      NaN\n    \n    \n      3\n      56\n      158023\n      L. Messi\n      35\n      https://cdn.sofifa.net/players/158/023/23_60.png\n      Argentina\n      https://cdn.sofifa.net/flags/ar.png\n      91\n      91\n      Paris Saint-Germain\n      ...\n      Yes\n      <span class=\"pos pos23\">RW\n      Aug 10, 2021\n      NaN\n      2023\n      169cm\n      67kg\n      €99.9M\n      30.0\n      NaN\n    \n    \n      4\n      75\n      231747\n      K. Mbappé\n      23\n      https://cdn.sofifa.net/players/231/747/23_60.png\n      France\n      https://cdn.sofifa.net/flags/fr.png\n      91\n      95\n      Paris Saint-Germain\n      ...\n      Yes\n      <span class=\"pos pos25\">ST\n      Jul 1, 2018\n      NaN\n      2025\n      182cm\n      73kg\n      €366.7M\n      7.0\n      NaN\n    \n    \n      ...\n      ...\n      ...\n      ...\n      ...\n      ...\n      ...\n      ...\n      ...\n      ...\n      ...\n      ...\n      ...\n      ...\n      ...\n      ...\n      ...\n      ...\n      ...\n      ...\n      ...\n      ...\n    \n    \n      17655\n      15513\n      266751\n      22 Jung Ho Yeon\n      20\n      https://cdn.sofifa.net/players/266/751/22_60.png\n      Korea Republic\n      https://cdn.sofifa.net/flags/kr.png\n      45\n      53\n      GwangJu FC\n      ...\n      No\n      <span class=\"pos pos29\">RES\n      Jan 20, 2022\n      NaN\n      2026\n      180cm\n      73kg\n      €145K\n      23.0\n      NaN\n    \n    \n      17656\n      16215\n      268279\n      22 J. Looschen\n      24\n      https://cdn.sofifa.net/players/268/279/22_60.png\n      Germany\n      https://cdn.sofifa.net/flags/de.png\n      44\n      47\n      SV Meppen\n      ...\n      No\n      <span class=\"pos pos29\">RES\n      Mar 19, 2022\n      NaN\n      2026\n      178cm\n      78kg\n      €92K\n      42.0\n      NaN\n    \n    \n      17657\n      16042\n      255283\n      20 Kim Yeong Geun\n      22\n      https://cdn.sofifa.net/players/255/283/20_60.png\n      Korea Republic\n      https://cdn.sofifa.net/flags/kr.png\n      44\n      49\n      Gyeongnam FC\n      ...\n      No\n      <span class=\"pos pos29\">RES\n      Jan 9, 2020\n      NaN\n      2020\n      174cm\n      71kg\n      €53K\n      43.0\n      NaN\n    \n    \n      17658\n      14634\n      269038\n      22 Zhang Wenxuan\n      16\n      https://cdn.sofifa.net/players/269/038/22_60.png\n      China PR\n      https://cdn.sofifa.net/flags/cn.png\n      44\n      59\n      Guangzhou FC\n      ...\n      No\n      <span class=\"pos pos29\">RES\n      May 1, 2022\n      NaN\n      2022\n      175cm\n      70kg\n      €239K\n      29.0\n      NaN\n    \n    \n      17659\n      17618\n      168933\n      07 I. Paskov\n      33\n      https://cdn.sofifa.net/players/168/933/07_60.png\n      Bulgaria\n      https://cdn.sofifa.net/flags/bg.png\n      43\n      42\n      NaN\n      ...\n      NaN\n      <span class=\"pos pos28\">SUB\n      NaN\n      NaN\n      NaN\n      184cm\n      79kg\n      NaN\n      24.0\n      NaN\n    \n  \n\n17660 rows × 30 columns\n\n\n\n- 특정열을 중심으로 그룹화하여 보기 (\\(\\star\\))\n\ndf.Nationality.unique() # 데이터셋에 포함된 나라들 출력\n\narray(['Germany', 'Portugal', 'Argentina', 'Belgium', 'Italy', 'Austria',\n       'Brazil', 'Croatia', 'Serbia', 'Spain', 'Netherlands', 'France',\n       'Colombia', 'England', 'Uruguay', 'Morocco', 'Egypt', 'Algeria',\n       'Ukraine', 'United States', \"Côte d'Ivoire\", 'Poland', 'Chile',\n       'Senegal', 'Central African Republic', 'Denmark', 'Nigeria',\n       'Mexico', 'Turkey', 'Canada', 'Wales', 'Scotland', 'Romania',\n       'Czech Republic', 'Ghana', 'Korea Republic',\n       'Bosnia and Herzegovina', 'Mali', 'Slovakia', 'Armenia', 'Norway',\n       'Switzerland', 'Cameroon', 'Peru', 'Jamaica', 'Zambia', 'Guinea',\n       'Sweden', 'North Macedonia', 'Russia', 'Tunisia', 'Malta',\n       'Angola', 'Republic of Ireland', 'Ecuador', 'Benin', 'Paraguay',\n       'Montenegro', 'Australia', 'Comoros', 'Gabon', 'Iceland',\n       'Slovenia', 'Japan', 'Israel', 'China PR', 'Venezuela', 'Liberia',\n       'Greece', 'Bulgaria', 'Honduras', 'Saudi Arabia', 'Curacao',\n       'Northern Ireland', 'Guinea Bissau', 'Kosovo', 'Hungary',\n       'Finland', 'Costa Rica', 'Albania', 'Congo DR', 'Iran',\n       'Mozambique', 'Suriname', 'Cape Verde Islands', 'Bolivia',\n       'Madagascar', 'New Zealand', 'Burkina Faso', 'Dominican Republic',\n       'Kazakhstan', 'Syria', 'Luxembourg', 'Kenya', 'Zimbabwe', 'Haiti',\n       'Uzbekistan', 'South Africa', 'Cyprus', 'Qatar',\n       'Equatorial Guinea', 'Libya', 'Thailand', 'Togo',\n       'Trinidad and Tobago', 'Liechtenstein', 'Gambia', 'Georgia',\n       'Philippines', 'Burundi', 'United Arab Emirates', 'Grenada',\n       'Iraq', 'Panama', 'Malaysia', 'Moldova', 'Congo', 'India',\n       'Jordan', 'Kuwait', 'Antigua and Barbuda', 'Cuba', 'Vietnam',\n       'Korea DPR', 'Uganda', 'Lithuania', 'Estonia', 'Montserrat',\n       'Sierra Leone', 'Afghanistan', 'New Caledonia', 'Belarus', 'Laos',\n       'Saint Lucia', 'Bhutan', 'Guyana', 'Mauritania', 'Faroe Islands',\n       'Namibia', 'Niger', 'Palestine', 'Sudan', 'Azerbaijan',\n       'Hong Kong', 'Gibraltar', 'Tanzania', 'Latvia', 'Chinese Taipei',\n       'Singapore', 'Lebanon', 'El Salvador', 'Indonesia', 'Guatemala',\n       'Papua New Guinea', 'Puerto Rico', 'Malawi', 'South Sudan',\n       'Ethiopia', 'San Marino', 'Andorra', 'Saint Kitts and Nevis'],\n      dtype=object)\n\n\n\ndf.groupby(by='Nationality')[['Overall']].agg({np.mean,len}).sort_values(('Overall', 'mean'),ascending=False)\n\n\n\n\n\n  \n    \n      \n      Overall\n    \n    \n      \n      mean\n      len\n    \n    \n      Nationality\n      \n      \n    \n  \n  \n    \n      Philippines\n      74.000000\n      1\n    \n    \n      Namibia\n      72.000000\n      1\n    \n    \n      Mozambique\n      72.000000\n      2\n    \n    \n      Kuwait\n      71.000000\n      1\n    \n    \n      Brazil\n      70.556586\n      539\n    \n    \n      ...\n      ...\n      ...\n    \n    \n      San Marino\n      53.000000\n      1\n    \n    \n      China PR\n      52.230769\n      325\n    \n    \n      South Sudan\n      52.000000\n      5\n    \n    \n      India\n      51.994681\n      188\n    \n    \n      Saint Kitts and Nevis\n      51.000000\n      1\n    \n  \n\n161 rows × 2 columns\n\n\n\n\ngroupby는 나중에 다시 설명 합니다."
  },
  {
    "objectID": "posts/Day3/09_PandasBackend/2023-02-01-Lesson18.html#데이터정리하기",
    "href": "posts/Day3/09_PandasBackend/2023-02-01-Lesson18.html#데이터정리하기",
    "title": "Lesson 18: FIFA23 자료분석",
    "section": "데이터정리하기",
    "text": "데이터정리하기\n- 칼럼이름변경\n\ndf.set_axis(pd.Index(map(lambda x: x.replace(' ','_'), df.columns)), axis=1)\n\n\n\n\n\n  \n    \n      \n      ID\n      Name\n      Age\n      Photo\n      Nationality\n      Flag\n      Overall\n      Potential\n      Club\n      Club_Logo\n      ...\n      Real_Face\n      Position\n      Joined\n      Loaned_From\n      Contract_Valid_Until\n      Height\n      Weight\n      Release_Clause\n      Kit_Number\n      Best_Overall_Rating\n    \n  \n  \n    \n      0\n      209658\n      L. Goretzka\n      27\n      https://cdn.sofifa.net/players/209/658/23_60.png\n      Germany\n      https://cdn.sofifa.net/flags/de.png\n      87\n      88\n      FC Bayern München\n      https://cdn.sofifa.net/teams/21/30.png\n      ...\n      Yes\n      <span class=\"pos pos28\">SUB\n      Jul 1, 2018\n      NaN\n      2026\n      189cm\n      82kg\n      €157M\n      8.0\n      NaN\n    \n    \n      1\n      212198\n      Bruno Fernandes\n      27\n      https://cdn.sofifa.net/players/212/198/23_60.png\n      Portugal\n      https://cdn.sofifa.net/flags/pt.png\n      86\n      87\n      Manchester United\n      https://cdn.sofifa.net/teams/11/30.png\n      ...\n      Yes\n      <span class=\"pos pos15\">LCM\n      Jan 30, 2020\n      NaN\n      2026\n      179cm\n      69kg\n      €155M\n      8.0\n      NaN\n    \n    \n      2\n      224334\n      M. Acuña\n      30\n      https://cdn.sofifa.net/players/224/334/23_60.png\n      Argentina\n      https://cdn.sofifa.net/flags/ar.png\n      85\n      85\n      Sevilla FC\n      https://cdn.sofifa.net/teams/481/30.png\n      ...\n      No\n      <span class=\"pos pos7\">LB\n      Sep 14, 2020\n      NaN\n      2024\n      172cm\n      69kg\n      €97.7M\n      19.0\n      NaN\n    \n    \n      3\n      192985\n      K. De Bruyne\n      31\n      https://cdn.sofifa.net/players/192/985/23_60.png\n      Belgium\n      https://cdn.sofifa.net/flags/be.png\n      91\n      91\n      Manchester City\n      https://cdn.sofifa.net/teams/10/30.png\n      ...\n      Yes\n      <span class=\"pos pos13\">RCM\n      Aug 30, 2015\n      NaN\n      2025\n      181cm\n      70kg\n      €198.9M\n      17.0\n      NaN\n    \n    \n      4\n      224232\n      N. Barella\n      25\n      https://cdn.sofifa.net/players/224/232/23_60.png\n      Italy\n      https://cdn.sofifa.net/flags/it.png\n      86\n      89\n      Inter\n      https://cdn.sofifa.net/teams/44/30.png\n      ...\n      Yes\n      <span class=\"pos pos13\">RCM\n      Sep 1, 2020\n      NaN\n      2026\n      172cm\n      68kg\n      €154.4M\n      23.0\n      NaN\n    \n    \n      ...\n      ...\n      ...\n      ...\n      ...\n      ...\n      ...\n      ...\n      ...\n      ...\n      ...\n      ...\n      ...\n      ...\n      ...\n      ...\n      ...\n      ...\n      ...\n      ...\n      ...\n      ...\n    \n    \n      17655\n      269526\n      Deng Xiongtao\n      19\n      https://cdn.sofifa.net/players/269/526/23_60.png\n      China PR\n      https://cdn.sofifa.net/flags/cn.png\n      48\n      61\n      Meizhou Hakka\n      https://cdn.sofifa.net/teams/114628/30.png\n      ...\n      No\n      <span class=\"pos pos29\">RES\n      Apr 11, 2022\n      NaN\n      2027\n      190cm\n      78kg\n      €218K\n      35.0\n      NaN\n    \n    \n      17656\n      267946\n      22 Lim Jun Sub\n      17\n      https://cdn.sofifa.net/players/267/946/22_60.png\n      Korea Republic\n      https://cdn.sofifa.net/flags/kr.png\n      48\n      64\n      Jeju United FC\n      https://cdn.sofifa.net/teams/1478/30.png\n      ...\n      No\n      <span class=\"pos pos29\">RES\n      Jan 1, 2022\n      NaN\n      2026\n      195cm\n      84kg\n      €188K\n      21.0\n      NaN\n    \n    \n      17657\n      270567\n      A. Demir\n      25\n      https://cdn.sofifa.net/players/270/567/23_60.png\n      Turkey\n      https://cdn.sofifa.net/flags/tr.png\n      51\n      56\n      Ümraniyespor\n      https://cdn.sofifa.net/teams/113796/30.png\n      ...\n      No\n      <span class=\"pos pos29\">RES\n      Jun 6, 2021\n      NaN\n      2023\n      190cm\n      82kg\n      €142K\n      12.0\n      NaN\n    \n    \n      17658\n      256624\n      21 S. Czajor\n      18\n      https://cdn.sofifa.net/players/256/624/21_60.png\n      Poland\n      https://cdn.sofifa.net/flags/pl.png\n      50\n      65\n      Fleetwood Town\n      https://cdn.sofifa.net/teams/112260/30.png\n      ...\n      No\n      <span class=\"pos pos29\">RES\n      Jan 1, 2020\n      NaN\n      2021\n      187cm\n      79kg\n      €214K\n      40.0\n      NaN\n    \n    \n      17659\n      256376\n      21 F. Jakobsson\n      20\n      https://cdn.sofifa.net/players/256/376/21_60.png\n      Sweden\n      https://cdn.sofifa.net/flags/se.png\n      50\n      61\n      IFK Norrköping\n      https://cdn.sofifa.net/teams/702/30.png\n      ...\n      No\n      <span class=\"pos pos29\">RES\n      Jan 8, 2020\n      NaN\n      2021\n      186cm\n      78kg\n      €131K\n      30.0\n      NaN\n    \n  \n\n17660 rows × 29 columns\n\n\n\n- 결측치제거\n\ndf.drop(columns=['Loaned From', 'Best Overall Rating']).dropna()\n\n\n\n\n\n  \n    \n      \n      ID\n      Name\n      Age\n      Photo\n      Nationality\n      Flag\n      Overall\n      Potential\n      Club\n      Club Logo\n      ...\n      Work Rate\n      Body Type\n      Real Face\n      Position\n      Joined\n      Contract Valid Until\n      Height\n      Weight\n      Release Clause\n      Kit Number\n    \n  \n  \n    \n      0\n      209658\n      L. Goretzka\n      27\n      https://cdn.sofifa.net/players/209/658/23_60.png\n      Germany\n      https://cdn.sofifa.net/flags/de.png\n      87\n      88\n      FC Bayern München\n      https://cdn.sofifa.net/teams/21/30.png\n      ...\n      High/ Medium\n      Unique\n      Yes\n      <span class=\"pos pos28\">SUB\n      Jul 1, 2018\n      2026\n      189cm\n      82kg\n      €157M\n      8.0\n    \n    \n      1\n      212198\n      Bruno Fernandes\n      27\n      https://cdn.sofifa.net/players/212/198/23_60.png\n      Portugal\n      https://cdn.sofifa.net/flags/pt.png\n      86\n      87\n      Manchester United\n      https://cdn.sofifa.net/teams/11/30.png\n      ...\n      High/ High\n      Unique\n      Yes\n      <span class=\"pos pos15\">LCM\n      Jan 30, 2020\n      2026\n      179cm\n      69kg\n      €155M\n      8.0\n    \n    \n      2\n      224334\n      M. Acuña\n      30\n      https://cdn.sofifa.net/players/224/334/23_60.png\n      Argentina\n      https://cdn.sofifa.net/flags/ar.png\n      85\n      85\n      Sevilla FC\n      https://cdn.sofifa.net/teams/481/30.png\n      ...\n      High/ High\n      Stocky (170-185)\n      No\n      <span class=\"pos pos7\">LB\n      Sep 14, 2020\n      2024\n      172cm\n      69kg\n      €97.7M\n      19.0\n    \n    \n      3\n      192985\n      K. De Bruyne\n      31\n      https://cdn.sofifa.net/players/192/985/23_60.png\n      Belgium\n      https://cdn.sofifa.net/flags/be.png\n      91\n      91\n      Manchester City\n      https://cdn.sofifa.net/teams/10/30.png\n      ...\n      High/ High\n      Unique\n      Yes\n      <span class=\"pos pos13\">RCM\n      Aug 30, 2015\n      2025\n      181cm\n      70kg\n      €198.9M\n      17.0\n    \n    \n      4\n      224232\n      N. Barella\n      25\n      https://cdn.sofifa.net/players/224/232/23_60.png\n      Italy\n      https://cdn.sofifa.net/flags/it.png\n      86\n      89\n      Inter\n      https://cdn.sofifa.net/teams/44/30.png\n      ...\n      High/ High\n      Normal (170-)\n      Yes\n      <span class=\"pos pos13\">RCM\n      Sep 1, 2020\n      2026\n      172cm\n      68kg\n      €154.4M\n      23.0\n    \n    \n      ...\n      ...\n      ...\n      ...\n      ...\n      ...\n      ...\n      ...\n      ...\n      ...\n      ...\n      ...\n      ...\n      ...\n      ...\n      ...\n      ...\n      ...\n      ...\n      ...\n      ...\n      ...\n    \n    \n      17655\n      269526\n      Deng Xiongtao\n      19\n      https://cdn.sofifa.net/players/269/526/23_60.png\n      China PR\n      https://cdn.sofifa.net/flags/cn.png\n      48\n      61\n      Meizhou Hakka\n      https://cdn.sofifa.net/teams/114628/30.png\n      ...\n      Medium/ Medium\n      Normal (185+)\n      No\n      <span class=\"pos pos29\">RES\n      Apr 11, 2022\n      2027\n      190cm\n      78kg\n      €218K\n      35.0\n    \n    \n      17656\n      267946\n      22 Lim Jun Sub\n      17\n      https://cdn.sofifa.net/players/267/946/22_60.png\n      Korea Republic\n      https://cdn.sofifa.net/flags/kr.png\n      48\n      64\n      Jeju United FC\n      https://cdn.sofifa.net/teams/1478/30.png\n      ...\n      Medium/ Medium\n      Lean (185+)\n      No\n      <span class=\"pos pos29\">RES\n      Jan 1, 2022\n      2026\n      195cm\n      84kg\n      €188K\n      21.0\n    \n    \n      17657\n      270567\n      A. Demir\n      25\n      https://cdn.sofifa.net/players/270/567/23_60.png\n      Turkey\n      https://cdn.sofifa.net/flags/tr.png\n      51\n      56\n      Ümraniyespor\n      https://cdn.sofifa.net/teams/113796/30.png\n      ...\n      Medium/ Medium\n      Lean (185+)\n      No\n      <span class=\"pos pos29\">RES\n      Jun 6, 2021\n      2023\n      190cm\n      82kg\n      €142K\n      12.0\n    \n    \n      17658\n      256624\n      21 S. Czajor\n      18\n      https://cdn.sofifa.net/players/256/624/21_60.png\n      Poland\n      https://cdn.sofifa.net/flags/pl.png\n      50\n      65\n      Fleetwood Town\n      https://cdn.sofifa.net/teams/112260/30.png\n      ...\n      Medium/ Medium\n      Normal (185+)\n      No\n      <span class=\"pos pos29\">RES\n      Jan 1, 2020\n      2021\n      187cm\n      79kg\n      €214K\n      40.0\n    \n    \n      17659\n      256376\n      21 F. Jakobsson\n      20\n      https://cdn.sofifa.net/players/256/376/21_60.png\n      Sweden\n      https://cdn.sofifa.net/flags/se.png\n      50\n      61\n      IFK Norrköping\n      https://cdn.sofifa.net/teams/702/30.png\n      ...\n      Medium/ Medium\n      Normal (185+)\n      No\n      <span class=\"pos pos29\">RES\n      Jan 8, 2020\n      2021\n      186cm\n      78kg\n      €131K\n      30.0\n    \n  \n\n16364 rows × 27 columns\n\n\n\n- Height, Weight의 자료형을 float형으로 수정하기\n\ndf.assign(\n    Height= list(map(lambda x: float(x[:-2]), df.Height)),\n    Weight= list(map(lambda x: float(x[:-2]), df.Weight))\n)\n\n\n\n\n\n  \n    \n      \n      ID\n      Name\n      Age\n      Photo\n      Nationality\n      Flag\n      Overall\n      Potential\n      Club\n      Club Logo\n      ...\n      Real Face\n      Position\n      Joined\n      Loaned From\n      Contract Valid Until\n      Height\n      Weight\n      Release Clause\n      Kit Number\n      Best Overall Rating\n    \n  \n  \n    \n      0\n      209658\n      L. Goretzka\n      27\n      https://cdn.sofifa.net/players/209/658/23_60.png\n      Germany\n      https://cdn.sofifa.net/flags/de.png\n      87\n      88\n      FC Bayern München\n      https://cdn.sofifa.net/teams/21/30.png\n      ...\n      Yes\n      <span class=\"pos pos28\">SUB\n      Jul 1, 2018\n      NaN\n      2026\n      189.0\n      82.0\n      €157M\n      8.0\n      NaN\n    \n    \n      1\n      212198\n      Bruno Fernandes\n      27\n      https://cdn.sofifa.net/players/212/198/23_60.png\n      Portugal\n      https://cdn.sofifa.net/flags/pt.png\n      86\n      87\n      Manchester United\n      https://cdn.sofifa.net/teams/11/30.png\n      ...\n      Yes\n      <span class=\"pos pos15\">LCM\n      Jan 30, 2020\n      NaN\n      2026\n      179.0\n      69.0\n      €155M\n      8.0\n      NaN\n    \n    \n      2\n      224334\n      M. Acuña\n      30\n      https://cdn.sofifa.net/players/224/334/23_60.png\n      Argentina\n      https://cdn.sofifa.net/flags/ar.png\n      85\n      85\n      Sevilla FC\n      https://cdn.sofifa.net/teams/481/30.png\n      ...\n      No\n      <span class=\"pos pos7\">LB\n      Sep 14, 2020\n      NaN\n      2024\n      172.0\n      69.0\n      €97.7M\n      19.0\n      NaN\n    \n    \n      3\n      192985\n      K. De Bruyne\n      31\n      https://cdn.sofifa.net/players/192/985/23_60.png\n      Belgium\n      https://cdn.sofifa.net/flags/be.png\n      91\n      91\n      Manchester City\n      https://cdn.sofifa.net/teams/10/30.png\n      ...\n      Yes\n      <span class=\"pos pos13\">RCM\n      Aug 30, 2015\n      NaN\n      2025\n      181.0\n      70.0\n      €198.9M\n      17.0\n      NaN\n    \n    \n      4\n      224232\n      N. Barella\n      25\n      https://cdn.sofifa.net/players/224/232/23_60.png\n      Italy\n      https://cdn.sofifa.net/flags/it.png\n      86\n      89\n      Inter\n      https://cdn.sofifa.net/teams/44/30.png\n      ...\n      Yes\n      <span class=\"pos pos13\">RCM\n      Sep 1, 2020\n      NaN\n      2026\n      172.0\n      68.0\n      €154.4M\n      23.0\n      NaN\n    \n    \n      ...\n      ...\n      ...\n      ...\n      ...\n      ...\n      ...\n      ...\n      ...\n      ...\n      ...\n      ...\n      ...\n      ...\n      ...\n      ...\n      ...\n      ...\n      ...\n      ...\n      ...\n      ...\n    \n    \n      17655\n      269526\n      Deng Xiongtao\n      19\n      https://cdn.sofifa.net/players/269/526/23_60.png\n      China PR\n      https://cdn.sofifa.net/flags/cn.png\n      48\n      61\n      Meizhou Hakka\n      https://cdn.sofifa.net/teams/114628/30.png\n      ...\n      No\n      <span class=\"pos pos29\">RES\n      Apr 11, 2022\n      NaN\n      2027\n      190.0\n      78.0\n      €218K\n      35.0\n      NaN\n    \n    \n      17656\n      267946\n      22 Lim Jun Sub\n      17\n      https://cdn.sofifa.net/players/267/946/22_60.png\n      Korea Republic\n      https://cdn.sofifa.net/flags/kr.png\n      48\n      64\n      Jeju United FC\n      https://cdn.sofifa.net/teams/1478/30.png\n      ...\n      No\n      <span class=\"pos pos29\">RES\n      Jan 1, 2022\n      NaN\n      2026\n      195.0\n      84.0\n      €188K\n      21.0\n      NaN\n    \n    \n      17657\n      270567\n      A. Demir\n      25\n      https://cdn.sofifa.net/players/270/567/23_60.png\n      Turkey\n      https://cdn.sofifa.net/flags/tr.png\n      51\n      56\n      Ümraniyespor\n      https://cdn.sofifa.net/teams/113796/30.png\n      ...\n      No\n      <span class=\"pos pos29\">RES\n      Jun 6, 2021\n      NaN\n      2023\n      190.0\n      82.0\n      €142K\n      12.0\n      NaN\n    \n    \n      17658\n      256624\n      21 S. Czajor\n      18\n      https://cdn.sofifa.net/players/256/624/21_60.png\n      Poland\n      https://cdn.sofifa.net/flags/pl.png\n      50\n      65\n      Fleetwood Town\n      https://cdn.sofifa.net/teams/112260/30.png\n      ...\n      No\n      <span class=\"pos pos29\">RES\n      Jan 1, 2020\n      NaN\n      2021\n      187.0\n      79.0\n      €214K\n      40.0\n      NaN\n    \n    \n      17659\n      256376\n      21 F. Jakobsson\n      20\n      https://cdn.sofifa.net/players/256/376/21_60.png\n      Sweden\n      https://cdn.sofifa.net/flags/se.png\n      50\n      61\n      IFK Norrköping\n      https://cdn.sofifa.net/teams/702/30.png\n      ...\n      No\n      <span class=\"pos pos29\">RES\n      Jan 8, 2020\n      NaN\n      2021\n      186.0\n      78.0\n      €131K\n      30.0\n      NaN\n    \n  \n\n17660 rows × 29 columns\n\n\n\n- Release Clause의 자료형을 float으로 수정하기\n\ndf['Release Clause']\n\n0          €157M\n1          €155M\n2         €97.7M\n3        €198.9M\n4        €154.4M\n          ...   \n17655      €218K\n17656      €188K\n17657      €142K\n17658      €214K\n17659      €131K\nName: Release Clause, Length: 17660, dtype: object\n\n\n\n_f = lambda x: float(x[1:-1])*1000 if x[-1]=='K' else float(x[1:-1])*1000000\n\n\n_f('€157M')\n\n157000000.0\n\n\n\n_f('€131K')\n\n131000.0\n\n\n(시도1–실패)\n\nlist(map(_f,df['Release Clause']))\n\nTypeError: 'float' object is not subscriptable\n\n\n(시도1이 실패한 이유)\n\ndf['Release Clause'].isna().sum() # 이 column에는 1151개의 결측치가 존재\n\n1151\n\n\n(nan에 대한 예비학습)\n\ndf.loc[df['Release Clause'].isna(), 'Release Clause']\n\n18       NaN\n34       NaN\n38       NaN\n49       NaN\n50       NaN\n        ... \n17378    NaN\n17386    NaN\n17535    NaN\n17590    NaN\n17618    NaN\nName: Release Clause, Length: 1151, dtype: object\n\n\n\ndf.loc[18, 'Release Clause']\n\nnan\n\n\n\npd.isna(df.loc[18, 'Release Clause'])\n\nTrue\n\n\n\ntype(df.loc[18, 'Release Clause'])\n\nfloat\n\n\n\ndf.loc[18, 'Release Clause'][-1]\n\nTypeError: 'float' object is not subscriptable\n\n\n(시도2–성공)\n\ndf.rename(columns={'Release Clause':'ReleaseClause'})\\\n.assign(ReleaseClause = list(map(lambda x: _f(x) if pd.isna(x)==False else x , df['Release Clause'])))\\\n.rename(columns={'ReleaseClause':'Release Clause'})\n\n\n\n\n\n  \n    \n      \n      ID\n      Name\n      Age\n      Photo\n      Nationality\n      Flag\n      Overall\n      Potential\n      Club\n      Club Logo\n      ...\n      Real Face\n      Position\n      Joined\n      Loaned From\n      Contract Valid Until\n      Height\n      Weight\n      Release Clause\n      Kit Number\n      Best Overall Rating\n    \n  \n  \n    \n      0\n      209658\n      L. Goretzka\n      27\n      https://cdn.sofifa.net/players/209/658/23_60.png\n      Germany\n      https://cdn.sofifa.net/flags/de.png\n      87\n      88\n      FC Bayern München\n      https://cdn.sofifa.net/teams/21/30.png\n      ...\n      Yes\n      <span class=\"pos pos28\">SUB\n      Jul 1, 2018\n      NaN\n      2026\n      189cm\n      82kg\n      157000000.0\n      8.0\n      NaN\n    \n    \n      1\n      212198\n      Bruno Fernandes\n      27\n      https://cdn.sofifa.net/players/212/198/23_60.png\n      Portugal\n      https://cdn.sofifa.net/flags/pt.png\n      86\n      87\n      Manchester United\n      https://cdn.sofifa.net/teams/11/30.png\n      ...\n      Yes\n      <span class=\"pos pos15\">LCM\n      Jan 30, 2020\n      NaN\n      2026\n      179cm\n      69kg\n      155000000.0\n      8.0\n      NaN\n    \n    \n      2\n      224334\n      M. Acuña\n      30\n      https://cdn.sofifa.net/players/224/334/23_60.png\n      Argentina\n      https://cdn.sofifa.net/flags/ar.png\n      85\n      85\n      Sevilla FC\n      https://cdn.sofifa.net/teams/481/30.png\n      ...\n      No\n      <span class=\"pos pos7\">LB\n      Sep 14, 2020\n      NaN\n      2024\n      172cm\n      69kg\n      97700000.0\n      19.0\n      NaN\n    \n    \n      3\n      192985\n      K. De Bruyne\n      31\n      https://cdn.sofifa.net/players/192/985/23_60.png\n      Belgium\n      https://cdn.sofifa.net/flags/be.png\n      91\n      91\n      Manchester City\n      https://cdn.sofifa.net/teams/10/30.png\n      ...\n      Yes\n      <span class=\"pos pos13\">RCM\n      Aug 30, 2015\n      NaN\n      2025\n      181cm\n      70kg\n      198900000.0\n      17.0\n      NaN\n    \n    \n      4\n      224232\n      N. Barella\n      25\n      https://cdn.sofifa.net/players/224/232/23_60.png\n      Italy\n      https://cdn.sofifa.net/flags/it.png\n      86\n      89\n      Inter\n      https://cdn.sofifa.net/teams/44/30.png\n      ...\n      Yes\n      <span class=\"pos pos13\">RCM\n      Sep 1, 2020\n      NaN\n      2026\n      172cm\n      68kg\n      154400000.0\n      23.0\n      NaN\n    \n    \n      ...\n      ...\n      ...\n      ...\n      ...\n      ...\n      ...\n      ...\n      ...\n      ...\n      ...\n      ...\n      ...\n      ...\n      ...\n      ...\n      ...\n      ...\n      ...\n      ...\n      ...\n      ...\n    \n    \n      17655\n      269526\n      Deng Xiongtao\n      19\n      https://cdn.sofifa.net/players/269/526/23_60.png\n      China PR\n      https://cdn.sofifa.net/flags/cn.png\n      48\n      61\n      Meizhou Hakka\n      https://cdn.sofifa.net/teams/114628/30.png\n      ...\n      No\n      <span class=\"pos pos29\">RES\n      Apr 11, 2022\n      NaN\n      2027\n      190cm\n      78kg\n      218000.0\n      35.0\n      NaN\n    \n    \n      17656\n      267946\n      22 Lim Jun Sub\n      17\n      https://cdn.sofifa.net/players/267/946/22_60.png\n      Korea Republic\n      https://cdn.sofifa.net/flags/kr.png\n      48\n      64\n      Jeju United FC\n      https://cdn.sofifa.net/teams/1478/30.png\n      ...\n      No\n      <span class=\"pos pos29\">RES\n      Jan 1, 2022\n      NaN\n      2026\n      195cm\n      84kg\n      188000.0\n      21.0\n      NaN\n    \n    \n      17657\n      270567\n      A. Demir\n      25\n      https://cdn.sofifa.net/players/270/567/23_60.png\n      Turkey\n      https://cdn.sofifa.net/flags/tr.png\n      51\n      56\n      Ümraniyespor\n      https://cdn.sofifa.net/teams/113796/30.png\n      ...\n      No\n      <span class=\"pos pos29\">RES\n      Jun 6, 2021\n      NaN\n      2023\n      190cm\n      82kg\n      142000.0\n      12.0\n      NaN\n    \n    \n      17658\n      256624\n      21 S. Czajor\n      18\n      https://cdn.sofifa.net/players/256/624/21_60.png\n      Poland\n      https://cdn.sofifa.net/flags/pl.png\n      50\n      65\n      Fleetwood Town\n      https://cdn.sofifa.net/teams/112260/30.png\n      ...\n      No\n      <span class=\"pos pos29\">RES\n      Jan 1, 2020\n      NaN\n      2021\n      187cm\n      79kg\n      214000.0\n      40.0\n      NaN\n    \n    \n      17659\n      256376\n      21 F. Jakobsson\n      20\n      https://cdn.sofifa.net/players/256/376/21_60.png\n      Sweden\n      https://cdn.sofifa.net/flags/se.png\n      50\n      61\n      IFK Norrköping\n      https://cdn.sofifa.net/teams/702/30.png\n      ...\n      No\n      <span class=\"pos pos29\">RES\n      Jan 8, 2020\n      NaN\n      2021\n      186cm\n      78kg\n      131000.0\n      30.0\n      NaN\n    \n  \n\n17660 rows × 29 columns\n\n\n\n(시도3–성공) 그냥 결측치를 제거하고 변형해도 무방..\n\ndf2 = df.drop(columns=['Loaned From', 'Best Overall Rating']).dropna()\ndf2['Release Clause'] = list(map(lambda x: _f(x) if pd.isna(x)==False else x , df2['Release Clause']))\ndf2\n\n\n\n\n\n  \n    \n      \n      ID\n      Name\n      Age\n      Photo\n      Nationality\n      Flag\n      Overall\n      Potential\n      Club\n      Club Logo\n      ...\n      Work Rate\n      Body Type\n      Real Face\n      Position\n      Joined\n      Contract Valid Until\n      Height\n      Weight\n      Release Clause\n      Kit Number\n    \n  \n  \n    \n      0\n      209658\n      L. Goretzka\n      27\n      https://cdn.sofifa.net/players/209/658/23_60.png\n      Germany\n      https://cdn.sofifa.net/flags/de.png\n      87\n      88\n      FC Bayern München\n      https://cdn.sofifa.net/teams/21/30.png\n      ...\n      High/ Medium\n      Unique\n      Yes\n      <span class=\"pos pos28\">SUB\n      Jul 1, 2018\n      2026\n      189cm\n      82kg\n      157000000.0\n      8.0\n    \n    \n      1\n      212198\n      Bruno Fernandes\n      27\n      https://cdn.sofifa.net/players/212/198/23_60.png\n      Portugal\n      https://cdn.sofifa.net/flags/pt.png\n      86\n      87\n      Manchester United\n      https://cdn.sofifa.net/teams/11/30.png\n      ...\n      High/ High\n      Unique\n      Yes\n      <span class=\"pos pos15\">LCM\n      Jan 30, 2020\n      2026\n      179cm\n      69kg\n      155000000.0\n      8.0\n    \n    \n      2\n      224334\n      M. Acuña\n      30\n      https://cdn.sofifa.net/players/224/334/23_60.png\n      Argentina\n      https://cdn.sofifa.net/flags/ar.png\n      85\n      85\n      Sevilla FC\n      https://cdn.sofifa.net/teams/481/30.png\n      ...\n      High/ High\n      Stocky (170-185)\n      No\n      <span class=\"pos pos7\">LB\n      Sep 14, 2020\n      2024\n      172cm\n      69kg\n      97700000.0\n      19.0\n    \n    \n      3\n      192985\n      K. De Bruyne\n      31\n      https://cdn.sofifa.net/players/192/985/23_60.png\n      Belgium\n      https://cdn.sofifa.net/flags/be.png\n      91\n      91\n      Manchester City\n      https://cdn.sofifa.net/teams/10/30.png\n      ...\n      High/ High\n      Unique\n      Yes\n      <span class=\"pos pos13\">RCM\n      Aug 30, 2015\n      2025\n      181cm\n      70kg\n      198900000.0\n      17.0\n    \n    \n      4\n      224232\n      N. Barella\n      25\n      https://cdn.sofifa.net/players/224/232/23_60.png\n      Italy\n      https://cdn.sofifa.net/flags/it.png\n      86\n      89\n      Inter\n      https://cdn.sofifa.net/teams/44/30.png\n      ...\n      High/ High\n      Normal (170-)\n      Yes\n      <span class=\"pos pos13\">RCM\n      Sep 1, 2020\n      2026\n      172cm\n      68kg\n      154400000.0\n      23.0\n    \n    \n      ...\n      ...\n      ...\n      ...\n      ...\n      ...\n      ...\n      ...\n      ...\n      ...\n      ...\n      ...\n      ...\n      ...\n      ...\n      ...\n      ...\n      ...\n      ...\n      ...\n      ...\n      ...\n    \n    \n      17655\n      269526\n      Deng Xiongtao\n      19\n      https://cdn.sofifa.net/players/269/526/23_60.png\n      China PR\n      https://cdn.sofifa.net/flags/cn.png\n      48\n      61\n      Meizhou Hakka\n      https://cdn.sofifa.net/teams/114628/30.png\n      ...\n      Medium/ Medium\n      Normal (185+)\n      No\n      <span class=\"pos pos29\">RES\n      Apr 11, 2022\n      2027\n      190cm\n      78kg\n      218000.0\n      35.0\n    \n    \n      17656\n      267946\n      22 Lim Jun Sub\n      17\n      https://cdn.sofifa.net/players/267/946/22_60.png\n      Korea Republic\n      https://cdn.sofifa.net/flags/kr.png\n      48\n      64\n      Jeju United FC\n      https://cdn.sofifa.net/teams/1478/30.png\n      ...\n      Medium/ Medium\n      Lean (185+)\n      No\n      <span class=\"pos pos29\">RES\n      Jan 1, 2022\n      2026\n      195cm\n      84kg\n      188000.0\n      21.0\n    \n    \n      17657\n      270567\n      A. Demir\n      25\n      https://cdn.sofifa.net/players/270/567/23_60.png\n      Turkey\n      https://cdn.sofifa.net/flags/tr.png\n      51\n      56\n      Ümraniyespor\n      https://cdn.sofifa.net/teams/113796/30.png\n      ...\n      Medium/ Medium\n      Lean (185+)\n      No\n      <span class=\"pos pos29\">RES\n      Jun 6, 2021\n      2023\n      190cm\n      82kg\n      142000.0\n      12.0\n    \n    \n      17658\n      256624\n      21 S. Czajor\n      18\n      https://cdn.sofifa.net/players/256/624/21_60.png\n      Poland\n      https://cdn.sofifa.net/flags/pl.png\n      50\n      65\n      Fleetwood Town\n      https://cdn.sofifa.net/teams/112260/30.png\n      ...\n      Medium/ Medium\n      Normal (185+)\n      No\n      <span class=\"pos pos29\">RES\n      Jan 1, 2020\n      2021\n      187cm\n      79kg\n      214000.0\n      40.0\n    \n    \n      17659\n      256376\n      21 F. Jakobsson\n      20\n      https://cdn.sofifa.net/players/256/376/21_60.png\n      Sweden\n      https://cdn.sofifa.net/flags/se.png\n      50\n      61\n      IFK Norrköping\n      https://cdn.sofifa.net/teams/702/30.png\n      ...\n      Medium/ Medium\n      Normal (185+)\n      No\n      <span class=\"pos pos29\">RES\n      Jan 8, 2020\n      2021\n      186cm\n      78kg\n      131000.0\n      30.0\n    \n  \n\n16364 rows × 27 columns\n\n\n\n\n분석의 편의를 위하여 (1) colnames를 변경하고 (2) 결측치를 제거하고 (3) 몇 가지 전 처리를 추가로 진행한 뒤 df2를 만들어서 분석하는게 좋음"
  },
  {
    "objectID": "posts/Day3/09_PandasBackend/2023-02-01-Lesson18.html#데이터분석시각화",
    "href": "posts/Day3/09_PandasBackend/2023-02-01-Lesson18.html#데이터분석시각화",
    "title": "Lesson 18: FIFA23 자료분석",
    "section": "데이터분석+시각화",
    "text": "데이터분석+시각화\n- Overall vs Potential\n\nggplot(data=df) + geom_point(aes(x='Overall',y='Potential'))\n\n\n\n\n<ggplot: (8772275859669)>\n\n\n\n뭔가 Potential > Overall 인 관계가 성립하는 듯 하다. \\(\\to\\) 우리가 생각하는 포텐셜의 의미는 사실 Potential2 = Potential - Overall 에 더 가깝다. \\(\\to\\) Potential2 = Potential - Overall 인 변수를 새로 만들고 시각화 해보자.\n\n- Potential2 = Potential - Overall 를 계산하여 새로운 열을 추가하자.\n\ndf.eval('Potential2 = Potential - Overall')\n\n\n\n\n\n  \n    \n      \n      ID\n      Name\n      Age\n      Photo\n      Nationality\n      Flag\n      Overall\n      Potential\n      Club\n      Club Logo\n      ...\n      Position\n      Joined\n      Loaned From\n      Contract Valid Until\n      Height\n      Weight\n      Release Clause\n      Kit Number\n      Best Overall Rating\n      Potential2\n    \n  \n  \n    \n      0\n      209658\n      L. Goretzka\n      27\n      https://cdn.sofifa.net/players/209/658/23_60.png\n      Germany\n      https://cdn.sofifa.net/flags/de.png\n      87\n      88\n      FC Bayern München\n      https://cdn.sofifa.net/teams/21/30.png\n      ...\n      <span class=\"pos pos28\">SUB\n      Jul 1, 2018\n      NaN\n      2026\n      189cm\n      82kg\n      €157M\n      8.0\n      NaN\n      1\n    \n    \n      1\n      212198\n      Bruno Fernandes\n      27\n      https://cdn.sofifa.net/players/212/198/23_60.png\n      Portugal\n      https://cdn.sofifa.net/flags/pt.png\n      86\n      87\n      Manchester United\n      https://cdn.sofifa.net/teams/11/30.png\n      ...\n      <span class=\"pos pos15\">LCM\n      Jan 30, 2020\n      NaN\n      2026\n      179cm\n      69kg\n      €155M\n      8.0\n      NaN\n      1\n    \n    \n      2\n      224334\n      M. Acuña\n      30\n      https://cdn.sofifa.net/players/224/334/23_60.png\n      Argentina\n      https://cdn.sofifa.net/flags/ar.png\n      85\n      85\n      Sevilla FC\n      https://cdn.sofifa.net/teams/481/30.png\n      ...\n      <span class=\"pos pos7\">LB\n      Sep 14, 2020\n      NaN\n      2024\n      172cm\n      69kg\n      €97.7M\n      19.0\n      NaN\n      0\n    \n    \n      3\n      192985\n      K. De Bruyne\n      31\n      https://cdn.sofifa.net/players/192/985/23_60.png\n      Belgium\n      https://cdn.sofifa.net/flags/be.png\n      91\n      91\n      Manchester City\n      https://cdn.sofifa.net/teams/10/30.png\n      ...\n      <span class=\"pos pos13\">RCM\n      Aug 30, 2015\n      NaN\n      2025\n      181cm\n      70kg\n      €198.9M\n      17.0\n      NaN\n      0\n    \n    \n      4\n      224232\n      N. Barella\n      25\n      https://cdn.sofifa.net/players/224/232/23_60.png\n      Italy\n      https://cdn.sofifa.net/flags/it.png\n      86\n      89\n      Inter\n      https://cdn.sofifa.net/teams/44/30.png\n      ...\n      <span class=\"pos pos13\">RCM\n      Sep 1, 2020\n      NaN\n      2026\n      172cm\n      68kg\n      €154.4M\n      23.0\n      NaN\n      3\n    \n    \n      ...\n      ...\n      ...\n      ...\n      ...\n      ...\n      ...\n      ...\n      ...\n      ...\n      ...\n      ...\n      ...\n      ...\n      ...\n      ...\n      ...\n      ...\n      ...\n      ...\n      ...\n      ...\n    \n    \n      17655\n      269526\n      Deng Xiongtao\n      19\n      https://cdn.sofifa.net/players/269/526/23_60.png\n      China PR\n      https://cdn.sofifa.net/flags/cn.png\n      48\n      61\n      Meizhou Hakka\n      https://cdn.sofifa.net/teams/114628/30.png\n      ...\n      <span class=\"pos pos29\">RES\n      Apr 11, 2022\n      NaN\n      2027\n      190cm\n      78kg\n      €218K\n      35.0\n      NaN\n      13\n    \n    \n      17656\n      267946\n      22 Lim Jun Sub\n      17\n      https://cdn.sofifa.net/players/267/946/22_60.png\n      Korea Republic\n      https://cdn.sofifa.net/flags/kr.png\n      48\n      64\n      Jeju United FC\n      https://cdn.sofifa.net/teams/1478/30.png\n      ...\n      <span class=\"pos pos29\">RES\n      Jan 1, 2022\n      NaN\n      2026\n      195cm\n      84kg\n      €188K\n      21.0\n      NaN\n      16\n    \n    \n      17657\n      270567\n      A. Demir\n      25\n      https://cdn.sofifa.net/players/270/567/23_60.png\n      Turkey\n      https://cdn.sofifa.net/flags/tr.png\n      51\n      56\n      Ümraniyespor\n      https://cdn.sofifa.net/teams/113796/30.png\n      ...\n      <span class=\"pos pos29\">RES\n      Jun 6, 2021\n      NaN\n      2023\n      190cm\n      82kg\n      €142K\n      12.0\n      NaN\n      5\n    \n    \n      17658\n      256624\n      21 S. Czajor\n      18\n      https://cdn.sofifa.net/players/256/624/21_60.png\n      Poland\n      https://cdn.sofifa.net/flags/pl.png\n      50\n      65\n      Fleetwood Town\n      https://cdn.sofifa.net/teams/112260/30.png\n      ...\n      <span class=\"pos pos29\">RES\n      Jan 1, 2020\n      NaN\n      2021\n      187cm\n      79kg\n      €214K\n      40.0\n      NaN\n      15\n    \n    \n      17659\n      256376\n      21 F. Jakobsson\n      20\n      https://cdn.sofifa.net/players/256/376/21_60.png\n      Sweden\n      https://cdn.sofifa.net/flags/se.png\n      50\n      61\n      IFK Norrköping\n      https://cdn.sofifa.net/teams/702/30.png\n      ...\n      <span class=\"pos pos29\">RES\n      Jan 8, 2020\n      NaN\n      2021\n      186cm\n      78kg\n      €131K\n      30.0\n      NaN\n      11\n    \n  \n\n17660 rows × 30 columns\n\n\n\n- 수정된 데이터프레임으로 다시 시각화를 하자.\n\nggplot(data=df.eval('Potential2 = Potential - Overall'))\\\n+ geom_point(aes(x='Overall',y='Potential2'),alpha=0.01)\n\n\n\n\n<ggplot: (8772307230189)>\n\n\n- 일부점들이 겹치므로 position = ’jitter’를 사용하여 점들을 흩뿌리자.\n\nggplot(data=df.eval('Potential2 = Potential - Overall'))\\\n+ geom_point(aes(x='Overall',y='Potential2'),alpha=0.05,position='jitter')\n\n\n\n\n<ggplot: (8772275596573)>\n\n\n- 해석 - 해석1: Overall, Potential2는 음의 상관관계가 있다. - 해석2: 0근처에 데이터가 많음 \\(\\to\\) 이미 은퇴한 선수들이 아닐까? - 해석3: Overall의 값이 작을수록 Potential2의 분산이 크다.\n- 은퇴한 선수들은 제외하고 시각화하자.\n\nggplot(data=df.eval('Potential2 = Potential - Overall').query('Potential2 > 1'))\\\n+ geom_point(aes(x='Overall',y='Potential2'),alpha=0.05,position='jitter')\n\n\n\n\n<ggplot: (8772275556513)>\n\n\n- Overall에 따라서 구간을 나누고 그 구간에 대응하는 boxplot을 그리자.\n\ndf.eval('Potential2 = Potential - Overall').query('Potential2 > 1')\\\n.Overall.describe()\n\ncount    13644.000000\nmean        61.415347\nstd          7.247821\nmin         44.000000\n25%         56.000000\n50%         61.000000\n75%         66.000000\nmax         91.000000\nName: Overall, dtype: float64\n\n\n\ndef f(x):\n    if x>66: \n        y='66<'\n    elif x>61:\n        y='61~66'\n    elif x>56:\n        y='56~61'\n    else:\n        y='<56' \n    return y\n\n\nggplot(data=df.eval('Potential2 = Potential - Overall').query('Potential2 > 1')\\\n.assign(Overall_grouped= lambda df: list(map(f,df.Overall))))\\\n    + geom_boxplot(aes(x='Overall_grouped',y='Potential2',color='Overall_grouped'))\n\n\n\n\n<ggplot: (8772275730901)>\n\n\n\nOverall_grouped = “<56” 에 대응하는 점들을 모두 뽑아서 mean(Overall)를 계산하고 그 값을 Overall_grouped = “<56” 에 대응하는 박스플랏의 x축위치로 설정\nOverall_grouped = “56~61” 에 대응하는 점들을 모두 뽑아서 mean(Overall)를 계산하고 그 값을 Overall_grouped = “56~61” 에 대응하는 박스플랏의 x축위치로 설정\nOverall_grouped = “61~66” 에 대응하는 점들을 모두 뽑아서 mean(Overall)를 계산하고 그 값을 Overall_grouped = “61~66” 에 대응하는 박스플랏의 x축위치로 설정\nOverall_grouped = “66<” 에 대응하는 점들을 모두 뽑아서 mean(Overall)를 계산하고 그 값을 Overall_grouped = “66<” 에 대응하는 박스플랏의 x축위치로 설정\n\n\ndf.eval('Potential2 = Potential - Overall').query('Potential2 > 1')\\\n.assign(Overall_grouped= lambda df: list(map(f,df.Overall)))\\\n.query(\"Overall_grouped == '66<'\").Overall.mean()\n\n71.8127687727423\n\n\n(방법1)\n\ndef g(x):\n    if x=='66<': \n        y= 71.8127687727423\n    elif x=='61~66':\n        y= 63.773918342474104\n    elif x=='56~61':\n        y= 59.155840684309005\n    else:\n        y= 52.87743190661479\n    return y\n\n\ndf.eval('Potential2 = Potential - Overall').query('Potential2 > 1')\\\n.assign(Overall_grouped= lambda df: list(map(f,df.Overall)))\\\n.assign(Overall_x= lambda df: list(map(g,df.Overall_grouped)))\n\n\n\n\n\n  \n    \n      \n      ID\n      Name\n      Age\n      Photo\n      Nationality\n      Flag\n      Overall\n      Potential\n      Club\n      Club Logo\n      ...\n      Loaned From\n      Contract Valid Until\n      Height\n      Weight\n      Release Clause\n      Kit Number\n      Best Overall Rating\n      Potential2\n      Overall_grouped\n      Overall_x\n    \n  \n  \n    \n      4\n      224232\n      N. Barella\n      25\n      https://cdn.sofifa.net/players/224/232/23_60.png\n      Italy\n      https://cdn.sofifa.net/flags/it.png\n      86\n      89\n      Inter\n      https://cdn.sofifa.net/teams/44/30.png\n      ...\n      NaN\n      2026\n      172cm\n      68kg\n      €154.4M\n      23.0\n      NaN\n      3\n      66<\n      71.812769\n    \n    \n      10\n      228251\n      L. Pellegrini\n      26\n      https://cdn.sofifa.net/players/228/251/23_60.png\n      Italy\n      https://cdn.sofifa.net/flags/it.png\n      84\n      87\n      Roma\n      https://cdn.sofifa.net/teams/52/30.png\n      ...\n      NaN\n      2026\n      186cm\n      77kg\n      €97.6M\n      7.0\n      NaN\n      3\n      66<\n      71.812769\n    \n    \n      13\n      225193\n      Merino\n      26\n      https://cdn.sofifa.net/players/225/193/23_60.png\n      Spain\n      https://cdn.sofifa.net/flags/es.png\n      83\n      86\n      Real Sociedad\n      https://cdn.sofifa.net/teams/457/30.png\n      ...\n      NaN\n      2025\n      189cm\n      83kg\n      €102.2M\n      8.0\n      NaN\n      3\n      66<\n      71.812769\n    \n    \n      17\n      228702\n      F. de Jong\n      25\n      https://cdn.sofifa.net/players/228/702/23_60.png\n      Netherlands\n      https://cdn.sofifa.net/flags/nl.png\n      87\n      92\n      FC Barcelona\n      https://cdn.sofifa.net/teams/241/30.png\n      ...\n      NaN\n      2026\n      180cm\n      74kg\n      €247.6M\n      21.0\n      NaN\n      5\n      66<\n      71.812769\n    \n    \n      21\n      231281\n      T. Alexander-Arnold\n      23\n      https://cdn.sofifa.net/players/231/281/23_60.png\n      England\n      https://cdn.sofifa.net/flags/gb-eng.png\n      87\n      90\n      Liverpool\n      https://cdn.sofifa.net/teams/9/30.png\n      ...\n      NaN\n      2025\n      180cm\n      69kg\n      €193.5M\n      66.0\n      NaN\n      3\n      66<\n      71.812769\n    \n    \n      ...\n      ...\n      ...\n      ...\n      ...\n      ...\n      ...\n      ...\n      ...\n      ...\n      ...\n      ...\n      ...\n      ...\n      ...\n      ...\n      ...\n      ...\n      ...\n      ...\n      ...\n      ...\n    \n    \n      17655\n      269526\n      Deng Xiongtao\n      19\n      https://cdn.sofifa.net/players/269/526/23_60.png\n      China PR\n      https://cdn.sofifa.net/flags/cn.png\n      48\n      61\n      Meizhou Hakka\n      https://cdn.sofifa.net/teams/114628/30.png\n      ...\n      NaN\n      2027\n      190cm\n      78kg\n      €218K\n      35.0\n      NaN\n      13\n      <56\n      52.877432\n    \n    \n      17656\n      267946\n      22 Lim Jun Sub\n      17\n      https://cdn.sofifa.net/players/267/946/22_60.png\n      Korea Republic\n      https://cdn.sofifa.net/flags/kr.png\n      48\n      64\n      Jeju United FC\n      https://cdn.sofifa.net/teams/1478/30.png\n      ...\n      NaN\n      2026\n      195cm\n      84kg\n      €188K\n      21.0\n      NaN\n      16\n      <56\n      52.877432\n    \n    \n      17657\n      270567\n      A. Demir\n      25\n      https://cdn.sofifa.net/players/270/567/23_60.png\n      Turkey\n      https://cdn.sofifa.net/flags/tr.png\n      51\n      56\n      Ümraniyespor\n      https://cdn.sofifa.net/teams/113796/30.png\n      ...\n      NaN\n      2023\n      190cm\n      82kg\n      €142K\n      12.0\n      NaN\n      5\n      <56\n      52.877432\n    \n    \n      17658\n      256624\n      21 S. Czajor\n      18\n      https://cdn.sofifa.net/players/256/624/21_60.png\n      Poland\n      https://cdn.sofifa.net/flags/pl.png\n      50\n      65\n      Fleetwood Town\n      https://cdn.sofifa.net/teams/112260/30.png\n      ...\n      NaN\n      2021\n      187cm\n      79kg\n      €214K\n      40.0\n      NaN\n      15\n      <56\n      52.877432\n    \n    \n      17659\n      256376\n      21 F. Jakobsson\n      20\n      https://cdn.sofifa.net/players/256/376/21_60.png\n      Sweden\n      https://cdn.sofifa.net/flags/se.png\n      50\n      61\n      IFK Norrköping\n      https://cdn.sofifa.net/teams/702/30.png\n      ...\n      NaN\n      2021\n      186cm\n      78kg\n      €131K\n      30.0\n      NaN\n      11\n      <56\n      52.877432\n    \n  \n\n13644 rows × 32 columns\n\n\n\n\ndf2= df.eval('Potential2 = Potential - Overall').query('Potential2 > 1')\\\n.assign(Overall_grouped= lambda df: list(map(f,df.Overall)))\\\n.assign(Overall_x= lambda df: list(map(g,df.Overall_grouped)))\ndf2\n\n\n\n\n\n  \n    \n      \n      ID\n      Name\n      Age\n      Photo\n      Nationality\n      Flag\n      Overall\n      Potential\n      Club\n      Club Logo\n      ...\n      Loaned From\n      Contract Valid Until\n      Height\n      Weight\n      Release Clause\n      Kit Number\n      Best Overall Rating\n      Potential2\n      Overall_grouped\n      Overall_x\n    \n  \n  \n    \n      4\n      224232\n      N. Barella\n      25\n      https://cdn.sofifa.net/players/224/232/23_60.png\n      Italy\n      https://cdn.sofifa.net/flags/it.png\n      86\n      89\n      Inter\n      https://cdn.sofifa.net/teams/44/30.png\n      ...\n      NaN\n      2026\n      172cm\n      68kg\n      €154.4M\n      23.0\n      NaN\n      3\n      66<\n      71.812769\n    \n    \n      10\n      228251\n      L. Pellegrini\n      26\n      https://cdn.sofifa.net/players/228/251/23_60.png\n      Italy\n      https://cdn.sofifa.net/flags/it.png\n      84\n      87\n      Roma\n      https://cdn.sofifa.net/teams/52/30.png\n      ...\n      NaN\n      2026\n      186cm\n      77kg\n      €97.6M\n      7.0\n      NaN\n      3\n      66<\n      71.812769\n    \n    \n      13\n      225193\n      Merino\n      26\n      https://cdn.sofifa.net/players/225/193/23_60.png\n      Spain\n      https://cdn.sofifa.net/flags/es.png\n      83\n      86\n      Real Sociedad\n      https://cdn.sofifa.net/teams/457/30.png\n      ...\n      NaN\n      2025\n      189cm\n      83kg\n      €102.2M\n      8.0\n      NaN\n      3\n      66<\n      71.812769\n    \n    \n      17\n      228702\n      F. de Jong\n      25\n      https://cdn.sofifa.net/players/228/702/23_60.png\n      Netherlands\n      https://cdn.sofifa.net/flags/nl.png\n      87\n      92\n      FC Barcelona\n      https://cdn.sofifa.net/teams/241/30.png\n      ...\n      NaN\n      2026\n      180cm\n      74kg\n      €247.6M\n      21.0\n      NaN\n      5\n      66<\n      71.812769\n    \n    \n      21\n      231281\n      T. Alexander-Arnold\n      23\n      https://cdn.sofifa.net/players/231/281/23_60.png\n      England\n      https://cdn.sofifa.net/flags/gb-eng.png\n      87\n      90\n      Liverpool\n      https://cdn.sofifa.net/teams/9/30.png\n      ...\n      NaN\n      2025\n      180cm\n      69kg\n      €193.5M\n      66.0\n      NaN\n      3\n      66<\n      71.812769\n    \n    \n      ...\n      ...\n      ...\n      ...\n      ...\n      ...\n      ...\n      ...\n      ...\n      ...\n      ...\n      ...\n      ...\n      ...\n      ...\n      ...\n      ...\n      ...\n      ...\n      ...\n      ...\n      ...\n    \n    \n      17655\n      269526\n      Deng Xiongtao\n      19\n      https://cdn.sofifa.net/players/269/526/23_60.png\n      China PR\n      https://cdn.sofifa.net/flags/cn.png\n      48\n      61\n      Meizhou Hakka\n      https://cdn.sofifa.net/teams/114628/30.png\n      ...\n      NaN\n      2027\n      190cm\n      78kg\n      €218K\n      35.0\n      NaN\n      13\n      <56\n      52.877432\n    \n    \n      17656\n      267946\n      22 Lim Jun Sub\n      17\n      https://cdn.sofifa.net/players/267/946/22_60.png\n      Korea Republic\n      https://cdn.sofifa.net/flags/kr.png\n      48\n      64\n      Jeju United FC\n      https://cdn.sofifa.net/teams/1478/30.png\n      ...\n      NaN\n      2026\n      195cm\n      84kg\n      €188K\n      21.0\n      NaN\n      16\n      <56\n      52.877432\n    \n    \n      17657\n      270567\n      A. Demir\n      25\n      https://cdn.sofifa.net/players/270/567/23_60.png\n      Turkey\n      https://cdn.sofifa.net/flags/tr.png\n      51\n      56\n      Ümraniyespor\n      https://cdn.sofifa.net/teams/113796/30.png\n      ...\n      NaN\n      2023\n      190cm\n      82kg\n      €142K\n      12.0\n      NaN\n      5\n      <56\n      52.877432\n    \n    \n      17658\n      256624\n      21 S. Czajor\n      18\n      https://cdn.sofifa.net/players/256/624/21_60.png\n      Poland\n      https://cdn.sofifa.net/flags/pl.png\n      50\n      65\n      Fleetwood Town\n      https://cdn.sofifa.net/teams/112260/30.png\n      ...\n      NaN\n      2021\n      187cm\n      79kg\n      €214K\n      40.0\n      NaN\n      15\n      <56\n      52.877432\n    \n    \n      17659\n      256376\n      21 F. Jakobsson\n      20\n      https://cdn.sofifa.net/players/256/376/21_60.png\n      Sweden\n      https://cdn.sofifa.net/flags/se.png\n      50\n      61\n      IFK Norrköping\n      https://cdn.sofifa.net/teams/702/30.png\n      ...\n      NaN\n      2021\n      186cm\n      78kg\n      €131K\n      30.0\n      NaN\n      11\n      <56\n      52.877432\n    \n  \n\n13644 rows × 32 columns\n\n\n\n\nggplot(data=df2)\\\n+geom_point(aes(x='Overall',y='Potential2',color='Overall_grouped'),position='jitter',alpha=0.05)\\\n+geom_boxplot(aes(x='Overall_x',y='Potential2',color='Overall_grouped'))\n\n\n\n\n<ggplot: (8772275710537)>\n\n\n(방법2)\n\n_df = df.eval('Potential2 = Potential - Overall').query('Potential2 > 1')\\\n.assign(Overall_grouped= lambda df: list(map(f,df.Overall)))\n\n\ndf3=_df.groupby(by=\"Overall_grouped\").agg({'Overall':np.mean}).reset_index()\\\n.rename(columns={'Overall':'Overall_x'}).merge(_df)\n\n\nggplot(data=df3)\\\n+geom_point(aes(x='Overall',y='Potential2',color='Overall_grouped'),position='jitter',alpha=0.05)\\\n+geom_boxplot(aes(x='Overall_x',y='Potential2',color='Overall_grouped'))\n\n\n\n\n<ggplot: (8772275671993)>"
  },
  {
    "objectID": "posts/Day3/09_PandasBackend/2023-02-01-Lesson19.html#geom_col",
    "href": "posts/Day3/09_PandasBackend/2023-02-01-Lesson19.html#geom_col",
    "title": "Lesson 19: 심슨의 역설",
    "section": "geom_col",
    "text": "geom_col\n- 예시1: 한국과 일본의 평균능력치 비교\n\ndata=df.groupby('Nationality').agg({'Overall':np.mean}).reset_index()\ndata\n\n\n\n\n\n  \n    \n      \n      Nationality\n      Overall\n    \n  \n  \n    \n      0\n      Japan\n      66.478873\n    \n    \n      1\n      Korea Republic\n      65.457627\n    \n  \n\n\n\n\n\nggplot(data)+geom_col(aes(x='Nationality',y='Overall'))\n\n\n\n\n<ggplot: (8739001076625)>\n\n\n- 예시2: 한국과 일본의 평균능력치 비교 (색상변경)\n\ndata=df.groupby('Nationality').agg({'Overall':np.mean}).reset_index()\ndata\n\n\n\n\n\n  \n    \n      \n      Nationality\n      Overall\n    \n  \n  \n    \n      0\n      Japan\n      66.478873\n    \n    \n      1\n      Korea Republic\n      65.457627\n    \n  \n\n\n\n\n\nggplot(data)+geom_col(aes(x='Nationality',y='Overall',fill='Nationality'))\n#ggplot(data)+geom_col(aes(x='Nationality',y='Overall',color='Nationality'))\n\n\n\n\n<ggplot: (8739001430581)>\n\n\n- 예시3: 한국과 일본의 평균연령 비교\n\ndata=df.groupby('Nationality').agg({'Age':np.mean}).reset_index()\ndata\n\n\n\n\n\n  \n    \n      \n      Nationality\n      Age\n    \n  \n  \n    \n      0\n      Japan\n      26.084507\n    \n    \n      1\n      Korea Republic\n      27.158192\n    \n  \n\n\n\n\n\nggplot(data)+geom_col(aes(x='Nationality',y='Age',fill='Nationality'))\n\n\n\n\n<ggplot: (8739000939717)>"
  },
  {
    "objectID": "posts/Day3/09_PandasBackend/2023-02-01-Lesson19.html#geom_col-positiondodge",
    "href": "posts/Day3/09_PandasBackend/2023-02-01-Lesson19.html#geom_col-positiondodge",
    "title": "Lesson 19: 심슨의 역설",
    "section": "geom_col + position=‘dodge’",
    "text": "geom_col + position=‘dodge’\n- 예시1: 한국과 일본의 평균연령+평균능력치 비교\n\ndata=df.groupby('Nationality').agg({'Overall':np.mean,'Age':np.mean})\\\n.stack().reset_index().rename({0:'value'},axis=1)\ndata\n\n\n\n\n\n  \n    \n      \n      Nationality\n      level_1\n      value\n    \n  \n  \n    \n      0\n      Japan\n      Overall\n      66.478873\n    \n    \n      1\n      Japan\n      Age\n      26.084507\n    \n    \n      2\n      Korea Republic\n      Overall\n      65.457627\n    \n    \n      3\n      Korea Republic\n      Age\n      27.158192\n    \n  \n\n\n\n\n\nggplot(data)+geom_col(aes(x='level_1',fill='Nationality',y='value'),position='dodge')\n\n\n\n\n<ggplot: (8739004389489)>"
  },
  {
    "objectID": "posts/Day3/09_PandasBackend/2023-02-01-Lesson19.html#geom_col-coord_flip",
    "href": "posts/Day3/09_PandasBackend/2023-02-01-Lesson19.html#geom_col-coord_flip",
    "title": "Lesson 19: 심슨의 역설",
    "section": "geom_col + coord_flip()",
    "text": "geom_col + coord_flip()\n- 예시1: 한국과 일본의 평균연령+평균능력치 비교 (90도회전)\n\ndata=df.groupby('Nationality').agg({'Overall':np.mean,'Age':np.mean})\\\n.stack().reset_index().rename({0:'value'},axis=1)\ndata\n\n\n\n\n\n  \n    \n      \n      Nationality\n      level_1\n      value\n    \n  \n  \n    \n      0\n      Japan\n      Overall\n      66.478873\n    \n    \n      1\n      Japan\n      Age\n      26.084507\n    \n    \n      2\n      Korea Republic\n      Overall\n      65.457627\n    \n    \n      3\n      Korea Republic\n      Age\n      27.158192\n    \n  \n\n\n\n\n\nggplot(data)+geom_col(aes(x='level_1',fill='Nationality',y='value'),position='dodge')\\\n+coord_flip()\n\n\n\n\n<ggplot: (8739001299161)>"
  },
  {
    "objectID": "posts/Day3/09_PandasBackend/2023-02-01-Lesson19.html#geom_col-facet_wrapvar",
    "href": "posts/Day3/09_PandasBackend/2023-02-01-Lesson19.html#geom_col-facet_wrapvar",
    "title": "Lesson 19: 심슨의 역설",
    "section": "geom_col + facet_wrap(var)",
    "text": "geom_col + facet_wrap(var)\n- 예시1: 한국과 일본의 평균연령+평균능력치 비교 (면분할)\n\ndata=df.groupby('Nationality').agg({'Overall':np.mean,'Age':np.mean})\\\n.stack().reset_index().rename({0:'value'},axis=1)\ndata\n\n\n\n\n\n  \n    \n      \n      Nationality\n      level_1\n      value\n    \n  \n  \n    \n      0\n      Japan\n      Overall\n      66.478873\n    \n    \n      1\n      Japan\n      Age\n      26.084507\n    \n    \n      2\n      Korea Republic\n      Overall\n      65.457627\n    \n    \n      3\n      Korea Republic\n      Age\n      27.158192\n    \n  \n\n\n\n\n\nggplot(data)+geom_col(aes(x='Nationality',fill='Nationality',y='value'),position='dodge')\\\n+facet_wrap('level_1')\n\n\n\n\n<ggplot: (8739001171105)>\n\n\n- 예시2: 한국과 일본의 평균연령+평균능력치 비교 (면분할)\n\ndata=df.groupby('Nationality').agg({'Overall':np.mean,'Age':np.mean})\\\n.stack().reset_index().rename({0:'value'},axis=1)\ndata\n\n\n\n\n\n  \n    \n      \n      Nationality\n      level_1\n      value\n    \n  \n  \n    \n      0\n      Japan\n      Overall\n      66.478873\n    \n    \n      1\n      Japan\n      Age\n      26.084507\n    \n    \n      2\n      Korea Republic\n      Overall\n      65.457627\n    \n    \n      3\n      Korea Republic\n      Age\n      27.158192\n    \n  \n\n\n\n\n\nggplot(data)+geom_col(aes(x='level_1',fill='Nationality',y='value'),position='dodge')\\\n+facet_wrap('Nationality')\n\n\n\n\n<ggplot: (8739005005861)>"
  },
  {
    "objectID": "posts/Day3/09_PandasBackend/2023-02-01-Lesson19.html#geom_col-facet_gridvar_y-var_x",
    "href": "posts/Day3/09_PandasBackend/2023-02-01-Lesson19.html#geom_col-facet_gridvar_y-var_x",
    "title": "Lesson 19: 심슨의 역설",
    "section": "geom_col + facet_grid(‘var_y ~ var_x’)",
    "text": "geom_col + facet_grid(‘var_y ~ var_x’)\n- 예시1: 한국과 일본의 평균연령+평균능력치+최대능력치 비교 (면분할)\n\ndata=df.groupby('Nationality').agg({'Overall':[np.mean,np.max],'Age':np.mean})\\\n.melt(ignore_index=False).reset_index()\ndata\n\n\n\n\n\n  \n    \n      \n      Nationality\n      variable_0\n      variable_1\n      value\n    \n  \n  \n    \n      0\n      Japan\n      Overall\n      mean\n      66.478873\n    \n    \n      1\n      Korea Republic\n      Overall\n      mean\n      65.457627\n    \n    \n      2\n      Japan\n      Overall\n      amax\n      79.000000\n    \n    \n      3\n      Korea Republic\n      Overall\n      amax\n      89.000000\n    \n    \n      4\n      Japan\n      Age\n      mean\n      26.084507\n    \n    \n      5\n      Korea Republic\n      Age\n      mean\n      27.158192\n    \n  \n\n\n\n\n\nggplot(data)+geom_col(aes(fill='Nationality',x='Nationality',y='value'),position='dodge')\\\n+facet_grid('variable_1~variable_0')\n\n\n\n\n<ggplot: (8739001454385)>"
  },
  {
    "objectID": "posts/Day3/09_PandasBackend/2023-02-01-Lesson19.html#geom_bar-vs-geom_col",
    "href": "posts/Day3/09_PandasBackend/2023-02-01-Lesson19.html#geom_bar-vs-geom_col",
    "title": "Lesson 19: 심슨의 역설",
    "section": "geom_bar vs geom_col",
    "text": "geom_bar vs geom_col\n- 예시1: 한국과 일본의 단순 선수 숫자 비교 (with goem_col)\n\ndata=df.groupby('Nationality').agg({'Age':'count'}).reset_index().rename({'Age':'count'},axis=1)\ndata\n\n\n\n\n\n  \n    \n      \n      Nationality\n      count\n    \n  \n  \n    \n      0\n      Japan\n      284\n    \n    \n      1\n      Korea Republic\n      177\n    \n  \n\n\n\n\n\nggplot(data)+geom_col(aes(x='Nationality',fill='Nationality',y='count'))\n\n\n\n\n<ggplot: (8739001309845)>\n\n\n- 예시2: 한국과 일본의 단순 선수 숫자 비교 (with goem_bar)\n\nggplot(df)+geom_bar(aes(x='Nationality',fill='Nationality'))\n\n\n\n\n<ggplot: (8739003315533)>\n\n\n\n특징1: 원래 데이터프레임 그대로 하는게 아니라 뭔가 변형된 값이 출력 (정확하게는 groupby + count가 변형요소)\n특징2: y는 당연히 count이므로 y를 명시할 필요가 없음. (잘 생각해보면 명시하고 싶어도 명시할 수 없음, y는 groupby + count 에 의해서 계산된 값이고 df자체에는 존재하지 않음)\n\n- 이렇게 약속된 변형은 stat='count' 옵션 때문에 가능함\n\nstat=’count’는 그룹바이이후에 count를 하라는 의미\n\n\nggplot(df)+geom_bar(aes(x='Nationality',fill='Nationality'),stat='count')\n\n\n\n\n<ggplot: (8739005443049)>\n\n\n- stat='identity' 로 옵션을 바꾸면 약속된 변환이 수행되지 않음\n\nstat=’identity’는 아무 변환도 하지말라는 의미\n\n\nggplot(df)+geom_bar(aes(x='Nationality',fill='Nationality'),stat='identity')\n\nKeyError: 'y'\n\n\n\n에러가난다.\n\n(참고) 사실 아래의 3개의 코드가 모두 같다. <– 수업시간에 설명 X\n\nggplot(df)+geom_bar(aes(x='Nationality',y='..count..',fill='Nationality'),stat='count')\nggplot(df)+geom_bar(aes(x='Nationality',fill='Nationality'),stat='count') # y='..count..' 생략,\nggplot(df)+geom_bar(aes(x='Nationality',fill='Nationality')) # y='..count..' 생략, stat='count' 생략\n\n\n\n\n<ggplot: (8739004080929)>"
  },
  {
    "objectID": "posts/Day3/09_PandasBackend/2023-02-01-Lesson19.html#geom_bar의-불편한점",
    "href": "posts/Day3/09_PandasBackend/2023-02-01-Lesson19.html#geom_bar의-불편한점",
    "title": "Lesson 19: 심슨의 역설",
    "section": "geom_bar()의 불편한점",
    "text": "geom_bar()의 불편한점\n- 사실 편하라고 만든것 같은데, 그닥 편하지 않음.\n\n편하라고 만든 점1: groupby를 자동으로 해줘서 groupby를 못하는 유저들이 사용하기 편리하게 함 -> 그런데 우리는 groupby 잘함\n편하라고 만든 점2: groupby이후 count연산을 알아서 해줌 -> 그런데 count연산만 알아서해주고 그 이외의 연산은 잘 지원안됨\n\n- 결론: groupby + count 조합에서만 편리하고 나머지는 편하지 않다.\n- 불편한 예시: 나라별 overall의 평균을 geom_bar()로 플랏해보라.\n\ndata= df.groupby('Nationality').agg({'Overall':np.mean}).reset_index()\ndata\n\n\n\n\n\n  \n    \n      \n      Nationality\n      Overall\n    \n  \n  \n    \n      0\n      Japan\n      66.478873\n    \n    \n      1\n      Korea Republic\n      65.457627\n    \n  \n\n\n\n\n\nggplot(data)+geom_bar(aes(x='Nationality',y='Overall',fill='Nationality'),stat='identity')\nggplot(data)+geom_col(aes(x='Nationality',y='Overall',fill='Nationality'))\n\n\n\n\n<ggplot: (8738999896737)>"
  },
  {
    "objectID": "posts/Day3/09_PandasBackend/2023-02-01-Lesson19.html#시각화1-전체합격률",
    "href": "posts/Day3/09_PandasBackend/2023-02-01-Lesson19.html#시각화1-전체합격률",
    "title": "Lesson 19: 심슨의 역설",
    "section": "시각화1: 전체합격률",
    "text": "시각화1: 전체합격률\n- df1\n\ndf.groupby(['gender','result']).agg({'count':np.sum}).reset_index()\n\n\n\n\n\n  \n    \n      \n      gender\n      result\n      count\n    \n  \n  \n    \n      0\n      female\n      fail\n      1063\n    \n    \n      1\n      female\n      pass\n      772\n    \n    \n      2\n      male\n      fail\n      1291\n    \n    \n      3\n      male\n      pass\n      1400\n    \n  \n\n\n\n\n- df2\n\ndf.groupby('gender').agg({'count':np.sum}).reset_index().rename({'count':'count2'},axis=1)\n\n\n\n\n\n  \n    \n      \n      gender\n      count2\n    \n  \n  \n    \n      0\n      female\n      1835\n    \n    \n      1\n      male\n      2691\n    \n  \n\n\n\n\n- merge: 두개의 데이터프레임을 합친다\n\ndf.groupby(['gender','result']).agg({'count':np.sum}).reset_index()\\\n.merge(df.groupby('gender').agg({'count':np.sum}).reset_index().rename({'count':'count2'},axis=1))\n\n\n\n\n\n  \n    \n      \n      gender\n      result\n      count\n      count2\n    \n  \n  \n    \n      0\n      female\n      fail\n      1063\n      1835\n    \n    \n      1\n      female\n      pass\n      772\n      1835\n    \n    \n      2\n      male\n      fail\n      1291\n      2691\n    \n    \n      3\n      male\n      pass\n      1400\n      2691\n    \n  \n\n\n\n\n- 비율계산\n\ndf.groupby(['gender','result']).agg({'count':np.sum}).reset_index()\\\n.merge(df.groupby('gender').agg({'count':np.sum}).reset_index().rename({'count':'count2'},axis=1))\\\n.eval('rate = count/count2')\n\n\n\n\n\n  \n    \n      \n      gender\n      result\n      count\n      count2\n      rate\n    \n  \n  \n    \n      0\n      female\n      fail\n      1063\n      1835\n      0.579292\n    \n    \n      1\n      female\n      pass\n      772\n      1835\n      0.420708\n    \n    \n      2\n      male\n      fail\n      1291\n      2691\n      0.479747\n    \n    \n      3\n      male\n      pass\n      1400\n      2691\n      0.520253\n    \n  \n\n\n\n\n- 시각화\n\ndata1= df.groupby(['gender','result']).agg({'count':np.sum}).reset_index()\\\n.merge(df.groupby('gender').agg({'count':np.sum}).reset_index().rename({'count':'count2'},axis=1))\\\n.eval('rate = count/count2')\nggplot(data1.query('result==\"pass\"'))+geom_col(aes(x='gender',fill='gender',y='rate'))\n\n\n\n\n<ggplot: (8789343060161)>\n\n\n- 결론: 남자의 합격률이 더 높다. \\(\\to\\) 성차별이 있어보인다(?)"
  },
  {
    "objectID": "posts/Day3/09_PandasBackend/2023-02-01-Lesson19.html#시각화2-학과별-합격률",
    "href": "posts/Day3/09_PandasBackend/2023-02-01-Lesson19.html#시각화2-학과별-합격률",
    "title": "Lesson 19: 심슨의 역설",
    "section": "시각화2: 학과별 합격률",
    "text": "시각화2: 학과별 합격률\n- df2\n\ndf.groupby(['department','gender']).agg({'count':np.sum}).reset_index().rename({'count':'count2'},axis=1)\n\n\n\n\n\n  \n    \n      \n      department\n      gender\n      count2\n    \n  \n  \n    \n      0\n      A\n      female\n      108\n    \n    \n      1\n      A\n      male\n      825\n    \n    \n      2\n      B\n      female\n      25\n    \n    \n      3\n      B\n      male\n      560\n    \n    \n      4\n      C\n      female\n      593\n    \n    \n      5\n      C\n      male\n      325\n    \n    \n      6\n      D\n      female\n      375\n    \n    \n      7\n      D\n      male\n      417\n    \n    \n      8\n      E\n      female\n      393\n    \n    \n      9\n      E\n      male\n      191\n    \n    \n      10\n      F\n      female\n      341\n    \n    \n      11\n      F\n      male\n      373\n    \n  \n\n\n\n\n- merge\n\ndf.merge(df.groupby(['department','gender']).agg({'count':np.sum}).reset_index().rename({'count':'count2'},axis=1))\\\n.eval('rate = count/count2')\n\n\n\n\n\n  \n    \n      \n      department\n      result\n      gender\n      count\n      count2\n      rate\n    \n  \n  \n    \n      0\n      A\n      fail\n      female\n      19\n      108\n      0.175926\n    \n    \n      1\n      A\n      pass\n      female\n      89\n      108\n      0.824074\n    \n    \n      2\n      A\n      fail\n      male\n      314\n      825\n      0.380606\n    \n    \n      3\n      A\n      pass\n      male\n      511\n      825\n      0.619394\n    \n    \n      4\n      B\n      fail\n      female\n      7\n      25\n      0.280000\n    \n    \n      5\n      B\n      pass\n      female\n      18\n      25\n      0.720000\n    \n    \n      6\n      B\n      fail\n      male\n      208\n      560\n      0.371429\n    \n    \n      7\n      B\n      pass\n      male\n      352\n      560\n      0.628571\n    \n    \n      8\n      C\n      fail\n      female\n      391\n      593\n      0.659359\n    \n    \n      9\n      C\n      pass\n      female\n      202\n      593\n      0.340641\n    \n    \n      10\n      C\n      fail\n      male\n      204\n      325\n      0.627692\n    \n    \n      11\n      C\n      pass\n      male\n      121\n      325\n      0.372308\n    \n    \n      12\n      D\n      fail\n      female\n      244\n      375\n      0.650667\n    \n    \n      13\n      D\n      pass\n      female\n      131\n      375\n      0.349333\n    \n    \n      14\n      D\n      fail\n      male\n      279\n      417\n      0.669065\n    \n    \n      15\n      D\n      pass\n      male\n      138\n      417\n      0.330935\n    \n    \n      16\n      E\n      fail\n      female\n      299\n      393\n      0.760814\n    \n    \n      17\n      E\n      pass\n      female\n      94\n      393\n      0.239186\n    \n    \n      18\n      E\n      fail\n      male\n      137\n      191\n      0.717277\n    \n    \n      19\n      E\n      pass\n      male\n      54\n      191\n      0.282723\n    \n    \n      20\n      F\n      fail\n      female\n      103\n      341\n      0.302053\n    \n    \n      21\n      F\n      pass\n      female\n      238\n      341\n      0.697947\n    \n    \n      22\n      F\n      fail\n      male\n      149\n      373\n      0.399464\n    \n    \n      23\n      F\n      pass\n      male\n      224\n      373\n      0.600536\n    \n  \n\n\n\n\n- 시각화\n\ndata2=df.merge(df.groupby(['department','gender']).agg({'count':np.sum}).reset_index().rename({'count':'count2'},axis=1))\\\n.eval('rate = count/count2')\nggplot(data2.query('result==\"pass\"'))+geom_col(aes(x='gender',fill='gender',y='rate'))\\\n+facet_wrap('department')\n\n\n\n\n<ggplot: (8789343111249)>\n\n\n\n학과별로 살펴보니 오히려 A,B,F,D의 경우 여성의 합격률이 높다.\n\n- 교재에서 설명한 이유: 여성이 합격률이 낮은 학과에만 많이 지원하였기 때문\n\nggplot(data2.query('result==\"pass\"'))+geom_col(aes(x='department',y='count2',fill='gender'),position='dodge')\n\n\n\n\n<ggplot: (8789343070225)>\n\n\n\n살펴보니 합격률이 높은 A,B학과의 경우 상대적으로 남성이 많이 지원하였음. 합격률이 낮은 C,D학과는 상대적으로 여성이 많이 지원함. D,F의 지원수는 비슷"
  },
  {
    "objectID": "posts/Day3/07_DataWrangling/2023-02-01-Lesson14.html#flights-data",
    "href": "posts/Day3/07_DataWrangling/2023-02-01-Lesson14.html#flights-data",
    "title": "Lesson 14: groupby",
    "section": "flights data",
    "text": "flights data\n\ndf=pd.read_csv('https://raw.githubusercontent.com/PacktPublishing/Pandas-Cookbook/master/data/flights.csv')\ndf.info()\n\n<class 'pandas.core.frame.DataFrame'>\nRangeIndex: 58492 entries, 0 to 58491\nData columns (total 14 columns):\n #   Column     Non-Null Count  Dtype  \n---  ------     --------------  -----  \n 0   MONTH      58492 non-null  int64  \n 1   DAY        58492 non-null  int64  \n 2   WEEKDAY    58492 non-null  int64  \n 3   AIRLINE    58492 non-null  object \n 4   ORG_AIR    58492 non-null  object \n 5   DEST_AIR   58492 non-null  object \n 6   SCHED_DEP  58492 non-null  int64  \n 7   DEP_DELAY  57659 non-null  float64\n 8   AIR_TIME   57474 non-null  float64\n 9   DIST       58492 non-null  int64  \n 10  SCHED_ARR  58492 non-null  int64  \n 11  ARR_DELAY  57474 non-null  float64\n 12  DIVERTED   58492 non-null  int64  \n 13  CANCELLED  58492 non-null  int64  \ndtypes: float64(3), int64(8), object(3)\nmemory usage: 6.2+ MB"
  },
  {
    "objectID": "posts/Day3/07_DataWrangling/2023-02-01-Lesson14.html#get_groups",
    "href": "posts/Day3/07_DataWrangling/2023-02-01-Lesson14.html#get_groups",
    "title": "Lesson 14: groupby",
    "section": "get_groups",
    "text": "get_groups\n- groupby - 데이터프레임을 여러개의 서브데이터프레임으로 나누는 기슨 - 단독으로 쓸 이유는 별로 없다. \\(\\to\\) 그룹을 나누고 each 그룹마다 어떠한 “변수”에 “연산”을 하기 위함.\n\ndf.groupby(by=\"AIRLINE\")\n\n<pandas.core.groupby.generic.DataFrameGroupBy object at 0x7fa7462529d0>\n\n\n\n지금 이것이 항공사별로 데이터프레임이 나누어진 상태임\n\n- 진짜 sub dataframe 으로 나누어져 있는지 확인\n\ngrouped = df.groupby(by=\"AIRLINE\")\ngrouped.groups.keys()\n\ndict_keys(['AA', 'AS', 'B6', 'DL', 'EV', 'F9', 'HA', 'MQ', 'NK', 'OO', 'UA', 'US', 'VX', 'WN'])\n\n\n\ndisplay(grouped.get_group('AS'))\n\n\n\n\n\n  \n    \n      \n      MONTH\n      DAY\n      WEEKDAY\n      AIRLINE\n      ORG_AIR\n      DEST_AIR\n      SCHED_DEP\n      DEP_DELAY\n      AIR_TIME\n      DIST\n      SCHED_ARR\n      ARR_DELAY\n      DIVERTED\n      CANCELLED\n    \n  \n  \n    \n      38\n      1\n      1\n      4\n      AS\n      PHX\n      SEA\n      1505\n      -2.0\n      155.0\n      1107\n      1702\n      -3.0\n      0\n      0\n    \n    \n      198\n      1\n      2\n      5\n      AS\n      LAX\n      SEA\n      2110\n      5.0\n      145.0\n      954\n      2352\n      8.0\n      0\n      0\n    \n    \n      241\n      1\n      2\n      5\n      AS\n      LAS\n      PDX\n      650\n      -5.0\n      117.0\n      763\n      906\n      -3.0\n      0\n      0\n    \n    \n      277\n      1\n      2\n      5\n      AS\n      ORD\n      ANC\n      935\n      -1.0\n      402.0\n      2846\n      1339\n      -6.0\n      0\n      0\n    \n    \n      397\n      1\n      3\n      6\n      AS\n      LAS\n      SEA\n      1300\n      48.0\n      137.0\n      867\n      1535\n      47.0\n      0\n      0\n    \n    \n      ...\n      ...\n      ...\n      ...\n      ...\n      ...\n      ...\n      ...\n      ...\n      ...\n      ...\n      ...\n      ...\n      ...\n      ...\n    \n    \n      58305\n      12\n      30\n      3\n      AS\n      LAX\n      SEA\n      1325\n      -2.0\n      134.0\n      954\n      1608\n      -7.0\n      0\n      0\n    \n    \n      58355\n      12\n      31\n      4\n      AS\n      PHX\n      SEA\n      1200\n      -5.0\n      145.0\n      1107\n      1407\n      -24.0\n      0\n      0\n    \n    \n      58404\n      12\n      31\n      4\n      AS\n      SFO\n      SLC\n      2110\n      -2.0\n      80.0\n      599\n      2358\n      -4.0\n      0\n      0\n    \n    \n      58407\n      12\n      31\n      4\n      AS\n      SFO\n      PDX\n      645\n      -2.0\n      81.0\n      550\n      832\n      -3.0\n      0\n      0\n    \n    \n      58428\n      12\n      31\n      4\n      AS\n      LAX\n      SEA\n      1420\n      -8.0\n      127.0\n      954\n      1709\n      -25.0\n      0\n      0\n    \n  \n\n768 rows × 14 columns\n\n\n\n\n#collapse_output\nfor key in grouped.groups.keys():\n    display(grouped.get_group(key))\n\n\n\n\n\n  \n    \n      \n      MONTH\n      DAY\n      WEEKDAY\n      AIRLINE\n      ORG_AIR\n      DEST_AIR\n      SCHED_DEP\n      DEP_DELAY\n      AIR_TIME\n      DIST\n      SCHED_ARR\n      ARR_DELAY\n      DIVERTED\n      CANCELLED\n    \n  \n  \n    \n      3\n      1\n      1\n      4\n      AA\n      DFW\n      DCA\n      1555\n      7.0\n      126.0\n      1192\n      1935\n      -7.0\n      0\n      0\n    \n    \n      6\n      1\n      1\n      4\n      AA\n      DFW\n      MSY\n      1250\n      84.0\n      64.0\n      447\n      1410\n      83.0\n      0\n      0\n    \n    \n      8\n      1\n      1\n      4\n      AA\n      ORD\n      STL\n      1845\n      -5.0\n      44.0\n      258\n      1950\n      -5.0\n      0\n      0\n    \n    \n      15\n      1\n      1\n      4\n      AA\n      DEN\n      DFW\n      1445\n      -6.0\n      93.0\n      641\n      1745\n      4.0\n      0\n      0\n    \n    \n      26\n      1\n      1\n      4\n      AA\n      LAX\n      AUS\n      1430\n      33.0\n      157.0\n      1242\n      1925\n      41.0\n      0\n      0\n    \n    \n      ...\n      ...\n      ...\n      ...\n      ...\n      ...\n      ...\n      ...\n      ...\n      ...\n      ...\n      ...\n      ...\n      ...\n      ...\n    \n    \n      58470\n      12\n      31\n      4\n      AA\n      DFW\n      FAT\n      1020\n      -3.0\n      196.0\n      1313\n      1156\n      -2.0\n      0\n      0\n    \n    \n      58475\n      12\n      31\n      4\n      AA\n      IAH\n      CLT\n      710\n      1.0\n      113.0\n      912\n      1037\n      -12.0\n      0\n      0\n    \n    \n      58476\n      12\n      31\n      4\n      AA\n      DFW\n      TPA\n      1020\n      -3.0\n      121.0\n      929\n      1340\n      -6.0\n      0\n      0\n    \n    \n      58479\n      12\n      31\n      4\n      AA\n      DFW\n      ELP\n      1200\n      3.0\n      94.0\n      551\n      1250\n      13.0\n      0\n      0\n    \n    \n      58487\n      12\n      31\n      4\n      AA\n      SFO\n      DFW\n      515\n      5.0\n      166.0\n      1464\n      1045\n      -19.0\n      0\n      0\n    \n  \n\n8900 rows × 14 columns\n\n\n\n\n\n\n\n  \n    \n      \n      MONTH\n      DAY\n      WEEKDAY\n      AIRLINE\n      ORG_AIR\n      DEST_AIR\n      SCHED_DEP\n      DEP_DELAY\n      AIR_TIME\n      DIST\n      SCHED_ARR\n      ARR_DELAY\n      DIVERTED\n      CANCELLED\n    \n  \n  \n    \n      38\n      1\n      1\n      4\n      AS\n      PHX\n      SEA\n      1505\n      -2.0\n      155.0\n      1107\n      1702\n      -3.0\n      0\n      0\n    \n    \n      198\n      1\n      2\n      5\n      AS\n      LAX\n      SEA\n      2110\n      5.0\n      145.0\n      954\n      2352\n      8.0\n      0\n      0\n    \n    \n      241\n      1\n      2\n      5\n      AS\n      LAS\n      PDX\n      650\n      -5.0\n      117.0\n      763\n      906\n      -3.0\n      0\n      0\n    \n    \n      277\n      1\n      2\n      5\n      AS\n      ORD\n      ANC\n      935\n      -1.0\n      402.0\n      2846\n      1339\n      -6.0\n      0\n      0\n    \n    \n      397\n      1\n      3\n      6\n      AS\n      LAS\n      SEA\n      1300\n      48.0\n      137.0\n      867\n      1535\n      47.0\n      0\n      0\n    \n    \n      ...\n      ...\n      ...\n      ...\n      ...\n      ...\n      ...\n      ...\n      ...\n      ...\n      ...\n      ...\n      ...\n      ...\n      ...\n    \n    \n      58305\n      12\n      30\n      3\n      AS\n      LAX\n      SEA\n      1325\n      -2.0\n      134.0\n      954\n      1608\n      -7.0\n      0\n      0\n    \n    \n      58355\n      12\n      31\n      4\n      AS\n      PHX\n      SEA\n      1200\n      -5.0\n      145.0\n      1107\n      1407\n      -24.0\n      0\n      0\n    \n    \n      58404\n      12\n      31\n      4\n      AS\n      SFO\n      SLC\n      2110\n      -2.0\n      80.0\n      599\n      2358\n      -4.0\n      0\n      0\n    \n    \n      58407\n      12\n      31\n      4\n      AS\n      SFO\n      PDX\n      645\n      -2.0\n      81.0\n      550\n      832\n      -3.0\n      0\n      0\n    \n    \n      58428\n      12\n      31\n      4\n      AS\n      LAX\n      SEA\n      1420\n      -8.0\n      127.0\n      954\n      1709\n      -25.0\n      0\n      0\n    \n  \n\n768 rows × 14 columns\n\n\n\n\n\n\n\n  \n    \n      \n      MONTH\n      DAY\n      WEEKDAY\n      AIRLINE\n      ORG_AIR\n      DEST_AIR\n      SCHED_DEP\n      DEP_DELAY\n      AIR_TIME\n      DIST\n      SCHED_ARR\n      ARR_DELAY\n      DIVERTED\n      CANCELLED\n    \n  \n  \n    \n      123\n      1\n      1\n      4\n      B6\n      LAS\n      BOS\n      1230\n      0.0\n      246.0\n      2381\n      2026\n      -27.0\n      0\n      0\n    \n    \n      127\n      1\n      1\n      4\n      B6\n      LAS\n      BOS\n      2359\n      68.0\n      247.0\n      2381\n      749\n      46.0\n      0\n      0\n    \n    \n      239\n      1\n      2\n      5\n      B6\n      ORD\n      BOS\n      540\n      -8.0\n      96.0\n      867\n      856\n      -22.0\n      0\n      0\n    \n    \n      333\n      1\n      3\n      6\n      B6\n      LAX\n      FLL\n      2237\n      32.0\n      270.0\n      2342\n      619\n      42.0\n      0\n      0\n    \n    \n      548\n      1\n      4\n      7\n      B6\n      SFO\n      FLL\n      2307\n      -4.0\n      298.0\n      2583\n      724\n      -1.0\n      0\n      0\n    \n    \n      ...\n      ...\n      ...\n      ...\n      ...\n      ...\n      ...\n      ...\n      ...\n      ...\n      ...\n      ...\n      ...\n      ...\n      ...\n    \n    \n      58262\n      12\n      30\n      3\n      B6\n      SFO\n      LGB\n      1921\n      -6.0\n      57.0\n      354\n      2038\n      -14.0\n      0\n      0\n    \n    \n      58301\n      12\n      30\n      3\n      B6\n      LAX\n      JFK\n      630\n      4.0\n      285.0\n      2475\n      1445\n      -6.0\n      0\n      0\n    \n    \n      58425\n      12\n      31\n      4\n      B6\n      ORD\n      SJU\n      700\n      239.0\n      250.0\n      2072\n      1335\n      239.0\n      0\n      0\n    \n    \n      58477\n      12\n      31\n      4\n      B6\n      DFW\n      BOS\n      1145\n      12.0\n      161.0\n      1562\n      1608\n      -14.0\n      0\n      0\n    \n    \n      58483\n      12\n      31\n      4\n      B6\n      PHX\n      BOS\n      2236\n      -12.0\n      231.0\n      2300\n      515\n      -45.0\n      0\n      0\n    \n  \n\n543 rows × 14 columns\n\n\n\n\n\n\n\n  \n    \n      \n      MONTH\n      DAY\n      WEEKDAY\n      AIRLINE\n      ORG_AIR\n      DEST_AIR\n      SCHED_DEP\n      DEP_DELAY\n      AIR_TIME\n      DIST\n      SCHED_ARR\n      ARR_DELAY\n      DIVERTED\n      CANCELLED\n    \n  \n  \n    \n      53\n      1\n      1\n      4\n      DL\n      LAS\n      MSP\n      713\n      -5.0\n      156.0\n      1299\n      1220\n      -18.0\n      0\n      0\n    \n    \n      57\n      1\n      1\n      4\n      DL\n      MSP\n      RSW\n      700\n      -1.0\n      169.0\n      1416\n      1130\n      -20.0\n      0\n      0\n    \n    \n      77\n      1\n      1\n      4\n      DL\n      LAX\n      ATL\n      1130\n      24.0\n      217.0\n      1947\n      1840\n      16.0\n      0\n      0\n    \n    \n      79\n      1\n      1\n      4\n      DL\n      LAX\n      CMH\n      2146\n      -3.0\n      223.0\n      1995\n      459\n      -13.0\n      0\n      0\n    \n    \n      85\n      1\n      1\n      4\n      DL\n      ATL\n      OKC\n      2059\n      -4.0\n      116.0\n      761\n      2227\n      -12.0\n      0\n      0\n    \n    \n      ...\n      ...\n      ...\n      ...\n      ...\n      ...\n      ...\n      ...\n      ...\n      ...\n      ...\n      ...\n      ...\n      ...\n      ...\n    \n    \n      58440\n      12\n      31\n      4\n      DL\n      ATL\n      CVG\n      1611\n      -4.0\n      61.0\n      373\n      1736\n      -6.0\n      0\n      0\n    \n    \n      58448\n      12\n      31\n      4\n      DL\n      ATL\n      SRQ\n      1610\n      0.0\n      61.0\n      444\n      1740\n      -13.0\n      0\n      0\n    \n    \n      58464\n      12\n      31\n      4\n      DL\n      LAX\n      SFO\n      700\n      108.0\n      54.0\n      337\n      825\n      105.0\n      0\n      0\n    \n    \n      58467\n      12\n      31\n      4\n      DL\n      ATL\n      IND\n      1235\n      -3.0\n      63.0\n      432\n      1407\n      -13.0\n      0\n      0\n    \n    \n      58485\n      12\n      31\n      4\n      DL\n      ATL\n      CMH\n      2206\n      2.0\n      64.0\n      447\n      2338\n      -8.0\n      0\n      0\n    \n  \n\n10601 rows × 14 columns\n\n\n\n\n\n\n\n  \n    \n      \n      MONTH\n      DAY\n      WEEKDAY\n      AIRLINE\n      ORG_AIR\n      DEST_AIR\n      SCHED_DEP\n      DEP_DELAY\n      AIR_TIME\n      DIST\n      SCHED_ARR\n      ARR_DELAY\n      DIVERTED\n      CANCELLED\n    \n  \n  \n    \n      11\n      1\n      1\n      4\n      EV\n      ORD\n      JAN\n      1155\n      6.0\n      113.0\n      677\n      1403\n      5.0\n      0\n      0\n    \n    \n      13\n      1\n      1\n      4\n      EV\n      ORD\n      CMH\n      1010\n      -2.0\n      46.0\n      296\n      1228\n      -9.0\n      0\n      0\n    \n    \n      29\n      1\n      1\n      4\n      EV\n      ORD\n      IND\n      1025\n      -6.0\n      29.0\n      177\n      1228\n      -19.0\n      0\n      0\n    \n    \n      40\n      1\n      1\n      4\n      EV\n      IAH\n      CLE\n      1038\n      -3.0\n      126.0\n      1091\n      1425\n      -18.0\n      0\n      0\n    \n    \n      69\n      1\n      1\n      4\n      EV\n      ATL\n      RAP\n      1930\n      -5.0\n      181.0\n      1230\n      2104\n      -15.0\n      0\n      0\n    \n    \n      ...\n      ...\n      ...\n      ...\n      ...\n      ...\n      ...\n      ...\n      ...\n      ...\n      ...\n      ...\n      ...\n      ...\n      ...\n    \n    \n      58445\n      12\n      31\n      4\n      EV\n      DFW\n      TXK\n      850\n      -5.0\n      30.0\n      181\n      948\n      -17.0\n      0\n      0\n    \n    \n      58452\n      12\n      31\n      4\n      EV\n      DFW\n      SHV\n      1650\n      -4.0\n      32.0\n      190\n      1746\n      -12.0\n      0\n      0\n    \n    \n      58459\n      12\n      31\n      4\n      EV\n      MSP\n      ORD\n      1435\n      18.0\n      61.0\n      334\n      1609\n      3.0\n      0\n      0\n    \n    \n      58463\n      12\n      31\n      4\n      EV\n      ORD\n      MSN\n      1220\n      18.0\n      32.0\n      108\n      1319\n      27.0\n      0\n      0\n    \n    \n      58486\n      12\n      31\n      4\n      EV\n      DFW\n      LFT\n      850\n      21.0\n      52.0\n      351\n      1012\n      14.0\n      0\n      0\n    \n  \n\n5858 rows × 14 columns\n\n\n\n\n\n\n\n  \n    \n      \n      MONTH\n      DAY\n      WEEKDAY\n      AIRLINE\n      ORG_AIR\n      DEST_AIR\n      SCHED_DEP\n      DEP_DELAY\n      AIR_TIME\n      DIST\n      SCHED_ARR\n      ARR_DELAY\n      DIVERTED\n      CANCELLED\n    \n  \n  \n    \n      7\n      1\n      1\n      4\n      F9\n      SFO\n      PHX\n      1020\n      -7.0\n      91.0\n      651\n      1315\n      -6.0\n      0\n      0\n    \n    \n      93\n      1\n      1\n      4\n      F9\n      ATL\n      DEN\n      859\n      16.0\n      181.0\n      1199\n      1026\n      10.0\n      0\n      0\n    \n    \n      209\n      1\n      2\n      5\n      F9\n      MSP\n      DEN\n      1025\n      -6.0\n      97.0\n      680\n      1134\n      -13.0\n      0\n      0\n    \n    \n      232\n      1\n      2\n      5\n      F9\n      DEN\n      PHX\n      2040\n      -7.0\n      83.0\n      602\n      2228\n      -18.0\n      0\n      0\n    \n    \n      247\n      1\n      2\n      5\n      F9\n      ORD\n      ATL\n      730\n      10.0\n      86.0\n      606\n      1020\n      23.0\n      0\n      0\n    \n    \n      ...\n      ...\n      ...\n      ...\n      ...\n      ...\n      ...\n      ...\n      ...\n      ...\n      ...\n      ...\n      ...\n      ...\n      ...\n    \n    \n      58288\n      12\n      30\n      3\n      F9\n      DEN\n      ORD\n      625\n      -4.0\n      136.0\n      888\n      1000\n      14.0\n      0\n      0\n    \n    \n      58331\n      12\n      30\n      3\n      F9\n      ORD\n      PHX\n      825\n      18.0\n      207.0\n      1440\n      1127\n      14.0\n      0\n      0\n    \n    \n      58447\n      12\n      31\n      4\n      F9\n      DEN\n      LAS\n      1245\n      13.0\n      94.0\n      628\n      1340\n      13.0\n      0\n      0\n    \n    \n      58449\n      12\n      31\n      4\n      F9\n      DEN\n      MCO\n      645\n      11.0\n      169.0\n      1546\n      1224\n      -11.0\n      0\n      0\n    \n    \n      58488\n      12\n      31\n      4\n      F9\n      LAS\n      SFO\n      1910\n      13.0\n      71.0\n      414\n      2050\n      4.0\n      0\n      0\n    \n  \n\n1317 rows × 14 columns\n\n\n\n\n\n\n\n  \n    \n      \n      MONTH\n      DAY\n      WEEKDAY\n      AIRLINE\n      ORG_AIR\n      DEST_AIR\n      SCHED_DEP\n      DEP_DELAY\n      AIR_TIME\n      DIST\n      SCHED_ARR\n      ARR_DELAY\n      DIVERTED\n      CANCELLED\n    \n  \n  \n    \n      582\n      1\n      4\n      7\n      HA\n      LAX\n      OGG\n      1115\n      -11.0\n      310.0\n      2486\n      1500\n      -27.0\n      0\n      0\n    \n    \n      712\n      1\n      5\n      1\n      HA\n      LAS\n      HNL\n      900\n      -5.0\n      357.0\n      2762\n      1315\n      5.0\n      0\n      0\n    \n    \n      878\n      1\n      6\n      2\n      HA\n      PHX\n      HNL\n      800\n      1.0\n      374.0\n      2917\n      1140\n      3.0\n      0\n      0\n    \n    \n      1053\n      1\n      7\n      3\n      HA\n      LAX\n      HNL\n      1705\n      0.0\n      332.0\n      2556\n      2055\n      -2.0\n      0\n      0\n    \n    \n      1269\n      1\n      8\n      4\n      HA\n      LAX\n      HNL\n      1000\n      -1.0\n      335.0\n      2556\n      1350\n      0.0\n      0\n      0\n    \n    \n      ...\n      ...\n      ...\n      ...\n      ...\n      ...\n      ...\n      ...\n      ...\n      ...\n      ...\n      ...\n      ...\n      ...\n      ...\n    \n    \n      55883\n      12\n      16\n      3\n      HA\n      LAX\n      HNL\n      835\n      1.0\n      314.0\n      2556\n      1235\n      -18.0\n      0\n      0\n    \n    \n      56174\n      12\n      18\n      5\n      HA\n      LAX\n      HNL\n      835\n      -5.0\n      342.0\n      2556\n      1235\n      -4.0\n      0\n      0\n    \n    \n      56350\n      12\n      19\n      6\n      HA\n      PHX\n      HNL\n      800\n      -5.0\n      363.0\n      2917\n      1155\n      -34.0\n      0\n      0\n    \n    \n      56816\n      12\n      21\n      1\n      HA\n      LAX\n      LIH\n      740\n      20.0\n      303.0\n      2615\n      1145\n      -11.0\n      0\n      0\n    \n    \n      58391\n      12\n      31\n      4\n      HA\n      LAX\n      HNL\n      1000\n      0.0\n      324.0\n      2556\n      1350\n      -9.0\n      0\n      0\n    \n  \n\n112 rows × 14 columns\n\n\n\n\n\n\n\n  \n    \n      \n      MONTH\n      DAY\n      WEEKDAY\n      AIRLINE\n      ORG_AIR\n      DEST_AIR\n      SCHED_DEP\n      DEP_DELAY\n      AIR_TIME\n      DIST\n      SCHED_ARR\n      ARR_DELAY\n      DIVERTED\n      CANCELLED\n    \n  \n  \n    \n      2\n      1\n      1\n      4\n      MQ\n      DFW\n      VPS\n      1305\n      36.0\n      85.0\n      641\n      1453\n      35.0\n      0\n      0\n    \n    \n      10\n      1\n      1\n      4\n      MQ\n      DFW\n      DRO\n      1335\n      28.0\n      104.0\n      674\n      1438\n      28.0\n      0\n      0\n    \n    \n      18\n      1\n      1\n      4\n      MQ\n      ORD\n      DAY\n      2220\n      19.0\n      37.0\n      240\n      23\n      20.0\n      0\n      0\n    \n    \n      24\n      1\n      1\n      4\n      MQ\n      DFW\n      BTR\n      730\n      NaN\n      NaN\n      383\n      853\n      NaN\n      0\n      1\n    \n    \n      50\n      1\n      1\n      4\n      MQ\n      ORD\n      CID\n      1135\n      -7.0\n      37.0\n      196\n      1238\n      -15.0\n      0\n      0\n    \n    \n      ...\n      ...\n      ...\n      ...\n      ...\n      ...\n      ...\n      ...\n      ...\n      ...\n      ...\n      ...\n      ...\n      ...\n      ...\n    \n    \n      58415\n      12\n      31\n      4\n      MQ\n      ORD\n      FWA\n      845\n      -2.0\n      37.0\n      157\n      1045\n      -4.0\n      0\n      0\n    \n    \n      58426\n      12\n      31\n      4\n      MQ\n      DFW\n      FAR\n      1154\n      4.0\n      124.0\n      968\n      1437\n      -13.0\n      0\n      0\n    \n    \n      58468\n      12\n      31\n      4\n      MQ\n      DFW\n      OKC\n      1720\n      -3.0\n      31.0\n      175\n      1819\n      -10.0\n      0\n      0\n    \n    \n      58474\n      12\n      31\n      4\n      MQ\n      ORD\n      FNT\n      829\n      4.0\n      40.0\n      223\n      1034\n      -4.0\n      0\n      0\n    \n    \n      58484\n      12\n      31\n      4\n      MQ\n      ORD\n      DSM\n      1333\n      1.0\n      57.0\n      299\n      1455\n      -7.0\n      0\n      0\n    \n  \n\n3471 rows × 14 columns\n\n\n\n\n\n\n\n  \n    \n      \n      MONTH\n      DAY\n      WEEKDAY\n      AIRLINE\n      ORG_AIR\n      DEST_AIR\n      SCHED_DEP\n      DEP_DELAY\n      AIR_TIME\n      DIST\n      SCHED_ARR\n      ARR_DELAY\n      DIVERTED\n      CANCELLED\n    \n  \n  \n    \n      17\n      1\n      1\n      4\n      NK\n      DEN\n      DTW\n      1952\n      37.0\n      124.0\n      1123\n      31\n      54.0\n      0\n      0\n    \n    \n      74\n      1\n      1\n      4\n      NK\n      PHX\n      DFW\n      159\n      -1.0\n      103.0\n      868\n      502\n      1.0\n      0\n      0\n    \n    \n      95\n      1\n      1\n      4\n      NK\n      LAS\n      OAK\n      1115\n      22.0\n      62.0\n      407\n      1246\n      10.0\n      0\n      0\n    \n    \n      109\n      1\n      1\n      4\n      NK\n      MSP\n      ORD\n      616\n      2.0\n      49.0\n      334\n      745\n      -19.0\n      0\n      0\n    \n    \n      166\n      1\n      2\n      5\n      NK\n      LAS\n      PDX\n      1535\n      -8.0\n      123.0\n      763\n      1754\n      -4.0\n      0\n      0\n    \n    \n      ...\n      ...\n      ...\n      ...\n      ...\n      ...\n      ...\n      ...\n      ...\n      ...\n      ...\n      ...\n      ...\n      ...\n      ...\n    \n    \n      58160\n      12\n      29\n      2\n      NK\n      MSP\n      MCO\n      740\n      0.0\n      171.0\n      1310\n      1158\n      33.0\n      0\n      0\n    \n    \n      58197\n      12\n      30\n      3\n      NK\n      IAH\n      ORD\n      755\n      -8.0\n      136.0\n      925\n      1030\n      -2.0\n      0\n      0\n    \n    \n      58437\n      12\n      31\n      4\n      NK\n      ORD\n      DFW\n      1952\n      15.0\n      135.0\n      802\n      2225\n      23.0\n      0\n      0\n    \n    \n      58461\n      12\n      31\n      4\n      NK\n      ORD\n      LGA\n      1801\n      -5.0\n      84.0\n      733\n      2109\n      -26.0\n      0\n      0\n    \n    \n      58469\n      12\n      31\n      4\n      NK\n      LAS\n      MSY\n      1950\n      124.0\n      163.0\n      1500\n      112\n      101.0\n      0\n      0\n    \n  \n\n1516 rows × 14 columns\n\n\n\n\n\n\n\n  \n    \n      \n      MONTH\n      DAY\n      WEEKDAY\n      AIRLINE\n      ORG_AIR\n      DEST_AIR\n      SCHED_DEP\n      DEP_DELAY\n      AIR_TIME\n      DIST\n      SCHED_ARR\n      ARR_DELAY\n      DIVERTED\n      CANCELLED\n    \n  \n  \n    \n      12\n      1\n      1\n      4\n      OO\n      ORD\n      MSP\n      1510\n      2.0\n      65.0\n      334\n      1646\n      4.0\n      0\n      0\n    \n    \n      16\n      1\n      1\n      4\n      OO\n      DEN\n      SGU\n      1105\n      21.0\n      66.0\n      517\n      1249\n      20.0\n      0\n      0\n    \n    \n      22\n      1\n      1\n      4\n      OO\n      LAS\n      LAX\n      1544\n      -4.0\n      39.0\n      236\n      1655\n      -12.0\n      0\n      0\n    \n    \n      25\n      1\n      1\n      4\n      OO\n      ORD\n      SPI\n      2110\n      -4.0\n      31.0\n      174\n      2205\n      5.0\n      0\n      0\n    \n    \n      27\n      1\n      1\n      4\n      OO\n      IAH\n      JAC\n      1104\n      -1.0\n      161.0\n      1265\n      1316\n      -1.0\n      0\n      0\n    \n    \n      ...\n      ...\n      ...\n      ...\n      ...\n      ...\n      ...\n      ...\n      ...\n      ...\n      ...\n      ...\n      ...\n      ...\n      ...\n    \n    \n      58451\n      12\n      31\n      4\n      OO\n      ATL\n      FWA\n      1905\n      -3.0\n      72.0\n      508\n      2051\n      -14.0\n      0\n      0\n    \n    \n      58480\n      12\n      31\n      4\n      OO\n      MSP\n      BIS\n      1310\n      -2.0\n      65.0\n      386\n      1449\n      -9.0\n      0\n      0\n    \n    \n      58482\n      12\n      31\n      4\n      OO\n      DEN\n      CPR\n      1850\n      -2.0\n      38.0\n      230\n      1956\n      1.0\n      0\n      0\n    \n    \n      58489\n      12\n      31\n      4\n      OO\n      SFO\n      SBA\n      1846\n      -6.0\n      46.0\n      262\n      1956\n      -5.0\n      0\n      0\n    \n    \n      58491\n      12\n      31\n      4\n      OO\n      SFO\n      BOI\n      859\n      5.0\n      73.0\n      522\n      1146\n      -1.0\n      0\n      0\n    \n  \n\n6588 rows × 14 columns\n\n\n\n\n\n\n\n  \n    \n      \n      MONTH\n      DAY\n      WEEKDAY\n      AIRLINE\n      ORG_AIR\n      DEST_AIR\n      SCHED_DEP\n      DEP_DELAY\n      AIR_TIME\n      DIST\n      SCHED_ARR\n      ARR_DELAY\n      DIVERTED\n      CANCELLED\n    \n  \n  \n    \n      1\n      1\n      1\n      4\n      UA\n      DEN\n      IAD\n      823\n      7.0\n      154.0\n      1452\n      1333\n      -13.0\n      0\n      0\n    \n    \n      5\n      1\n      1\n      4\n      UA\n      IAH\n      SAN\n      1450\n      1.0\n      178.0\n      1303\n      1620\n      -14.0\n      0\n      0\n    \n    \n      9\n      1\n      1\n      4\n      UA\n      IAH\n      SJC\n      925\n      3.0\n      215.0\n      1608\n      1136\n      -14.0\n      0\n      0\n    \n    \n      14\n      1\n      1\n      4\n      UA\n      IAH\n      IND\n      1426\n      -1.0\n      102.0\n      844\n      1742\n      -20.0\n      0\n      0\n    \n    \n      21\n      1\n      1\n      4\n      UA\n      ORD\n      CLE\n      2102\n      48.0\n      47.0\n      315\n      2320\n      41.0\n      0\n      0\n    \n    \n      ...\n      ...\n      ...\n      ...\n      ...\n      ...\n      ...\n      ...\n      ...\n      ...\n      ...\n      ...\n      ...\n      ...\n      ...\n    \n    \n      58422\n      12\n      31\n      4\n      UA\n      DEN\n      SAN\n      1535\n      0.0\n      124.0\n      853\n      1704\n      -13.0\n      0\n      0\n    \n    \n      58432\n      12\n      31\n      4\n      UA\n      ORD\n      SAN\n      1915\n      7.0\n      238.0\n      1723\n      2143\n      -3.0\n      0\n      0\n    \n    \n      58457\n      12\n      31\n      4\n      UA\n      ORD\n      LAX\n      659\n      -1.0\n      241.0\n      1744\n      946\n      0.0\n      0\n      0\n    \n    \n      58460\n      12\n      31\n      4\n      UA\n      SFO\n      PHL\n      2235\n      -6.0\n      265.0\n      2521\n      700\n      -42.0\n      0\n      0\n    \n    \n      58481\n      12\n      31\n      4\n      UA\n      IAH\n      LAX\n      1433\n      1.0\n      197.0\n      1379\n      1625\n      -13.0\n      0\n      0\n    \n  \n\n7792 rows × 14 columns\n\n\n\n\n\n\n\n  \n    \n      \n      MONTH\n      DAY\n      WEEKDAY\n      AIRLINE\n      ORG_AIR\n      DEST_AIR\n      SCHED_DEP\n      DEP_DELAY\n      AIR_TIME\n      DIST\n      SCHED_ARR\n      ARR_DELAY\n      DIVERTED\n      CANCELLED\n    \n  \n  \n    \n      31\n      1\n      1\n      4\n      US\n      PHX\n      DEN\n      1810\n      29.0\n      94.0\n      602\n      1954\n      49.0\n      0\n      0\n    \n    \n      35\n      1\n      1\n      4\n      US\n      ORD\n      PHL\n      1600\n      -2.0\n      80.0\n      678\n      1857\n      -9.0\n      0\n      0\n    \n    \n      49\n      1\n      1\n      4\n      US\n      IAH\n      PHX\n      1445\n      -1.0\n      147.0\n      1009\n      1638\n      -7.0\n      0\n      0\n    \n    \n      96\n      1\n      1\n      4\n      US\n      ATL\n      PHL\n      1445\n      -4.0\n      90.0\n      666\n      1644\n      -11.0\n      0\n      0\n    \n    \n      104\n      1\n      1\n      4\n      US\n      MSP\n      PHX\n      730\n      -3.0\n      174.0\n      1276\n      1010\n      -20.0\n      0\n      0\n    \n    \n      ...\n      ...\n      ...\n      ...\n      ...\n      ...\n      ...\n      ...\n      ...\n      ...\n      ...\n      ...\n      ...\n      ...\n      ...\n    \n    \n      31514\n      6\n      30\n      2\n      US\n      DEN\n      PHL\n      705\n      -4.0\n      188.0\n      1558\n      1240\n      1.0\n      0\n      0\n    \n    \n      31523\n      6\n      30\n      2\n      US\n      PHX\n      DEN\n      1451\n      6.0\n      85.0\n      602\n      1738\n      7.0\n      0\n      0\n    \n    \n      31535\n      6\n      30\n      2\n      US\n      PHX\n      AUS\n      840\n      -3.0\n      116.0\n      872\n      1304\n      -11.0\n      0\n      0\n    \n    \n      31561\n      6\n      30\n      2\n      US\n      ORD\n      PHX\n      710\n      -5.0\n      170.0\n      1440\n      901\n      -50.0\n      0\n      0\n    \n    \n      31582\n      6\n      30\n      2\n      US\n      PHX\n      OGG\n      800\n      -4.0\n      356.0\n      2845\n      1127\n      -13.0\n      0\n      0\n    \n  \n\n1615 rows × 14 columns\n\n\n\n\n\n\n\n  \n    \n      \n      MONTH\n      DAY\n      WEEKDAY\n      AIRLINE\n      ORG_AIR\n      DEST_AIR\n      SCHED_DEP\n      DEP_DELAY\n      AIR_TIME\n      DIST\n      SCHED_ARR\n      ARR_DELAY\n      DIVERTED\n      CANCELLED\n    \n  \n  \n    \n      56\n      1\n      1\n      4\n      VX\n      LAS\n      SFO\n      900\n      23.0\n      65.0\n      414\n      1035\n      11.0\n      0\n      0\n    \n    \n      227\n      1\n      2\n      5\n      VX\n      SFO\n      LAS\n      1220\n      -5.0\n      68.0\n      414\n      1350\n      -5.0\n      0\n      0\n    \n    \n      243\n      1\n      2\n      5\n      VX\n      SFO\n      SEA\n      700\n      -4.0\n      104.0\n      679\n      905\n      -1.0\n      0\n      0\n    \n    \n      417\n      1\n      3\n      6\n      VX\n      SFO\n      LAS\n      900\n      -2.0\n      62.0\n      414\n      1030\n      -11.0\n      0\n      0\n    \n    \n      432\n      1\n      3\n      6\n      VX\n      SFO\n      SEA\n      2035\n      -2.0\n      106.0\n      679\n      2240\n      -2.0\n      0\n      0\n    \n    \n      ...\n      ...\n      ...\n      ...\n      ...\n      ...\n      ...\n      ...\n      ...\n      ...\n      ...\n      ...\n      ...\n      ...\n      ...\n    \n    \n      58332\n      12\n      30\n      3\n      VX\n      SFO\n      LAS\n      1950\n      -3.0\n      58.0\n      414\n      2120\n      -4.0\n      0\n      0\n    \n    \n      58383\n      12\n      31\n      4\n      VX\n      SFO\n      PSP\n      1630\n      -7.0\n      65.0\n      421\n      1755\n      -12.0\n      0\n      0\n    \n    \n      58400\n      12\n      31\n      4\n      VX\n      SFO\n      LAX\n      1125\n      -4.0\n      54.0\n      337\n      1245\n      -10.0\n      0\n      0\n    \n    \n      58471\n      12\n      31\n      4\n      VX\n      SFO\n      LAX\n      700\n      6.0\n      51.0\n      337\n      820\n      3.0\n      0\n      0\n    \n    \n      58478\n      12\n      31\n      4\n      VX\n      SFO\n      LAX\n      1530\n      29.0\n      52.0\n      337\n      1650\n      22.0\n      0\n      0\n    \n  \n\n993 rows × 14 columns\n\n\n\n\n\n\n\n  \n    \n      \n      MONTH\n      DAY\n      WEEKDAY\n      AIRLINE\n      ORG_AIR\n      DEST_AIR\n      SCHED_DEP\n      DEP_DELAY\n      AIR_TIME\n      DIST\n      SCHED_ARR\n      ARR_DELAY\n      DIVERTED\n      CANCELLED\n    \n  \n  \n    \n      0\n      1\n      1\n      4\n      WN\n      LAX\n      SLC\n      1625\n      58.0\n      94.0\n      590\n      1905\n      65.0\n      0\n      0\n    \n    \n      4\n      1\n      1\n      4\n      WN\n      LAX\n      MCI\n      1720\n      48.0\n      166.0\n      1363\n      2225\n      39.0\n      0\n      0\n    \n    \n      19\n      1\n      1\n      4\n      WN\n      PHX\n      LAX\n      1640\n      51.0\n      58.0\n      370\n      1700\n      59.0\n      0\n      0\n    \n    \n      20\n      1\n      1\n      4\n      WN\n      ATL\n      BWI\n      1115\n      1.0\n      76.0\n      577\n      1305\n      -15.0\n      0\n      0\n    \n    \n      23\n      1\n      1\n      4\n      WN\n      ATL\n      HOU\n      1555\n      30.0\n      113.0\n      696\n      1720\n      18.0\n      0\n      0\n    \n    \n      ...\n      ...\n      ...\n      ...\n      ...\n      ...\n      ...\n      ...\n      ...\n      ...\n      ...\n      ...\n      ...\n      ...\n      ...\n    \n    \n      58455\n      12\n      31\n      4\n      WN\n      LAX\n      SMF\n      1420\n      -2.0\n      64.0\n      373\n      1540\n      -7.0\n      0\n      0\n    \n    \n      58458\n      12\n      31\n      4\n      WN\n      LAS\n      SFO\n      1825\n      25.0\n      67.0\n      414\n      1955\n      17.0\n      0\n      0\n    \n    \n      58472\n      12\n      31\n      4\n      WN\n      PHX\n      HOU\n      845\n      5.0\n      119.0\n      1020\n      1210\n      7.0\n      0\n      0\n    \n    \n      58473\n      12\n      31\n      4\n      WN\n      DEN\n      PDX\n      1205\n      4.0\n      130.0\n      991\n      1400\n      -13.0\n      0\n      0\n    \n    \n      58490\n      12\n      31\n      4\n      WN\n      MSP\n      ATL\n      525\n      39.0\n      124.0\n      907\n      855\n      34.0\n      0\n      0\n    \n  \n\n8418 rows × 14 columns"
  },
  {
    "objectID": "posts/Day3/07_DataWrangling/2023-02-01-Lesson14.html#범주형변수를-기준으로-groupby---agg",
    "href": "posts/Day3/07_DataWrangling/2023-02-01-Lesson14.html#범주형변수를-기준으로-groupby---agg",
    "title": "Lesson 14: groupby",
    "section": "범주형변수를 기준으로 groupby -> agg",
    "text": "범주형변수를 기준으로 groupby -> agg\n\n# EX1: [AIRLINE] \\(\\to\\) {ARR_DELAY:mean}\n- 방법1: grouby() \\(\\to\\) .agg({colname: function})\n(예시1)\n\ndf.groupby(by=\"AIRLINE\").agg({'ARR_DELAY':np.mean})\n\n\n\n\n\n  \n    \n      \n      ARR_DELAY\n    \n    \n      AIRLINE\n      \n    \n  \n  \n    \n      AA\n      5.542661\n    \n    \n      AS\n      -0.833333\n    \n    \n      B6\n      8.692593\n    \n    \n      DL\n      0.339691\n    \n    \n      EV\n      7.034580\n    \n    \n      F9\n      13.630651\n    \n    \n      HA\n      4.972973\n    \n    \n      MQ\n      6.860591\n    \n    \n      NK\n      18.436070\n    \n    \n      OO\n      7.593463\n    \n    \n      UA\n      7.765755\n    \n    \n      US\n      1.681105\n    \n    \n      VX\n      5.348884\n    \n    \n      WN\n      6.397353\n    \n  \n\n\n\n\n(예시2)\n\ndf.groupby(by=\"AIRLINE\").agg({'ARR_DELAY':'mean'})\n\n\n\n\n\n  \n    \n      \n      ARR_DELAY\n    \n    \n      AIRLINE\n      \n    \n  \n  \n    \n      AA\n      5.542661\n    \n    \n      AS\n      -0.833333\n    \n    \n      B6\n      8.692593\n    \n    \n      DL\n      0.339691\n    \n    \n      EV\n      7.034580\n    \n    \n      F9\n      13.630651\n    \n    \n      HA\n      4.972973\n    \n    \n      MQ\n      6.860591\n    \n    \n      NK\n      18.436070\n    \n    \n      OO\n      7.593463\n    \n    \n      UA\n      7.765755\n    \n    \n      US\n      1.681105\n    \n    \n      VX\n      5.348884\n    \n    \n      WN\n      6.397353\n    \n  \n\n\n\n\n- 방법2: grouby() \\(\\to\\) key로 column선택 \\(\\to\\) .agg(f) or .f()\n(예시1)\n\ndf.groupby(by='AIRLINE')['ARR_DELAY'].agg(np.mean)\n\nAIRLINE\nAA     5.542661\nAS    -0.833333\nB6     8.692593\nDL     0.339691\nEV     7.034580\nF9    13.630651\nHA     4.972973\nMQ     6.860591\nNK    18.436070\nOO     7.593463\nUA     7.765755\nUS     1.681105\nVX     5.348884\nWN     6.397353\nName: ARR_DELAY, dtype: float64\n\n\n(예시2)\n\ndf.groupby(by='AIRLINE')['ARR_DELAY'].agg(\"mean\")\n\nAIRLINE\nAA     5.542661\nAS    -0.833333\nB6     8.692593\nDL     0.339691\nEV     7.034580\nF9    13.630651\nHA     4.972973\nMQ     6.860591\nNK    18.436070\nOO     7.593463\nUA     7.765755\nUS     1.681105\nVX     5.348884\nWN     6.397353\nName: ARR_DELAY, dtype: float64\n\n\n(예시3)\n\ndf.groupby(by='AIRLINE')['ARR_DELAY'].mean()\n\nAIRLINE\nAA     5.542661\nAS    -0.833333\nB6     8.692593\nDL     0.339691\nEV     7.034580\nF9    13.630651\nHA     4.972973\nMQ     6.860591\nNK    18.436070\nOO     7.593463\nUA     7.765755\nUS     1.681105\nVX     5.348884\nWN     6.397353\nName: ARR_DELAY, dtype: float64\n\n\n\n\n# EX2: [AIRLINE,WEEKDAY] \\(\\to\\) {CANCELLED:sum}\n- 방법1\n(예시1)\n\ndf.groupby(by=[\"AIRLINE\",\"WEEKDAY\"]).agg({\"CANCELLED\":np.sum})\n\n\n\n\n\n  \n    \n      \n      \n      CANCELLED\n    \n    \n      AIRLINE\n      WEEKDAY\n      \n    \n  \n  \n    \n      AA\n      1\n      41\n    \n    \n      2\n      9\n    \n    \n      3\n      16\n    \n    \n      4\n      20\n    \n    \n      5\n      18\n    \n    \n      ...\n      ...\n      ...\n    \n    \n      WN\n      3\n      18\n    \n    \n      4\n      10\n    \n    \n      5\n      7\n    \n    \n      6\n      10\n    \n    \n      7\n      7\n    \n  \n\n98 rows × 1 columns\n\n\n\n(예시2)\n\ndf.groupby(by=[\"AIRLINE\",\"WEEKDAY\"]).agg({\"CANCELLED\":\"sum\"})\n\n\n\n\n\n  \n    \n      \n      \n      CANCELLED\n    \n    \n      AIRLINE\n      WEEKDAY\n      \n    \n  \n  \n    \n      AA\n      1\n      41\n    \n    \n      2\n      9\n    \n    \n      3\n      16\n    \n    \n      4\n      20\n    \n    \n      5\n      18\n    \n    \n      ...\n      ...\n      ...\n    \n    \n      WN\n      3\n      18\n    \n    \n      4\n      10\n    \n    \n      5\n      7\n    \n    \n      6\n      10\n    \n    \n      7\n      7\n    \n  \n\n98 rows × 1 columns\n\n\n\n- 방법2\n(예시1)\n\ndf.groupby(by=[\"AIRLINE\",\"WEEKDAY\"])[[\"CANCELLED\"]].agg(np.sum)\n\n\n\n\n\n  \n    \n      \n      \n      CANCELLED\n    \n    \n      AIRLINE\n      WEEKDAY\n      \n    \n  \n  \n    \n      AA\n      1\n      41\n    \n    \n      2\n      9\n    \n    \n      3\n      16\n    \n    \n      4\n      20\n    \n    \n      5\n      18\n    \n    \n      ...\n      ...\n      ...\n    \n    \n      WN\n      3\n      18\n    \n    \n      4\n      10\n    \n    \n      5\n      7\n    \n    \n      6\n      10\n    \n    \n      7\n      7\n    \n  \n\n98 rows × 1 columns\n\n\n\n(예시2)\n\ndf.groupby(by=[\"AIRLINE\",\"WEEKDAY\"])[\"CANCELLED\"].agg(\"sum\")\n\nAIRLINE  WEEKDAY\nAA       1          41\n         2           9\n         3          16\n         4          20\n         5          18\n                    ..\nWN       3          18\n         4          10\n         5           7\n         6          10\n         7           7\nName: CANCELLED, Length: 98, dtype: int64\n\n\n(예시3)\n\ndf.groupby(by=[\"AIRLINE\",\"WEEKDAY\"])[\"CANCELLED\"].sum()\n\nAIRLINE  WEEKDAY\nAA       1          41\n         2           9\n         3          16\n         4          20\n         5          18\n                    ..\nWN       3          18\n         4          10\n         5           7\n         6          10\n         7           7\nName: CANCELLED, Length: 98, dtype: int64\n\n\n\ndf.DIVERTED\n\n0        0\n1        0\n2        0\n3        0\n4        0\n        ..\n58487    0\n58488    0\n58489    0\n58490    0\n58491    0\nName: DIVERTED, Length: 58492, dtype: int64\n\n\n\n\n# EX3: [AIRLINE,WEEKDAY] \\(\\to\\) {CANCELLED:sum,mean}, {DIVERTED: sum,mean}\n- 방법1\n(예시1)\n\ndf.groupby([\"AIRLINE\",\"WEEKDAY\"])\\\n.agg({\"CANCELLED\":[np.sum,np.mean],\"DIVERTED\":[np.sum,np.mean]})\n\n\n\n\n\n  \n    \n      \n      \n      CANCELLED\n      DIVERTED\n    \n    \n      \n      \n      sum\n      mean\n      sum\n      mean\n    \n    \n      AIRLINE\n      WEEKDAY\n      \n      \n      \n      \n    \n  \n  \n    \n      AA\n      1\n      41\n      0.032106\n      6\n      0.004699\n    \n    \n      2\n      9\n      0.007341\n      2\n      0.001631\n    \n    \n      3\n      16\n      0.011949\n      2\n      0.001494\n    \n    \n      4\n      20\n      0.015004\n      5\n      0.003751\n    \n    \n      5\n      18\n      0.014151\n      1\n      0.000786\n    \n    \n      ...\n      ...\n      ...\n      ...\n      ...\n      ...\n    \n    \n      WN\n      3\n      18\n      0.014118\n      2\n      0.001569\n    \n    \n      4\n      10\n      0.007911\n      4\n      0.003165\n    \n    \n      5\n      7\n      0.005828\n      0\n      0.000000\n    \n    \n      6\n      10\n      0.010132\n      3\n      0.003040\n    \n    \n      7\n      7\n      0.006066\n      3\n      0.002600\n    \n  \n\n98 rows × 4 columns\n\n\n\n(예시2)\n\ndf.groupby([\"AIRLINE\",\"WEEKDAY\"])\\\n.agg({\"CANCELLED\":[\"sum\",\"mean\"],\"DIVERTED\":[\"sum\",\"mean\"]})\n\n\n\n\n\n  \n    \n      \n      \n      CANCELLED\n      DIVERTED\n    \n    \n      \n      \n      sum\n      mean\n      sum\n      mean\n    \n    \n      AIRLINE\n      WEEKDAY\n      \n      \n      \n      \n    \n  \n  \n    \n      AA\n      1\n      41\n      0.032106\n      6\n      0.004699\n    \n    \n      2\n      9\n      0.007341\n      2\n      0.001631\n    \n    \n      3\n      16\n      0.011949\n      2\n      0.001494\n    \n    \n      4\n      20\n      0.015004\n      5\n      0.003751\n    \n    \n      5\n      18\n      0.014151\n      1\n      0.000786\n    \n    \n      ...\n      ...\n      ...\n      ...\n      ...\n      ...\n    \n    \n      WN\n      3\n      18\n      0.014118\n      2\n      0.001569\n    \n    \n      4\n      10\n      0.007911\n      4\n      0.003165\n    \n    \n      5\n      7\n      0.005828\n      0\n      0.000000\n    \n    \n      6\n      10\n      0.010132\n      3\n      0.003040\n    \n    \n      7\n      7\n      0.006066\n      3\n      0.002600\n    \n  \n\n98 rows × 4 columns\n\n\n\n- 방법2\n(예시1)\n\ndf.groupby([\"AIRLINE\",\"WEEKDAY\"])[[\"CANCELLED\",\"DIVERTED\"]]\\\n.agg([np.sum,np.mean])\n\n\n\n\n\n  \n    \n      \n      \n      CANCELLED\n      DIVERTED\n    \n    \n      \n      \n      sum\n      mean\n      sum\n      mean\n    \n    \n      AIRLINE\n      WEEKDAY\n      \n      \n      \n      \n    \n  \n  \n    \n      AA\n      1\n      41\n      0.032106\n      6\n      0.004699\n    \n    \n      2\n      9\n      0.007341\n      2\n      0.001631\n    \n    \n      3\n      16\n      0.011949\n      2\n      0.001494\n    \n    \n      4\n      20\n      0.015004\n      5\n      0.003751\n    \n    \n      5\n      18\n      0.014151\n      1\n      0.000786\n    \n    \n      ...\n      ...\n      ...\n      ...\n      ...\n      ...\n    \n    \n      WN\n      3\n      18\n      0.014118\n      2\n      0.001569\n    \n    \n      4\n      10\n      0.007911\n      4\n      0.003165\n    \n    \n      5\n      7\n      0.005828\n      0\n      0.000000\n    \n    \n      6\n      10\n      0.010132\n      3\n      0.003040\n    \n    \n      7\n      7\n      0.006066\n      3\n      0.002600\n    \n  \n\n98 rows × 4 columns\n\n\n\n(예시2)\n\ndf.groupby([\"AIRLINE\",\"WEEKDAY\"])[[\"CANCELLED\",\"DIVERTED\"]]\\\n.agg([\"sum\",\"mean\"])\n\n\n\n\n\n  \n    \n      \n      \n      CANCELLED\n      DIVERTED\n    \n    \n      \n      \n      sum\n      mean\n      sum\n      mean\n    \n    \n      AIRLINE\n      WEEKDAY\n      \n      \n      \n      \n    \n  \n  \n    \n      AA\n      1\n      41\n      0.032106\n      6\n      0.004699\n    \n    \n      2\n      9\n      0.007341\n      2\n      0.001631\n    \n    \n      3\n      16\n      0.011949\n      2\n      0.001494\n    \n    \n      4\n      20\n      0.015004\n      5\n      0.003751\n    \n    \n      5\n      18\n      0.014151\n      1\n      0.000786\n    \n    \n      ...\n      ...\n      ...\n      ...\n      ...\n      ...\n    \n    \n      WN\n      3\n      18\n      0.014118\n      2\n      0.001569\n    \n    \n      4\n      10\n      0.007911\n      4\n      0.003165\n    \n    \n      5\n      7\n      0.005828\n      0\n      0.000000\n    \n    \n      6\n      10\n      0.010132\n      3\n      0.003040\n    \n    \n      7\n      7\n      0.006066\n      3\n      0.002600\n    \n  \n\n98 rows × 4 columns\n\n\n\n(예시3) – 사용불가능\n\n\n# EX4: [AIRLINE,WEEKDAY] \\(\\to\\) {CANCELLED:sum,mean,count}, {AIR_TIME: mean,var}\n- 방법1\n(예시1)\n\ndf.groupby([\"AIRLINE\",\"WEEKDAY\"])\\\n.agg({'CANCELLED':[np.sum,np.mean,len],'AIR_TIME':[np.mean,np.var]})\n\n\n\n\n\n  \n    \n      \n      \n      CANCELLED\n      AIR_TIME\n    \n    \n      \n      \n      sum\n      mean\n      len\n      mean\n      var\n    \n    \n      AIRLINE\n      WEEKDAY\n      \n      \n      \n      \n      \n    \n  \n  \n    \n      AA\n      1\n      41\n      0.032106\n      1277\n      147.610569\n      5393.806723\n    \n    \n      2\n      9\n      0.007341\n      1226\n      143.851852\n      5359.890719\n    \n    \n      3\n      16\n      0.011949\n      1339\n      144.514005\n      5378.854539\n    \n    \n      4\n      20\n      0.015004\n      1333\n      141.124618\n      4791.524627\n    \n    \n      5\n      18\n      0.014151\n      1272\n      145.430966\n      5884.592076\n    \n    \n      ...\n      ...\n      ...\n      ...\n      ...\n      ...\n      ...\n    \n    \n      WN\n      3\n      18\n      0.014118\n      1275\n      104.219920\n      2901.873447\n    \n    \n      4\n      10\n      0.007911\n      1264\n      107.200800\n      2966.568935\n    \n    \n      5\n      7\n      0.005828\n      1201\n      107.893635\n      3268.717093\n    \n    \n      6\n      10\n      0.010132\n      987\n      109.247433\n      3152.753719\n    \n    \n      7\n      7\n      0.006066\n      1154\n      107.602273\n      3183.126889\n    \n  \n\n98 rows × 5 columns\n\n\n\n(예시2)\n\ndf.groupby([\"AIRLINE\",\"WEEKDAY\"])\\\n.agg({'CANCELLED':[\"sum\",\"mean\",\"count\"],'AIR_TIME':[\"mean\",\"var\"]})\n\n\n\n\n\n  \n    \n      \n      \n      CANCELLED\n      AIR_TIME\n    \n    \n      \n      \n      sum\n      mean\n      count\n      mean\n      var\n    \n    \n      AIRLINE\n      WEEKDAY\n      \n      \n      \n      \n      \n    \n  \n  \n    \n      AA\n      1\n      41\n      0.032106\n      1277\n      147.610569\n      5393.806723\n    \n    \n      2\n      9\n      0.007341\n      1226\n      143.851852\n      5359.890719\n    \n    \n      3\n      16\n      0.011949\n      1339\n      144.514005\n      5378.854539\n    \n    \n      4\n      20\n      0.015004\n      1333\n      141.124618\n      4791.524627\n    \n    \n      5\n      18\n      0.014151\n      1272\n      145.430966\n      5884.592076\n    \n    \n      ...\n      ...\n      ...\n      ...\n      ...\n      ...\n      ...\n    \n    \n      WN\n      3\n      18\n      0.014118\n      1275\n      104.219920\n      2901.873447\n    \n    \n      4\n      10\n      0.007911\n      1264\n      107.200800\n      2966.568935\n    \n    \n      5\n      7\n      0.005828\n      1201\n      107.893635\n      3268.717093\n    \n    \n      6\n      10\n      0.010132\n      987\n      109.247433\n      3152.753719\n    \n    \n      7\n      7\n      0.006066\n      1154\n      107.602273\n      3183.126889\n    \n  \n\n98 rows × 5 columns\n\n\n\n(사용자정의함수)\n\ndf.groupby([\"AIRLINE\",\"WEEKDAY\"])\\\n.agg({'CANCELLED':[np.sum,np.mean,len],\n      'AIR_TIME':[np.mean,lambda x: np.std(x,ddof=1)**2]})\n\n\n\n\n\n  \n    \n      \n      \n      CANCELLED\n      AIR_TIME\n    \n    \n      \n      \n      sum\n      mean\n      len\n      mean\n      <lambda_0>\n    \n    \n      AIRLINE\n      WEEKDAY\n      \n      \n      \n      \n      \n    \n  \n  \n    \n      AA\n      1\n      41\n      0.032106\n      1277\n      147.610569\n      5393.806723\n    \n    \n      2\n      9\n      0.007341\n      1226\n      143.851852\n      5359.890719\n    \n    \n      3\n      16\n      0.011949\n      1339\n      144.514005\n      5378.854539\n    \n    \n      4\n      20\n      0.015004\n      1333\n      141.124618\n      4791.524627\n    \n    \n      5\n      18\n      0.014151\n      1272\n      145.430966\n      5884.592076\n    \n    \n      ...\n      ...\n      ...\n      ...\n      ...\n      ...\n      ...\n    \n    \n      WN\n      3\n      18\n      0.014118\n      1275\n      104.219920\n      2901.873447\n    \n    \n      4\n      10\n      0.007911\n      1264\n      107.200800\n      2966.568935\n    \n    \n      5\n      7\n      0.005828\n      1201\n      107.893635\n      3268.717093\n    \n    \n      6\n      10\n      0.010132\n      987\n      109.247433\n      3152.753719\n    \n    \n      7\n      7\n      0.006066\n      1154\n      107.602273\n      3183.126889\n    \n  \n\n98 rows × 5 columns"
  },
  {
    "objectID": "posts/Day3/07_DataWrangling/2023-02-01-Lesson14.html#연속형변수를-기준으로-groupby---agg",
    "href": "posts/Day3/07_DataWrangling/2023-02-01-Lesson14.html#연속형변수를-기준으로-groupby---agg",
    "title": "Lesson 14: groupby",
    "section": "연속형변수를 기준으로 groupby -> agg",
    "text": "연속형변수를 기준으로 groupby -> agg\n\ndf.T\n\n\n\n\n\n  \n    \n      \n      0\n      1\n      2\n      3\n      4\n      5\n      6\n      7\n      8\n      9\n      ...\n      58482\n      58483\n      58484\n      58485\n      58486\n      58487\n      58488\n      58489\n      58490\n      58491\n    \n  \n  \n    \n      MONTH\n      1\n      1\n      1\n      1\n      1\n      1\n      1\n      1\n      1\n      1\n      ...\n      12\n      12\n      12\n      12\n      12\n      12\n      12\n      12\n      12\n      12\n    \n    \n      DAY\n      1\n      1\n      1\n      1\n      1\n      1\n      1\n      1\n      1\n      1\n      ...\n      31\n      31\n      31\n      31\n      31\n      31\n      31\n      31\n      31\n      31\n    \n    \n      WEEKDAY\n      4\n      4\n      4\n      4\n      4\n      4\n      4\n      4\n      4\n      4\n      ...\n      4\n      4\n      4\n      4\n      4\n      4\n      4\n      4\n      4\n      4\n    \n    \n      AIRLINE\n      WN\n      UA\n      MQ\n      AA\n      WN\n      UA\n      AA\n      F9\n      AA\n      UA\n      ...\n      OO\n      B6\n      MQ\n      DL\n      EV\n      AA\n      F9\n      OO\n      WN\n      OO\n    \n    \n      ORG_AIR\n      LAX\n      DEN\n      DFW\n      DFW\n      LAX\n      IAH\n      DFW\n      SFO\n      ORD\n      IAH\n      ...\n      DEN\n      PHX\n      ORD\n      ATL\n      DFW\n      SFO\n      LAS\n      SFO\n      MSP\n      SFO\n    \n    \n      DEST_AIR\n      SLC\n      IAD\n      VPS\n      DCA\n      MCI\n      SAN\n      MSY\n      PHX\n      STL\n      SJC\n      ...\n      CPR\n      BOS\n      DSM\n      CMH\n      LFT\n      DFW\n      SFO\n      SBA\n      ATL\n      BOI\n    \n    \n      SCHED_DEP\n      1625\n      823\n      1305\n      1555\n      1720\n      1450\n      1250\n      1020\n      1845\n      925\n      ...\n      1850\n      2236\n      1333\n      2206\n      850\n      515\n      1910\n      1846\n      525\n      859\n    \n    \n      DEP_DELAY\n      58.0\n      7.0\n      36.0\n      7.0\n      48.0\n      1.0\n      84.0\n      -7.0\n      -5.0\n      3.0\n      ...\n      -2.0\n      -12.0\n      1.0\n      2.0\n      21.0\n      5.0\n      13.0\n      -6.0\n      39.0\n      5.0\n    \n    \n      AIR_TIME\n      94.0\n      154.0\n      85.0\n      126.0\n      166.0\n      178.0\n      64.0\n      91.0\n      44.0\n      215.0\n      ...\n      38.0\n      231.0\n      57.0\n      64.0\n      52.0\n      166.0\n      71.0\n      46.0\n      124.0\n      73.0\n    \n    \n      DIST\n      590\n      1452\n      641\n      1192\n      1363\n      1303\n      447\n      651\n      258\n      1608\n      ...\n      230\n      2300\n      299\n      447\n      351\n      1464\n      414\n      262\n      907\n      522\n    \n    \n      SCHED_ARR\n      1905\n      1333\n      1453\n      1935\n      2225\n      1620\n      1410\n      1315\n      1950\n      1136\n      ...\n      1956\n      515\n      1455\n      2338\n      1012\n      1045\n      2050\n      1956\n      855\n      1146\n    \n    \n      ARR_DELAY\n      65.0\n      -13.0\n      35.0\n      -7.0\n      39.0\n      -14.0\n      83.0\n      -6.0\n      -5.0\n      -14.0\n      ...\n      1.0\n      -45.0\n      -7.0\n      -8.0\n      14.0\n      -19.0\n      4.0\n      -5.0\n      34.0\n      -1.0\n    \n    \n      DIVERTED\n      0\n      0\n      0\n      0\n      0\n      0\n      0\n      0\n      0\n      0\n      ...\n      0\n      0\n      0\n      0\n      0\n      0\n      0\n      0\n      0\n      0\n    \n    \n      CANCELLED\n      0\n      0\n      0\n      0\n      0\n      0\n      0\n      0\n      0\n      0\n      ...\n      0\n      0\n      0\n      0\n      0\n      0\n      0\n      0\n      0\n      0\n    \n  \n\n14 rows × 58492 columns\n\n\n\n\ndf.DIST.describe()\n\ncount    58492.000000\nmean       872.900072\nstd        624.996805\nmin         67.000000\n25%        391.000000\n50%        690.000000\n75%       1199.000000\nmax       4502.000000\nName: DIST, dtype: float64\n\n\n\ndf.assign(DIST2 = pd.cut(df.DIST,[-np.inf,391,690,1199,np.inf]))\\\n.groupby([\"AIRLINE\",\"DIST2\"]).agg({'CANCELLED':[\"sum\",\"mean\",\"count\"]})\n\n\n\n\n\n  \n    \n      \n      \n      CANCELLED\n    \n    \n      \n      \n      sum\n      mean\n      count\n    \n    \n      AIRLINE\n      DIST2\n      \n      \n      \n    \n  \n  \n    \n      AA\n      (-inf, 391.0]\n      18\n      0.015986\n      1126\n    \n    \n      (391.0, 690.0]\n      17\n      0.013589\n      1251\n    \n    \n      (690.0, 1199.0]\n      69\n      0.022066\n      3127\n    \n    \n      (1199.0, inf]\n      50\n      0.014723\n      3396\n    \n    \n      AS\n      (-inf, 391.0]\n      0\n      NaN\n      0\n    \n    \n      (391.0, 690.0]\n      0\n      0.000000\n      145\n    \n    \n      (690.0, 1199.0]\n      0\n      0.000000\n      462\n    \n    \n      (1199.0, inf]\n      0\n      0.000000\n      161\n    \n    \n      B6\n      (-inf, 391.0]\n      0\n      0.000000\n      71\n    \n    \n      (391.0, 690.0]\n      0\n      0.000000\n      38\n    \n    \n      (690.0, 1199.0]\n      0\n      0.000000\n      61\n    \n    \n      (1199.0, inf]\n      1\n      0.002681\n      373\n    \n    \n      DL\n      (-inf, 391.0]\n      7\n      0.003086\n      2268\n    \n    \n      (391.0, 690.0]\n      8\n      0.002421\n      3304\n    \n    \n      (690.0, 1199.0]\n      16\n      0.006405\n      2498\n    \n    \n      (1199.0, inf]\n      7\n      0.002766\n      2531\n    \n    \n      EV\n      (-inf, 391.0]\n      77\n      0.028785\n      2675\n    \n    \n      (391.0, 690.0]\n      47\n      0.022793\n      2062\n    \n    \n      (690.0, 1199.0]\n      22\n      0.019982\n      1101\n    \n    \n      (1199.0, inf]\n      0\n      0.000000\n      20\n    \n    \n      F9\n      (-inf, 391.0]\n      0\n      0.000000\n      27\n    \n    \n      (391.0, 690.0]\n      6\n      0.013825\n      434\n    \n    \n      (690.0, 1199.0]\n      4\n      0.007105\n      563\n    \n    \n      (1199.0, inf]\n      0\n      0.000000\n      293\n    \n    \n      HA\n      (-inf, 391.0]\n      0\n      NaN\n      0\n    \n    \n      (391.0, 690.0]\n      0\n      NaN\n      0\n    \n    \n      (690.0, 1199.0]\n      0\n      NaN\n      0\n    \n    \n      (1199.0, inf]\n      0\n      0.000000\n      112\n    \n    \n      MQ\n      (-inf, 391.0]\n      90\n      0.047120\n      1910\n    \n    \n      (391.0, 690.0]\n      39\n      0.037356\n      1044\n    \n    \n      (690.0, 1199.0]\n      22\n      0.044266\n      497\n    \n    \n      (1199.0, inf]\n      1\n      0.050000\n      20\n    \n    \n      NK\n      (-inf, 391.0]\n      5\n      0.036496\n      137\n    \n    \n      (391.0, 690.0]\n      4\n      0.013201\n      303\n    \n    \n      (690.0, 1199.0]\n      6\n      0.011029\n      544\n    \n    \n      (1199.0, inf]\n      10\n      0.018797\n      532\n    \n    \n      OO\n      (-inf, 391.0]\n      75\n      0.024826\n      3021\n    \n    \n      (391.0, 690.0]\n      39\n      0.019364\n      2014\n    \n    \n      (690.0, 1199.0]\n      19\n      0.016351\n      1162\n    \n    \n      (1199.0, inf]\n      9\n      0.023018\n      391\n    \n    \n      UA\n      (-inf, 391.0]\n      5\n      0.007143\n      700\n    \n    \n      (391.0, 690.0]\n      14\n      0.011824\n      1184\n    \n    \n      (690.0, 1199.0]\n      26\n      0.010924\n      2380\n    \n    \n      (1199.0, inf]\n      48\n      0.013605\n      3528\n    \n    \n      US\n      (-inf, 391.0]\n      0\n      0.000000\n      254\n    \n    \n      (391.0, 690.0]\n      7\n      0.021944\n      319\n    \n    \n      (690.0, 1199.0]\n      2\n      0.006329\n      316\n    \n    \n      (1199.0, inf]\n      12\n      0.016529\n      726\n    \n    \n      VX\n      (-inf, 391.0]\n      2\n      0.008299\n      241\n    \n    \n      (391.0, 690.0]\n      1\n      0.003861\n      259\n    \n    \n      (690.0, 1199.0]\n      0\n      0.000000\n      22\n    \n    \n      (1199.0, inf]\n      3\n      0.006369\n      471\n    \n    \n      WN\n      (-inf, 391.0]\n      55\n      0.023810\n      2310\n    \n    \n      (391.0, 690.0]\n      14\n      0.006487\n      2158\n    \n    \n      (690.0, 1199.0]\n      17\n      0.007896\n      2153\n    \n    \n      (1199.0, inf]\n      7\n      0.003895\n      1797\n    \n  \n\n\n\n\n\npd.cut(df.DIST,[-np.inf,400,700,1200,np.inf],labels=['~400','400~700','700~1200','1200~'])\n\n0         400~700\n1           1200~\n2         400~700\n3        700~1200\n4           1200~\n           ...   \n58487       1200~\n58488     400~700\n58489        ~400\n58490    700~1200\n58491     400~700\nName: DIST, Length: 58492, dtype: category\nCategories (4, object): ['~400' < '400~700' < '700~1200' < '1200~']\n\n\n\ndf.assign(DIST2 = pd.cut(df.DIST,[-np.inf,400,700,1200,np.inf],labels=['~400','400~700','700~1200','1200~']))\\\n.groupby([\"AIRLINE\",\"DIST2\"]).agg({'CANCELLED':[\"sum\",\"mean\",\"count\"]})\n\n\n\n\n\n  \n    \n      \n      \n      CANCELLED\n    \n    \n      \n      \n      sum\n      mean\n      count\n    \n    \n      AIRLINE\n      DIST2\n      \n      \n      \n    \n  \n  \n    \n      AA\n      ~400\n      18\n      0.015986\n      1126\n    \n    \n      400~700\n      17\n      0.013589\n      1251\n    \n    \n      700~1200\n      69\n      0.022066\n      3127\n    \n    \n      1200~\n      50\n      0.014723\n      3396\n    \n    \n      AS\n      ~400\n      0\n      NaN\n      0\n    \n    \n      400~700\n      0\n      0.000000\n      145\n    \n    \n      700~1200\n      0\n      0.000000\n      462\n    \n    \n      1200~\n      0\n      0.000000\n      161\n    \n    \n      B6\n      ~400\n      0\n      0.000000\n      71\n    \n    \n      400~700\n      0\n      0.000000\n      38\n    \n    \n      700~1200\n      0\n      0.000000\n      61\n    \n    \n      1200~\n      1\n      0.002681\n      373\n    \n    \n      DL\n      ~400\n      7\n      0.003040\n      2303\n    \n    \n      400~700\n      8\n      0.002352\n      3402\n    \n    \n      700~1200\n      16\n      0.006765\n      2365\n    \n    \n      1200~\n      7\n      0.002766\n      2531\n    \n    \n      EV\n      ~400\n      77\n      0.027838\n      2766\n    \n    \n      400~700\n      48\n      0.023312\n      2059\n    \n    \n      700~1200\n      21\n      0.020731\n      1013\n    \n    \n      1200~\n      0\n      0.000000\n      20\n    \n    \n      F9\n      ~400\n      0\n      0.000000\n      27\n    \n    \n      400~700\n      7\n      0.015837\n      442\n    \n    \n      700~1200\n      3\n      0.005405\n      555\n    \n    \n      1200~\n      0\n      0.000000\n      293\n    \n    \n      HA\n      ~400\n      0\n      NaN\n      0\n    \n    \n      400~700\n      0\n      NaN\n      0\n    \n    \n      700~1200\n      0\n      NaN\n      0\n    \n    \n      1200~\n      0\n      0.000000\n      112\n    \n    \n      MQ\n      ~400\n      92\n      0.047472\n      1938\n    \n    \n      400~700\n      39\n      0.035682\n      1093\n    \n    \n      700~1200\n      20\n      0.047619\n      420\n    \n    \n      1200~\n      1\n      0.050000\n      20\n    \n    \n      NK\n      ~400\n      5\n      0.036496\n      137\n    \n    \n      400~700\n      4\n      0.013201\n      303\n    \n    \n      700~1200\n      6\n      0.011029\n      544\n    \n    \n      1200~\n      10\n      0.018797\n      532\n    \n    \n      OO\n      ~400\n      76\n      0.024837\n      3060\n    \n    \n      400~700\n      38\n      0.018673\n      2035\n    \n    \n      700~1200\n      19\n      0.017241\n      1102\n    \n    \n      1200~\n      9\n      0.023018\n      391\n    \n    \n      UA\n      ~400\n      5\n      0.006993\n      715\n    \n    \n      400~700\n      14\n      0.011966\n      1170\n    \n    \n      700~1200\n      26\n      0.010929\n      2379\n    \n    \n      1200~\n      48\n      0.013605\n      3528\n    \n    \n      US\n      ~400\n      0\n      0.000000\n      254\n    \n    \n      400~700\n      7\n      0.021944\n      319\n    \n    \n      700~1200\n      2\n      0.006329\n      316\n    \n    \n      1200~\n      12\n      0.016529\n      726\n    \n    \n      VX\n      ~400\n      2\n      0.008299\n      241\n    \n    \n      400~700\n      1\n      0.003861\n      259\n    \n    \n      700~1200\n      0\n      0.000000\n      22\n    \n    \n      1200~\n      3\n      0.006369\n      471\n    \n    \n      WN\n      ~400\n      55\n      0.023022\n      2389\n    \n    \n      400~700\n      17\n      0.007795\n      2181\n    \n    \n      700~1200\n      14\n      0.006826\n      2051\n    \n    \n      1200~\n      7\n      0.003895\n      1797"
  },
  {
    "objectID": "posts/Day3/07_DataWrangling/2023-02-01-Lesson14.html#hrdataset_v14-자료분석",
    "href": "posts/Day3/07_DataWrangling/2023-02-01-Lesson14.html#hrdataset_v14-자료분석",
    "title": "Lesson 14: groupby",
    "section": "HRDataset_v14 자료분석",
    "text": "HRDataset_v14 자료분석\n아래의 코드를 활용하여 Kaggle의 HRdataset을 불러오라.\n\ndf = pd.read_csv('https://raw.githubusercontent.com/guebin/DV2022/master/posts/HRDataset_v14.csv')\ndf\n\n\n\n\n\n  \n    \n      \n      Employee_Name\n      EmpID\n      MarriedID\n      MaritalStatusID\n      GenderID\n      EmpStatusID\n      DeptID\n      PerfScoreID\n      FromDiversityJobFairID\n      Salary\n      ...\n      ManagerName\n      ManagerID\n      RecruitmentSource\n      PerformanceScore\n      EngagementSurvey\n      EmpSatisfaction\n      SpecialProjectsCount\n      LastPerformanceReview_Date\n      DaysLateLast30\n      Absences\n    \n  \n  \n    \n      0\n      Adinolfi, Wilson  K\n      10026\n      0\n      0\n      1\n      1\n      5\n      4\n      0\n      62506\n      ...\n      Michael Albert\n      22.0\n      LinkedIn\n      Exceeds\n      4.60\n      5\n      0\n      1/17/2019\n      0\n      1\n    \n    \n      1\n      Ait Sidi, Karthikeyan\n      10084\n      1\n      1\n      1\n      5\n      3\n      3\n      0\n      104437\n      ...\n      Simon Roup\n      4.0\n      Indeed\n      Fully Meets\n      4.96\n      3\n      6\n      2/24/2016\n      0\n      17\n    \n    \n      2\n      Akinkuolie, Sarah\n      10196\n      1\n      1\n      0\n      5\n      5\n      3\n      0\n      64955\n      ...\n      Kissy Sullivan\n      20.0\n      LinkedIn\n      Fully Meets\n      3.02\n      3\n      0\n      5/15/2012\n      0\n      3\n    \n    \n      3\n      Alagbe,Trina\n      10088\n      1\n      1\n      0\n      1\n      5\n      3\n      0\n      64991\n      ...\n      Elijiah Gray\n      16.0\n      Indeed\n      Fully Meets\n      4.84\n      5\n      0\n      1/3/2019\n      0\n      15\n    \n    \n      4\n      Anderson, Carol\n      10069\n      0\n      2\n      0\n      5\n      5\n      3\n      0\n      50825\n      ...\n      Webster Butler\n      39.0\n      Google Search\n      Fully Meets\n      5.00\n      4\n      0\n      2/1/2016\n      0\n      2\n    \n    \n      ...\n      ...\n      ...\n      ...\n      ...\n      ...\n      ...\n      ...\n      ...\n      ...\n      ...\n      ...\n      ...\n      ...\n      ...\n      ...\n      ...\n      ...\n      ...\n      ...\n      ...\n      ...\n    \n    \n      306\n      Woodson, Jason\n      10135\n      0\n      0\n      1\n      1\n      5\n      3\n      0\n      65893\n      ...\n      Kissy Sullivan\n      20.0\n      LinkedIn\n      Fully Meets\n      4.07\n      4\n      0\n      2/28/2019\n      0\n      13\n    \n    \n      307\n      Ybarra, Catherine\n      10301\n      0\n      0\n      0\n      5\n      5\n      1\n      0\n      48513\n      ...\n      Brannon Miller\n      12.0\n      Google Search\n      PIP\n      3.20\n      2\n      0\n      9/2/2015\n      5\n      4\n    \n    \n      308\n      Zamora, Jennifer\n      10010\n      0\n      0\n      0\n      1\n      3\n      4\n      0\n      220450\n      ...\n      Janet King\n      2.0\n      Employee Referral\n      Exceeds\n      4.60\n      5\n      6\n      2/21/2019\n      0\n      16\n    \n    \n      309\n      Zhou, Julia\n      10043\n      0\n      0\n      0\n      1\n      3\n      3\n      0\n      89292\n      ...\n      Simon Roup\n      4.0\n      Employee Referral\n      Fully Meets\n      5.00\n      3\n      5\n      2/1/2019\n      0\n      11\n    \n    \n      310\n      Zima, Colleen\n      10271\n      0\n      4\n      0\n      1\n      5\n      3\n      0\n      45046\n      ...\n      David Stanley\n      14.0\n      LinkedIn\n      Fully Meets\n      4.50\n      5\n      0\n      1/30/2019\n      0\n      2\n    \n  \n\n311 rows × 36 columns\n\n\n\n데이터를 조사하고 올바르게 분석한 사람을 모두 고르라. (모두 맞칠경우만 정답으로 인정)\n\n소윤: 근무인원수가 가장 많은 인종(RaceDesc)은 ’White’이며 이는 ’Asian’인종과 ’Black or African American’의 합보다 많다.\n다호: ’RaceDesc==White’의 성별(Sex)임금차이는 2000이상이다.\n하니: 퇴직한사람(Termd==1)은 모두 104명이며 백인여성의 퇴직자수가 가장 많다.\n도한: 퇴직한사람중 아시아인의 비율은 10%가 넘지 않는다.\n\n(풀이)\n모두 참이다.\n데이터조사\n\ndf.info()\n\n<class 'pandas.core.frame.DataFrame'>\nRangeIndex: 311 entries, 0 to 310\nData columns (total 36 columns):\n #   Column                      Non-Null Count  Dtype  \n---  ------                      --------------  -----  \n 0   Employee_Name               311 non-null    object \n 1   EmpID                       311 non-null    int64  \n 2   MarriedID                   311 non-null    int64  \n 3   MaritalStatusID             311 non-null    int64  \n 4   GenderID                    311 non-null    int64  \n 5   EmpStatusID                 311 non-null    int64  \n 6   DeptID                      311 non-null    int64  \n 7   PerfScoreID                 311 non-null    int64  \n 8   FromDiversityJobFairID      311 non-null    int64  \n 9   Salary                      311 non-null    int64  \n 10  Termd                       311 non-null    int64  \n 11  PositionID                  311 non-null    int64  \n 12  Position                    311 non-null    object \n 13  State                       311 non-null    object \n 14  Zip                         311 non-null    int64  \n 15  DOB                         311 non-null    object \n 16  Sex                         311 non-null    object \n 17  MaritalDesc                 311 non-null    object \n 18  CitizenDesc                 311 non-null    object \n 19  HispanicLatino              311 non-null    object \n 20  RaceDesc                    311 non-null    object \n 21  DateofHire                  311 non-null    object \n 22  DateofTermination           104 non-null    object \n 23  TermReason                  311 non-null    object \n 24  EmploymentStatus            311 non-null    object \n 25  Department                  311 non-null    object \n 26  ManagerName                 311 non-null    object \n 27  ManagerID                   303 non-null    float64\n 28  RecruitmentSource           311 non-null    object \n 29  PerformanceScore            311 non-null    object \n 30  EngagementSurvey            311 non-null    float64\n 31  EmpSatisfaction             311 non-null    int64  \n 32  SpecialProjectsCount        311 non-null    int64  \n 33  LastPerformanceReview_Date  311 non-null    object \n 34  DaysLateLast30              311 non-null    int64  \n 35  Absences                    311 non-null    int64  \ndtypes: float64(2), int64(16), object(18)\nmemory usage: 87.6+ KB\n\n\n\nEmpID가 missing이 없는 열임\n\n소윤: 근무인원수가 가장 많은 인종(RaceDesc)은 ’White’이며 이는 ’Asian’인종과 ’Black or African American’의 합보다 많다. — 참\n\ndf.groupby(by='RaceDesc').agg({'EmpID':len})\n\n\n\n\n\n  \n    \n      \n      EmpID\n    \n    \n      RaceDesc\n      \n    \n  \n  \n    \n      American Indian or Alaska Native\n      3\n    \n    \n      Asian\n      29\n    \n    \n      Black or African American\n      80\n    \n    \n      Hispanic\n      1\n    \n    \n      Two or more races\n      11\n    \n    \n      White\n      187\n    \n  \n\n\n\n\n\n29+80\n\n109\n\n\n다호: ’RaceDesc==White’의 성별(Sex)임금차이는 2000이상이다. — 참\n\ndf.groupby(by=['RaceDesc','Sex']).agg({'Salary':np.mean})\n\n\n\n\n\n  \n    \n      \n      \n      Salary\n    \n    \n      RaceDesc\n      Sex\n      \n    \n  \n  \n    \n      American Indian or Alaska Native\n      F\n      63436.500000\n    \n    \n      M\n      70545.000000\n    \n    \n      Asian\n      F\n      67520.117647\n    \n    \n      M\n      69939.416667\n    \n    \n      Black or African American\n      F\n      66963.829787\n    \n    \n      M\n      85066.121212\n    \n    \n      Hispanic\n      M\n      83667.000000\n    \n    \n      Two or more races\n      F\n      58068.500000\n    \n    \n      M\n      62313.800000\n    \n    \n      White\n      F\n      68846.519231\n    \n    \n      M\n      65334.132530\n    \n  \n\n\n\n\n\n68846.519231 - 65334.132530\n\n3512.386700999996\n\n\n하니: 퇴직한사람(Termd==1)은 모두 104명이며 백인여성의 퇴직자수가 가장 많다. — 참\n\n(df.Termd==1).sum()\n\n104\n\n\n\ndf.groupby(by=['RaceDesc','Sex']).agg({'Termd':np.sum})\n\n\n\n\n\n  \n    \n      \n      \n      Termd\n    \n    \n      RaceDesc\n      Sex\n      \n    \n  \n  \n    \n      American Indian or Alaska Native\n      F\n      0\n    \n    \n      M\n      0\n    \n    \n      Asian\n      F\n      6\n    \n    \n      M\n      3\n    \n    \n      Black or African American\n      F\n      15\n    \n    \n      M\n      14\n    \n    \n      Hispanic\n      M\n      0\n    \n    \n      Two or more races\n      F\n      2\n    \n    \n      M\n      1\n    \n    \n      White\n      F\n      37\n    \n    \n      M\n      26\n    \n  \n\n\n\n\n도한: 퇴직한사람중 아시아인의 비율은 10%가 넘지 않는다. — 참\n\n(df.Termd==1).sum()\n\n104\n\n\n\ndf.groupby(by=['RaceDesc']).agg({'Termd':np.sum})\n\n\n\n\n\n  \n    \n      \n      Termd\n    \n    \n      RaceDesc\n      \n    \n  \n  \n    \n      American Indian or Alaska Native\n      0\n    \n    \n      Asian\n      9\n    \n    \n      Black or African American\n      29\n    \n    \n      Hispanic\n      0\n    \n    \n      Two or more races\n      3\n    \n    \n      White\n      63"
  },
  {
    "objectID": "posts/Day3/07_DataWrangling/2023-02-01-Lesson15.html#stack",
    "href": "posts/Day3/07_DataWrangling/2023-02-01-Lesson15.html#stack",
    "title": "Lesson 15: tidydata",
    "section": "stack",
    "text": "stack\n- 설명:\n\ndf=pd.read_csv('https://raw.githubusercontent.com/PacktPublishing/Pandas-Cookbook/master/data/flights.csv')\\\n.groupby([\"AIRLINE\",\"WEEKDAY\"]).agg({\"CANCELLED\":[np.mean,\"count\"],\"DIVERTED\":[np.mean,\"count\"]})\ndf\n\n\n\n\n\n  \n    \n      \n      \n      CANCELLED\n      DIVERTED\n    \n    \n      \n      \n      mean\n      count\n      mean\n      count\n    \n    \n      AIRLINE\n      WEEKDAY\n      \n      \n      \n      \n    \n  \n  \n    \n      AA\n      1\n      0.032106\n      1277\n      0.004699\n      1277\n    \n    \n      2\n      0.007341\n      1226\n      0.001631\n      1226\n    \n    \n      3\n      0.011949\n      1339\n      0.001494\n      1339\n    \n    \n      4\n      0.015004\n      1333\n      0.003751\n      1333\n    \n    \n      5\n      0.014151\n      1272\n      0.000786\n      1272\n    \n    \n      ...\n      ...\n      ...\n      ...\n      ...\n      ...\n    \n    \n      WN\n      3\n      0.014118\n      1275\n      0.001569\n      1275\n    \n    \n      4\n      0.007911\n      1264\n      0.003165\n      1264\n    \n    \n      5\n      0.005828\n      1201\n      0.000000\n      1201\n    \n    \n      6\n      0.010132\n      987\n      0.003040\n      987\n    \n    \n      7\n      0.006066\n      1154\n      0.002600\n      1154\n    \n  \n\n98 rows × 4 columns\n\n\n\n- 사용예시1\n\ndf.stack()\n\n\n\n\n\n  \n    \n      \n      \n      \n      CANCELLED\n      DIVERTED\n    \n    \n      AIRLINE\n      WEEKDAY\n      \n      \n      \n    \n  \n  \n    \n      AA\n      1\n      mean\n      0.032106\n      0.004699\n    \n    \n      count\n      1277.000000\n      1277.000000\n    \n    \n      2\n      mean\n      0.007341\n      0.001631\n    \n    \n      count\n      1226.000000\n      1226.000000\n    \n    \n      3\n      mean\n      0.011949\n      0.001494\n    \n    \n      ...\n      ...\n      ...\n      ...\n      ...\n    \n    \n      WN\n      5\n      count\n      1201.000000\n      1201.000000\n    \n    \n      6\n      mean\n      0.010132\n      0.003040\n    \n    \n      count\n      987.000000\n      987.000000\n    \n    \n      7\n      mean\n      0.006066\n      0.002600\n    \n    \n      count\n      1154.000000\n      1154.000000\n    \n  \n\n196 rows × 2 columns\n\n\n\n- 사용예시2\n\ndf.stack().stack().reset_index().rename({0:'value'},axis=1)\n#df.stack().stack().reset_index().rename(columns={'level_2':'aggtype'})\n\n\n\n\n\n  \n    \n      \n      AIRLINE\n      WEEKDAY\n      level_2\n      level_3\n      value\n    \n  \n  \n    \n      0\n      AA\n      1\n      mean\n      CANCELLED\n      0.032106\n    \n    \n      1\n      AA\n      1\n      mean\n      DIVERTED\n      0.004699\n    \n    \n      2\n      AA\n      1\n      count\n      CANCELLED\n      1277.000000\n    \n    \n      3\n      AA\n      1\n      count\n      DIVERTED\n      1277.000000\n    \n    \n      4\n      AA\n      2\n      mean\n      CANCELLED\n      0.007341\n    \n    \n      ...\n      ...\n      ...\n      ...\n      ...\n      ...\n    \n    \n      387\n      WN\n      6\n      count\n      DIVERTED\n      987.000000\n    \n    \n      388\n      WN\n      7\n      mean\n      CANCELLED\n      0.006066\n    \n    \n      389\n      WN\n      7\n      mean\n      DIVERTED\n      0.002600\n    \n    \n      390\n      WN\n      7\n      count\n      CANCELLED\n      1154.000000\n    \n    \n      391\n      WN\n      7\n      count\n      DIVERTED\n      1154.000000\n    \n  \n\n392 rows × 5 columns\n\n\n\n- 사용예시3 (unstack)\n\ndf.stack().unstack()\n\n\n\n\n\n  \n    \n      \n      \n      CANCELLED\n      DIVERTED\n    \n    \n      \n      \n      mean\n      count\n      mean\n      count\n    \n    \n      AIRLINE\n      WEEKDAY\n      \n      \n      \n      \n    \n  \n  \n    \n      AA\n      1\n      0.032106\n      1277.0\n      0.004699\n      1277.0\n    \n    \n      2\n      0.007341\n      1226.0\n      0.001631\n      1226.0\n    \n    \n      3\n      0.011949\n      1339.0\n      0.001494\n      1339.0\n    \n    \n      4\n      0.015004\n      1333.0\n      0.003751\n      1333.0\n    \n    \n      5\n      0.014151\n      1272.0\n      0.000786\n      1272.0\n    \n    \n      ...\n      ...\n      ...\n      ...\n      ...\n      ...\n    \n    \n      WN\n      3\n      0.014118\n      1275.0\n      0.001569\n      1275.0\n    \n    \n      4\n      0.007911\n      1264.0\n      0.003165\n      1264.0\n    \n    \n      5\n      0.005828\n      1201.0\n      0.000000\n      1201.0\n    \n    \n      6\n      0.010132\n      987.0\n      0.003040\n      987.0\n    \n    \n      7\n      0.006066\n      1154.0\n      0.002600\n      1154.0\n    \n  \n\n98 rows × 4 columns\n\n\n\n\nmelt, stack 을 set_index와 reset_index와 함께 사용하면 tidydata를 만들기 용이하다."
  },
  {
    "objectID": "posts/Day3/07_DataWrangling/2023-02-01-Lesson15.html#tidydata의-정의",
    "href": "posts/Day3/07_DataWrangling/2023-02-01-Lesson15.html#tidydata의-정의",
    "title": "Lesson 15: tidydata",
    "section": "tidydata의 정의",
    "text": "tidydata의 정의\n- 느낌: ggplot으로 그림 그리기 좋은 데이터 + pandas로 query, group by 등을 쓰기 좋은 자료\n- 정의: https://r4ds.had.co.nz/tidy-data.html\n\nEach variable must have its own column.\nEach observation must have its own row.\nEach value must have its own cell.\n\n예시1 (tidy data)\n\n\n\nobs\nx\ny\nshape\ncolor\n\n\n\n\n0\n0\n0\n‘star’\n‘F’\n\n\n1\n0\n1\n‘circ’\n‘F’\n\n\n2\n1\n0\n‘star’\n‘M’\n\n\n3\n1\n1\n‘circ’\n‘M’\n\n\n\n예시2 (tidy data x)\n\n\n\n\nshape=star\nshape=circ\n\n\n\n\ncolor=F\n(0,0)\n(0,1)\n\n\ncolor=M\n(1,0)\n(1,1)"
  },
  {
    "objectID": "posts/Day3/07_DataWrangling/2023-02-01-Lesson15.html#예제1-wide-df",
    "href": "posts/Day3/07_DataWrangling/2023-02-01-Lesson15.html#예제1-wide-df",
    "title": "Lesson 15: tidydata",
    "section": "예제1: wide df",
    "text": "예제1: wide df\n- data\n\ndf=pd.read_csv('https://raw.githubusercontent.com/guebin/2021DV/master/_notebooks/phone.csv')\ndf\n\n\n\n\n\n  \n    \n      \n      Date\n      Samsung\n      Apple\n      Huawei\n      Xiaomi\n      Oppo\n      Mobicel\n      Motorola\n      LG\n      Others\n      Realme\n      Google\n      Nokia\n      Lenovo\n      OnePlus\n      Sony\n      Asus\n    \n  \n  \n    \n      0\n      2019-10\n      461\n      324\n      136\n      109\n      76\n      81\n      43\n      37\n      135\n      28\n      39\n      14\n      22\n      17\n      20\n      17\n    \n    \n      1\n      2019-11\n      461\n      358\n      167\n      141\n      86\n      61\n      29\n      36\n      141\n      27\n      29\n      20\n      23\n      10\n      19\n      27\n    \n    \n      2\n      2019-12\n      426\n      383\n      143\n      105\n      53\n      45\n      51\n      48\n      129\n      30\n      20\n      26\n      28\n      18\n      18\n      19\n    \n    \n      3\n      2020-01\n      677\n      494\n      212\n      187\n      110\n      79\n      65\n      49\n      158\n      23\n      13\n      19\n      19\n      22\n      27\n      22\n    \n    \n      4\n      2020-02\n      593\n      520\n      217\n      195\n      112\n      67\n      62\n      71\n      157\n      25\n      18\n      16\n      24\n      18\n      23\n      20\n    \n    \n      5\n      2020-03\n      637\n      537\n      246\n      187\n      92\n      66\n      59\n      67\n      145\n      21\n      16\n      24\n      18\n      31\n      22\n      14\n    \n    \n      6\n      2020-04\n      647\n      583\n      222\n      154\n      98\n      59\n      48\n      64\n      113\n      20\n      23\n      25\n      19\n      19\n      23\n      21\n    \n    \n      7\n      2020-05\n      629\n      518\n      192\n      176\n      91\n      87\n      50\n      66\n      150\n      43\n      27\n      15\n      18\n      19\n      19\n      13\n    \n    \n      8\n      2020-06\n      663\n      552\n      209\n      185\n      93\n      69\n      54\n      60\n      140\n      39\n      16\n      16\n      17\n      29\n      25\n      16\n    \n    \n      9\n      2020-07\n      599\n      471\n      214\n      193\n      89\n      78\n      65\n      59\n      130\n      40\n      27\n      25\n      21\n      18\n      18\n      12\n    \n    \n      10\n      2020-08\n      615\n      567\n      204\n      182\n      105\n      82\n      62\n      42\n      129\n      47\n      16\n      23\n      21\n      27\n      23\n      20\n    \n    \n      11\n      2020-09\n      621\n      481\n      230\n      220\n      102\n      88\n      56\n      49\n      143\n      54\n      14\n      15\n      17\n      15\n      19\n      15\n    \n    \n      12\n      2020-10\n      637\n      555\n      232\n      203\n      90\n      52\n      63\n      49\n      140\n      33\n      17\n      20\n      22\n      9\n      22\n      21\n    \n  \n\n\n\n\n\ntidy data 아님\n정의에 의한 판단: 하나의 observation이 하나의 행을 차지하고 있지 않음.\n직관적인 판단: 회사별로 색을 다르게 하여 x:‘Date’, y:’판매량’을 하고 싶다면?\n\n- tidydata로 변환 (melt는 너무 쉬우니까 stack으로 해보자)\n\ndf.set_index('Date').stack().reset_index().rename({'level_1':'Company',0:'Sales'},axis=1)\n\n\n\n\n\n  \n    \n      \n      Date\n      Company\n      Sales\n    \n  \n  \n    \n      0\n      2019-10\n      Samsung\n      461\n    \n    \n      1\n      2019-10\n      Apple\n      324\n    \n    \n      2\n      2019-10\n      Huawei\n      136\n    \n    \n      3\n      2019-10\n      Xiaomi\n      109\n    \n    \n      4\n      2019-10\n      Oppo\n      76\n    \n    \n      ...\n      ...\n      ...\n      ...\n    \n    \n      203\n      2020-10\n      Nokia\n      20\n    \n    \n      204\n      2020-10\n      Lenovo\n      22\n    \n    \n      205\n      2020-10\n      OnePlus\n      9\n    \n    \n      206\n      2020-10\n      Sony\n      22\n    \n    \n      207\n      2020-10\n      Asus\n      21\n    \n  \n\n208 rows × 3 columns"
  },
  {
    "objectID": "posts/Day3/07_DataWrangling/2023-02-01-Lesson15.html#예제2-multi-indexed-data",
    "href": "posts/Day3/07_DataWrangling/2023-02-01-Lesson15.html#예제2-multi-indexed-data",
    "title": "Lesson 15: tidydata",
    "section": "예제2: multi-indexed data",
    "text": "예제2: multi-indexed data\n- 데이터\n\ndf=pd.read_csv('https://raw.githubusercontent.com/PacktPublishing/Pandas-Cookbook/master/data/flights.csv')\\\n.groupby([\"AIRLINE\",\"WEEKDAY\"]).agg({\"CANCELLED\":[np.mean,\"count\"],\"DIVERTED\":[np.mean,\"count\"]})\ndf\n\n\n\n\n\n  \n    \n      \n      \n      CANCELLED\n      DIVERTED\n    \n    \n      \n      \n      mean\n      count\n      mean\n      count\n    \n    \n      AIRLINE\n      WEEKDAY\n      \n      \n      \n      \n    \n  \n  \n    \n      AA\n      1\n      0.032106\n      1277\n      0.004699\n      1277\n    \n    \n      2\n      0.007341\n      1226\n      0.001631\n      1226\n    \n    \n      3\n      0.011949\n      1339\n      0.001494\n      1339\n    \n    \n      4\n      0.015004\n      1333\n      0.003751\n      1333\n    \n    \n      5\n      0.014151\n      1272\n      0.000786\n      1272\n    \n    \n      ...\n      ...\n      ...\n      ...\n      ...\n      ...\n    \n    \n      WN\n      3\n      0.014118\n      1275\n      0.001569\n      1275\n    \n    \n      4\n      0.007911\n      1264\n      0.003165\n      1264\n    \n    \n      5\n      0.005828\n      1201\n      0.000000\n      1201\n    \n    \n      6\n      0.010132\n      987\n      0.003040\n      987\n    \n    \n      7\n      0.006066\n      1154\n      0.002600\n      1154\n    \n  \n\n98 rows × 4 columns\n\n\n\n\ntidy data 아님\n정의에 의한 판단: 하나의 셀에 여러 관측치가 있음 (표안의 표 느낌)\n직관적인 판단: WEEKDAY == 4 and mean(CANCELLED) > 0.001 인 자료를 뽑고 싶다면?\n\n- tidydata로 변환 (stack으로 풀면 너무 쉬우니까 melt로 해보자)\n\ndf.melt(ignore_index=False).reset_index()\n\n\n\n\n\n  \n    \n      \n      AIRLINE\n      WEEKDAY\n      variable_0\n      variable_1\n      value\n    \n  \n  \n    \n      0\n      AA\n      1\n      CANCELLED\n      mean\n      0.032106\n    \n    \n      1\n      AA\n      2\n      CANCELLED\n      mean\n      0.007341\n    \n    \n      2\n      AA\n      3\n      CANCELLED\n      mean\n      0.011949\n    \n    \n      3\n      AA\n      4\n      CANCELLED\n      mean\n      0.015004\n    \n    \n      4\n      AA\n      5\n      CANCELLED\n      mean\n      0.014151\n    \n    \n      ...\n      ...\n      ...\n      ...\n      ...\n      ...\n    \n    \n      387\n      WN\n      3\n      DIVERTED\n      count\n      1275.000000\n    \n    \n      388\n      WN\n      4\n      DIVERTED\n      count\n      1264.000000\n    \n    \n      389\n      WN\n      5\n      DIVERTED\n      count\n      1201.000000\n    \n    \n      390\n      WN\n      6\n      DIVERTED\n      count\n      987.000000\n    \n    \n      391\n      WN\n      7\n      DIVERTED\n      count\n      1154.000000\n    \n  \n\n392 rows × 5 columns"
  },
  {
    "objectID": "3_2.html",
    "href": "3_2.html",
    "title": "Chap 8. 고차원 자료 시각화",
    "section": "",
    "text": "Date\n\n\nTitle\n\n\nAuthor\n\n\n\n\n\n\nFeb 1, 2023\n\n\nLesson 16: 고차원 자료의 시각화 (with plotnine)\n\n\n최규빈\n\n\n\n\nFeb 1, 2023\n\n\nLesson 17: 아이스크림을 많이 먹으면 걸리는 병\n\n\n최규빈\n\n\n\n\nFeb 1, 2023\n\n\nLesson 18: FIFA23 자료분석\n\n\n최규빈\n\n\n\n\nFeb 1, 2023\n\n\nLesson 19: 심슨의 역설\n\n\n최규빈\n\n\n\n\n\n\nNo matching items"
  },
  {
    "objectID": "1_3.html",
    "href": "1_3.html",
    "title": "Chap 3. Pandas",
    "section": "",
    "text": "No matching items"
  },
  {
    "objectID": "3_1.html",
    "href": "3_1.html",
    "title": "Chap 7. Data Wrangling",
    "section": "",
    "text": "Date\n\n\nTitle\n\n\nAuthor\n\n\n\n\n\n\nFeb 1, 2023\n\n\nLesson 14: groupby\n\n\n최규빈\n\n\n\n\nFeb 1, 2023\n\n\nLesson 15: tidydata\n\n\n최규빈\n\n\n\n\n\n\nNo matching items"
  },
  {
    "objectID": "index.html",
    "href": "index.html",
    "title": "파이썬을 이용한 통계자료분석",
    "section": "",
    "text": "Day1\n\n2022-파이썬입문 3월7일 // 영상4~8\n2022-파이썬입문 3월14일 // 모든영상\n2022-파이썬입문 3월16일 // 모든영상\n2022-파이썬입문 3월21일 // 모든영상\n2022-파이썬입문 3월23일 // 모든영상\n2022-파이썬입문 4월6일 // 모든영상\n2022-파이썬입문 4월11일 // 모든영상\n2022-파이썬입문 5월6일 // 모든영상\n\nDay2\n\n2022-데이터시각화 06wk-1,2 // 모든영상\n2022-데이터시각화 07wk-1 // 영상1,2\n2022-데이터시각화 08wk-1,2 // 영상1,2\n\n\n\n\n\n\n\n\n\n\n\nDate\n\n\nTitle\n\n\nAuthor\n\n\n\n\n\n\nFeb 1, 2023\n\n\nLesson 14: groupby\n\n\n최규빈\n\n\n\n\nFeb 1, 2023\n\n\nLesson 15: tidydata\n\n\n최규빈\n\n\n\n\nFeb 1, 2023\n\n\nLesson 16: 고차원 자료의 시각화 (with plotnine)\n\n\n최규빈\n\n\n\n\nFeb 1, 2023\n\n\nLesson 16: 고차원 자료의 시각화 (with plotnine)\n\n\n최규빈\n\n\n\n\nFeb 1, 2023\n\n\nLesson 17: 아이스크림을 많이 먹으면 걸리는 병\n\n\n최규빈\n\n\n\n\nFeb 1, 2023\n\n\nLesson 17: 아이스크림을 많이 먹으면 걸리는 병\n\n\n최규빈\n\n\n\n\nFeb 1, 2023\n\n\nLesson 18: FIFA23 자료분석\n\n\n최규빈\n\n\n\n\nFeb 1, 2023\n\n\nLesson 18: FIFA23 자료분석\n\n\n최규빈\n\n\n\n\nFeb 1, 2023\n\n\nLesson 19: 심슨의 역설\n\n\n최규빈\n\n\n\n\nFeb 1, 2023\n\n\nLesson 19: 심슨의 역설\n\n\n최규빈\n\n\n\n\n\n\nNo matching items"
  },
  {
    "objectID": "2_1.html",
    "href": "2_1.html",
    "title": "Chap 5. 모듈",
    "section": "",
    "text": "No matching items"
  }
]